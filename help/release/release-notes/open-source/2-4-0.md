---
title: Magento Open Source2.4.0发行说明
description: 了解2.4.5Magento Open Source版本中的新增功能、增强功能、错误修复和已知问题。
recommendations: noCatalog
exl-id: 058f9dfe-7b03-405b-96cc-3904c910e0f6
source-git-commit: 4bcc68890e16e51f0a84ed3d0d47b1f3dbbd52f0
workflow-type: tm+mt
source-wordcount: '17553'
ht-degree: 0%

---

# Magento Open Source2.4.0发行说明

Magento Open Source2.4.0引入了对PHP 7.4、Elasticsearch7.6.x和MySQL 8.0的支持。重大的安全更改包括默认情况下在Admin中启用双重身份验证。

**在此版本中，已从核心代码中删除Authorize.Net方法集成。 商家应迁移到Commerce Marketplace**&#x200B;上可用的官方扩展。

>[!NOTE]
>
>**Braintree付款集成**：在2.4.0之前，建议商家从Commerce Marketplace安装和配置官方Braintree付款集成扩展以替换核心集成。 在此版本(2.4.0)中，扩展现已包含在版本中。 商家必须执行其他步骤，以确保Braintree在2.4.0部署中正常工作。 有关如何迁移到2.4.0的更多信息，请参阅[Braintree](https://docs.magento.com/user-guide/payment/braintree.html)。

此版本包括2.3.5-p1中包含的所有核心质量改进、核心代码的100多项新修复以及30项安全增强功能。 其中包括我们的社区成员解决226个GitHub问题。 这些社区贡献的内容包括对核心代码进行次要清理，以及在Inventory management和GraphQL中进行重大改进。

>[!NOTE]
>
>次要版本带来了代码的大幅增强。 在升级到2.4.0之前，请确认您的环境满足最低的[技术栈栈要求](../../../installation/system-requirements.md)。

{{bics}}

>[!NOTE]
>
>安全版本的包名称通常附加 — p1。 但是，我们无法避免偏离这些使用2.3.5的命名惯例，这反过来又对后续的安全包名称产生了暂时的连锁反应。 具体来说，完整功能2.3.5版本为2.3.5-p1。 我们将在2.4.0 GA时发布的安全版本将为2.3.5-p2。 我们希望在未来的版本中恢复为常用的命名惯例。

## 应用`AC-3022.patch`以继续将DHL作为装运承运人提供

DHL已引入架构版本6.2，并且将在不久的将来弃用架构版本6.0。 支持DHL集成的Adobe Commerce 2.4.4及更早版本仅支持版本6.0。部署这些版本的商家应尽早应用`AC-3022.patch`，以继续将DHL作为装运承运人提供。 有关下载和安装修补程序的信息，请参阅[应用修补程序以继续将DHL作为运输运营商提供](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier)知识库文章。

## 安全补丁可用

商家现在无需应用完整季度版本（例如2.3.5-p2）提供的数百个功能修复和增强功能，即可安装时效性很强的安全修复。 修补程序2.3.5.2（Composer包2.3.5-p2）是一个安全修补程序，它针对我们以前的季度版本2.3.5-p1中发现的漏洞提供了修复。 此安全修补程序中包含应用于2.3.5版本的所有修补程序。 （*修补程序*&#x200B;提供对已发布版本的修补程序，该版本可解决特定问题或错误。）

有关安全修补程序的一般信息，请参阅[Introducing the New Security Patch Release](https://community.magento.com/t5/Magento-DevBlog/Introducing-the-New-Security-Patch-Release/ba-p/141287)。有关下载和应用安全修补程序（包括修补程序2.3.5-p2）的说明，请参阅[快速入门内部部署](../../../installation/composer.md)。 安全修补程序仅包括安全错误修复，而不包括完整修补程序中包含的其他安全增强功能。

## 其他发行信息

虽然这些功能的代码与季度版本捆绑在一起，但其中几个项目(例如，Inventory management和Progressive Web Application(PWA)Studio)也单独发布。 每个项目的文档中都提供了特定于项目的单独发行信息，其中记录了这些项目的错误修复。

## 高亮

在此版本中查找以下要点：

### 显着的安全增强功能

此版本包括30多项安全修复和平台安全改进。

#### 超过30项安全增强功能，可帮助消除远程代码执行(RCE)和跨站点脚本(XSS)漏洞

到目前为止，尚未发生与这些问题相关的已确认攻击。 但是，可能会利用某些漏洞访问客户信息或接管管理员会话。 这些问题中的大多数要求攻击者首先获得对管理员的访问权限。 列入允许列表因此，我们提醒您采取一切必要步骤来保护您的管理员，包括但不限于：IP身份验证、[双重身份验证](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)、使用VPN、使用唯一位置而非`/admin`以及良好的密码卫生。 有关这些已修复问题的讨论，请参阅[可用于Magento](https://helpx.adobe.com/security/products/magento/apsb20-47.html)的安全更新。 以讨论这些已修复的问题。

#### 其他安全增强功能

* **为管理员帐户、magento.com用户帐户和云SSH访问实施2FA**

   * **保护你的管理员帐户**。 现在，管理员需要双重身份验证(2FA)。 管理员用户必须先配置其2FA，然后才能通过UI或Web API登录到管理员。 2FA默认处于启用状态。 我们强烈建议不要禁用2FA模块。  这一额外的身份验证步骤使得恶意用户更难以未经授权登录到管理员。 请参阅[双重身份验证(2FA)](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)。<!-- MC-22631-->

   * **保护您的帐户**。 双重身份验证(2FA)提供了一层附加的可选安全保护，可以更好地保护您的magento.com帐户，使其免受未经授权用户的攻击，这些用户可能希望以您不希望的方式使用您的帐户。 请参阅[保护您的帐户](https://docs.magento.com/user-guide/magento/magento-account-secure.html)。

* **保护云SSH访问**。 云基础架构上的Adobe提供了多重身份验证(MFA)实施，用于管理对云环境的SSH访问的身份验证要求。 默认情况下，项目上未启用2FA的多重身份验证。  Adobe强烈建议启用此功能。 请联系支持人员以获取帮助。 请参阅[为SSH访问启用多重身份验证](https://devdocs.magento.com/cloud/project/project-enable-mfa-enforcement.html)。

* **模板筛选严格模式现在默认启用**。 在旧模式下使用模板过滤器的组件（包括CMS页面和块）容易遭受远程代码执行(RCE)的攻击。 默认情况下，启用严格模式可确保不会蓄意启用RCE攻击。 <!-- MC-22982-->

* **默认情况下，UI数据提供程序的数据渲染现在处于禁用状态**。 这消除了恶意用户执行任意JavaScript的机会。<!-- MC-17356-->

* **新`\Magento\Framework\Escaper`类**。 为负责生成HTML的`.phtml`模板和PHP类提供了此类。 此类包含与多个上下文相关的HTML清理方法。 `$escaper`局部变量可在`.phtml`模板中使用，应使用它来代替已弃用的`$block->escape{method}`。 使用`$escaper`而不是`$block`，因为已弃用`$block->escape{method}`。

* **支持新的security.txt文件**。 此文件是服务器上的行业标准文件，可帮助安全研究人员向站点管理员报告潜在的安全问题。

* **对内容安全策略(CSP)支持的增强功能**。 `SecureHtmlRenderer`已添加到框架中，并且在`.phtml`模板中可用于将内联`style`和`script`标记列入白名单。 默认CSP配置不允许使用内联脚本和样式，XML文件可能会覆盖这些脚本和样式。<!-- MC-34433-->

{{cve-notice}}

### 平台升级

以下平台升级有助于增强网站的安全性和性能。 [技术栈栈要求](../../../installation/system-requirements.md)中列出了PHP和PHPUnit、Elasticsearch、MySQL以及其他依赖项的支持版本。

* 引入了&#x200B;**PHP 7.4支持，不建议使用PHP 7.1和7.2**。 2.4.0引入了对PHP 7.4的支持。

* **支持PHPUnit 9.x并弃用PHPUnit 6.5**。 PHP 7.4需要使用最新的PHPUnit测试框架，即PHPUnit 9.x。Commerce Marketplace扩展供应商必须确认所有新的扩展版本都与PHP 7.4兼容，并且所有单元测试和集成测试都已配置为使用PHPUnit 9运行。

* **Elasticsearch7.6.x支持**。 Elasticsearch7.6.x现在是Adobe Commerce和Adobe Commerce的默认目录搜索引擎。 如果不安装Elasticsearch7.6.x，则无法安装或升级到版本2.4.0。已删除版本2.x代码的Elasticsearch。 Elasticsearch版本5.x和6.x已被弃用，不再受支持。 请参阅[搜索引擎先决条件](../../../installation/prerequisites/search-engine/overview.md)。

* **MySQL 8.0支持**。 版本2.4.x支持MySQL 8.x。（使用MySQL 8.0.20对2.4.0进行了测试。） 我们鼓励商家将其部署迁移到MySQL 8.x，以利用其改进的性能、安全性和可靠性。 虽然Magento2.4.x仍支持MySQL 5.7，但不再支持MySQL 5.6。 无法使用MySQL 5.6数据库托管2.4.x。 请参阅[MySQL](../../../installation/prerequisites/database/mysql.md)。

* **正在删除MySQL目录搜索引擎**。 MySQL搜索引擎已从2.4.0中删除，并替换为Elasticsearch的默认搜索引擎。 Elasticsearch提供卓越的搜索功能以及目录性能优化。  所有商家都必须有Elasticsearch安装和部署2.4.0。请参阅[验证Elasticsearch是否已安装](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/prepare/prerequisites.html)。

* **MariaDB 10.4支持**。 对MySQL 8.0的支持为商家提供了使用Magento Open Source部署MariaDB 10.4的机会。 虽然商家仍然可以使用MariaDB 10.2和2.4.0，但我们建议升级到MariaDB 10.4以提高性能和可靠性。 不再支持MariaDB 10.0和10.1（因为此版本中不再支持MySQL 5.6）。

* **将Zend框架上的依赖项迁移到[Laminas项目](https://getlaminas.org/about/foundation)**，以反映Zend框架到Linux Foundation的Laminas项目的转换。 Zend框架已被弃用。 请参阅[将Zend框架迁移到Laminas项目](https://community.magento.com/t5/Magento-DevBlog/Migration-of-Zend-Framework-to-the-Laminas-Project/ba-p/443251) DevBlog文章。

* **控制器分解**&#x200B;允许扩展开发人员直接实现ActionInterface，而无需“层超类型”类。 请参阅[控制器分解](https://community.magento.com/t5/Magento-DevBlog/Decomposition-of-Magento-Controllers/ba-p/430883) DevBlog文章。 _增强功能由Vinai Kopp在拉取请求[16268](https://github.com/magento/magento2/pull/16268)中启动，并由Lukasz Bajsarowicz在拉取请求[26778](https://github.com/magento/magento2/pull/26778)_&#x200B;中完成。 [GitHub-9582](https://github.com/magento/magento2/issues/9582)

* **删除Signifyd欺诈防护代码的核心集成**。 不再支持此核心功能。 商家应迁移到Commerce Marketplace上可用的[Signifyd Fraud &amp; Chargeback Protection扩展](https://marketplace.magento.com/signifyd-module-connect.html)。

* 已从代码库&#x200B;**中删除**&#x200B;核心Braintree模块。 Braintree支付模块现在提供了相同的功能集。 请参阅[Braintree付款](https://marketplace.magento.com/paypal-module-braintree.html)。

* 不再支持Internet Explorer 11.x浏览器。

### 基础架构改进

此版本包含对核心质量的增强，这些增强改进了Framework和以下模块的质量：客户帐户、目录、CMS、导入、购物车和结账以及B2B。

* **删除第三方付款方法的核心集成**。 在此版本中，已从核心代码中删除Authorize.Net支付方法集成。 商家应该迁移到Commerce Marketplace上提供的官方扩展。 请参阅[弃用付款集成](https://community.magento.com/t5/Magento-DevBlog/Deprecation-of-Magento-core-payment-integrations/ba-p/426445) devblog文章。<!-- MC-29029-->

* **支持Elasticsearch的部分单词搜索（新的默认搜索引擎）**。 使用快速搜索时，Elasticsearch现在支持在搜索词中使用部分词来搜索产品名称和SKU。 MySQL搜索引擎支持此功能，在此版本中，该搜索引擎已弃用，并被Elasticsearch所取代。

* **Paypal JavaScript SDK升级**。 我们已将PayPal Express Checkout集成迁移到最新的PayPal JavaScript SDK，该SDK会自动收集所需的风险参数并将其传递给PayPal。 PayPal Express结账支付方式的行为保持不变。 但是，将此SDK升级到最新版本可让商家访问最新功能和安全增强功能。<!-- MC-30962-->

* **弃用并删除Web设置向导**。 必须使用命令行安装或升级2.4.0。请参阅[安装Magento](../../../installation/advanced.md)。

* **编辑器更新插件**。 Composer插件通过解析在更新到新版本之前必须对根项目`composer.json`文件进行的更改来简化升级过程。 此插件可防止覆盖自定义设置。 请参阅[使用编辑器根插件](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/implementation/perform-upgrade.html)升级。

* **卖方辅助购物**。 此功能允许商家代表其客户查看店面。 客户选择允许店面访问其帐户。 此社区开发的功能包括由[MAGEFAN](https://magefan.com/)开发的原始扩展。 查看[卖方辅助购物](https://docs.magento.com/user-guide/configuration/customers/login-as-customer.html)。 功能包括：

   * ACL可以针对每个网站配置哪些管理员可以登录到客户帐户
   * 与多个网站和客户帐户范围的兼容性
   * 代表客户下达的订单将记录在店面和管理员
   * 管理员注销后，所有会话都会被销毁，并且管理员无法访问客户密码。

### 性能改进

* **改进客户数据部分失效逻辑**。 此版本引入了使所有客户部分数据失效的新方式，可避免在自定义`sections.xml`失效处于活动状态时本地存储出现已知问题。  (以前，当具有操作无效的自定义&#x200B;*etc/frontend/sections.xml*&#x200B;时，未正确填充私有内容（本地存储）。) 查看[私人内容](https://developer.adobe.com/commerce/php/development/cache/page/private-content/)。

* **针对Redis性能的多项优化**。 增强功能最大限度地减少了针对每个请求执行的Redis查询次数。 这些优化包括：

   * 减少Redis和Magento之间的网络数据传输量

   * 通过提高适配器自动确定需要加载内容的能力，减少Redis的CPU周期消耗

   * 减少Redis写入操作中的竞争条件

  请参阅[为页面和默认缓存使用Redis](../../../configuration/cache/redis-pg-cache.md)和[配置缓存](../../../configuration/cache/caching-overview.md)。

* **已改进对清单表的SQL查询结果的缓存**。 这些增强功能包括：

   * 对`inventory_stock_sales_channel`表的SQL查询的缓存（1个查询而非16个）

   * 缓存对`inventory_stock`表的查询结果（1个查询而非16个）

* **将快速订购添加到购物车的性能提升高达25-30%**。

* 商家现在可以使用[延迟加载](https://en.wikipedia.org/wiki/Lazy_loading)来加载图像。

### Adobe Stock集成v2.0

**能够从媒体集**&#x200B;中授权库存图像预览。 商家现在可以在媒体集中找到任何Adobe Stock预览图像，这减少了许可库存预览图像所需的步骤数。

### 新建媒体集

这是对以前媒体集的替代，为媒体资产提供了一个新的可搜索界面。 管理员现在可以搜索、过滤和排序图像，比早期版本的此功能快30倍。 商家可以使用此工具来评估店面图像使用情况。 扩展开发人员应该知道，为媒体集开发的扩展将无法与新的媒体集一起正常工作。

### Inventory management

此版本的Inventory management增强功能包括支持店内收取和捆绑销售产品支持。 有关最新Inventory management错误修复的更详细讨论，请参阅[Inventory management发行说明](https://experienceleague.adobe.com/docs/commerce-admin/inventory/release-notes.html)。

### GraphQL

GraphQL增强功能包括：

* `pickupLocations`查询支持库存店内提货功能
* `categories`查询返回与指定过滤器匹配的类别列表。 此查询与`categoryList`查询的不同之处在于它支持分页。
* `reorderItems`突变允许登录用户将之前订单中的所有产品添加到购物车。

有关此增强功能和其他增强功能的详细信息，请参阅[GraphQL开发人员指南](https://devdocs.magento.com/guides/v2.4/graphql/)。 有关最近的GraphQL错误修复的详细讨论，请参阅[发行说明](https://devdocs.magento.com/guides/v2.4/graphql/release-notes.html)。

### PWA Studio

有关PWA Studio版本及其兼容版本的列表，请参阅[兼容性](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/)。 有关增强功能和错误修复的信息，请参阅[PWA Studio版本](https://github.com/magento/pwa-studio/releases)。

### 功能测试框架(MFTF)

MFTF v3.0.0包含这些新增功能，并包含对PHP 7.4和PHPUnit 9的支持：

* MFTF帮助程序，可以在测试框架之外创建自定义操作
* 测试实体的架构更新
* 测试模块中的子文件夹
* 嵌套断言语法
* 静态检查，用于检查和报告对已弃用测试实体的引用

此版本还删除了为将测试升级到MFTF主版本要求而添加的已弃用操作和升级脚本。

### 供应商开发的扩展增强功能

此版本的包含由第三方供应商开发的扩展。 它在这些扩展中引入了质量和UX方面的改进，并扩展了MFTF覆盖范围。

Commerce Marketplace扩展供应商在发布其2.4.0扩展的新版本时，应确认其扩展与PHP 7.4兼容。

#### Amazon Pay

此版本包括：

* CSP允许列表的更新
* 能够针对多物料订单执行多项授权
* 支持日语地址

#### Braintree支付

此扩展取代了我们的核心Braintree集成。 它提供与Braintree核心集成相同的功能。 请参阅[Braintree付款](https://marketplace.magento.com/paypal-module-braintree.html)。

#### 克拉尔纳

此版本包括新的现场消息传送选项，以帮助购物者了解可用的信贷和融资选项。 它还包括对以下方面的改进：

* 退款
* API效率
* Cookie和单元测试
* 折扣
* 配置设置现在包含“现场消息”部分，用于控制卡拉纳促销消息的店面显示

#### 顶点

此版本的“顶点”包括以下新功能和增强功能：

* 改进了管理员配置用户体验
* 用XML模式文件和修补程序替换安装和升级脚本
* 删除已弃用的代码（`ApiClient`和`ClientInterface`）

#### Yotpo

Yotpo评级和审阅已与Page Builder集成。

## 修复的问题

我们已在2.4.0核心代码中修复了数百个问题。

### 安装、升级、部署

<!-- MC-23940-->

* 您现在可以按预期在`app/etc/config.php`中成功删除网站以及该网站特定于作用域的配置设置。 以前，当您尝试删除网站时，操作失败，应用程序显示以下错误： `The website with code xxx that was requested wasn't found. Verify the website and try again`。 此外，应用程序在店面上显示此错误： `Config files have changed. Run app:config:import or setup:upgrade command to synchronize configuration`。 [GitHub-24061](https://github.com/magento/magento2/issues/24061)

<!-- MC-30140-->

* 在`index.php`中禁用的配置设置不能再从管理员中进行编辑。

<!-- MC-32405-->

在`config.php`中预定义了存储配置时，Magento Open Source安装现在会成功完成，并且会按预期创建存储。

<!-- MC-33151-->

* `\Magento\Store\App\Config\Source\RuntimeConfigSource::getEntities`已重构，以减少它进行的`SHOW TABLE STATUS`查询数。 （此更改将还原为此函数在2.3.3中显示的行为。）

<!-- MC-23890-->

* 当您尝试通过运行`bin/magento setup:upgrade`来升级数据库时，不再重新运行数据脚本。 以前，升级脚本会不必要地重新运行，从而影响性能。 [GitHub-19469](https://github.com/magento/magento2/issues/19469)

<!-- MC-30397-->

* 现在，当与Redis的连接中断时，应用程序会显示以下行为。 以前，应用程序未重新加载当前页面，并显示此错误： `An error has happened during application run. See exception log for details`。

   * 管理员和Storefront会话过期
   * 管理员和店面用户必须再次登录
   * 会话数据保存到`var/session/`
   * 未记录任何错误或异常。

<!-- ENGCOM-6686-->

* `bin/magento setup:di:compile`命令不再因匿名类而失败。 _Yeven Sentiabov在拉取请求[中提交的修复26533](https://github.com/magento/magento2/pull/26533)_。 [GitHub-26532](https://github.com/magento/magento2/issues/26532)，[GitHub-21555](https://github.com/magento/magento2/issues/21555)

<!-- ENGCOM-5546-->

* 解决了当使用替代的LESS编译器（而不是应用程序默认附带的LESS编译器）时，Magento的Luma主题中的LESS编译问题。 _Pieter Hoste在拉取请求[中提交的修复24003](https://github.com/magento/magento2/pull/24003)_。 [GitHub-23619](https://github.com/magento/magento2/issues/23619)

<!-- ENGCOM-6367-->

* 切换到维护模式时，您不再需要具有可写的`env.php`文件。 相反，应用程序为维护模式(`Cache-Control`)下的所有前端请求设置`no-cache`标头。 以前，当`env.php`为只读模式时无法启用维护模式，而应用程序尝试在切换到维护模式时禁用FPC。 _Marco k̦Pcke在拉取请求[中提交的修复25790](https://github.com/magento/magento2/pull/25790)_。 [GitHub-24229](https://github.com/magento/magento2/issues/24229)

<!-- ENGCOM-7236-->

* 在`ddev`安装过程中，`db-ssl-verify`不再导致未定义的索引错误。 由Daniel Ruf在拉取请求[中提交的&#x200B;_修复26763](https://github.com/magento/magento2/pull/26763)_。 [GitHub-26762](https://github.com/magento/magento2/issues/26762)

<!-- ENGCOM-6247-->

* 更新了编辑器依赖关系，以实施Redis密钥过期，从而改进了Redis性能。 在拉取请求[25488](https://github.com/magento/magento2/pull/25488)_中由毒物提交的_&#x200B;修复。 [GitHub-25487](https://github.com/magento/magento2/issues/25487)

### Adobe Stock集成

<!-- ENGCOM-6507-->

* 已将CSS样式添加到Adobe Stock图像显示，以支持突出显示所选图像。  在拉取请求[25864](https://github.com/magento/magento2/pull/25864)_中由Serhiy Zhovnir提交的_&#x200B;修复。 [GitHub-761](https://github.com/magento/adobe-stock-integration/issues/761)

<!-- ENGCOM-7021-->

* 使用箭头键移动输入字段光标后，不再触发浏览Adobe Stock预览图像的操作。  _由Adarsh Manickam在拉取请求[中提交的修复27138](https://github.com/magento/magento2/pull/27138)_。 [GitHub-973](https://github.com/magento/adobe-stock-integration/issues/973)

<!-- ENGCOM-6840-->

* 现在，应用程序会缓存客户尝试对Adobe Stock图像应用过滤器时出现错误的消息。 _由Shankar Konar在拉取请求[中提交的修复26502](https://github.com/magento/magento2/pull/26502)_。 [GitHub-863](https://github.com/magento/adobe-stock-integration/issues/863)

<!-- ENGCOM-7195-->

* 在单击&#x200B;**保存预览**&#x200B;但未确认保存操作后将光标移动到窗口的左垂直滚动条时，应用程序不再保存Adobe Stock图像的预览。 在拉取请求[27399](https://github.com/magento/magento2/pull/27399)_中由Serhiy Zhovnir提交的_&#x200B;修复。 [GitHub-1002](https://github.com/magento/adobe-stock-integration/issues/1002)

### 后端

<!-- MC-25036-->

* 启用JavaScript缩小功能后，现在可以从管理员预览电子邮件模板（**管理员** > **营销** > **通信** > **电子邮件模板**）。 以前，当您尝试预览电子邮件模板时，“电子邮件预览”弹出窗口为空。 [GitHub-25068](https://github.com/magento/magento2/issues/25068)

<!-- ENGCOM-6433-->

* 在创建权限有限的管理员帐户后，管理员现在可以按预期登录到管理员。 以前，无法访问管理员。 相反，具有这些权限的用户被重定向到店面，并出现404错误。 _Eden Duong在拉取请求[中提交的修复25909](https://github.com/magento/magento2/pull/25909)_。 [GitHub-25881](https://github.com/magento/magento2/issues/25881)

<!-- ENGCOM-6785-->

* 当您复制产品时，应用程序不再复制SEO数据，如URL键、元标题、元关键字和元描述。  _Dasharth patel在拉取请求[中提交的修复26659](https://github.com/magento/magento2/pull/26659)_。 [GitHub-26054](https://github.com/magento/magento2/issues/26054)

<!-- ENGCOM-6442-->

* 当您从&#x200B;**管理员** > **内容** > **页面** >创建图像时，应用程序不再引发错误  **添加新页面**。 以前，应用程序在开发人员控制台中引发此错误： `500 (Internal Server Error)`。 _Eden Duong在拉取请求[中提交的修复25924](https://github.com/magento/magento2/pull/25924)_。 [GitHub-25893](https://github.com/magento/magento2/issues/25893)

### 捆绑产品

<!-- MC-25251-->

* 已改进捆绑产品的`catalog_product_price`重新索引操作的性能。

<!-- MC-29633-->

* 对于默认商店视图，当捆绑产品的&#x200B;**税类**&#x200B;和&#x200B;**动态价格**&#x200B;设置被禁用时，管理员无法再在管理员中为捆绑产品手动输入税类。 以前，当管理员取消选中&#x200B;**税类**&#x200B;旁边的&#x200B;**使用默认值**&#x200B;选项时，应用程序将启用该选项，允许管理员输入其他值并保存产品。

<!-- MC-30257-->

* 现在，可在产品页面上正确计算捆绑产品价格。

<!-- MC-29745-->

* 现在，您可以向购物车添加任意数量的捆绑产品，而不会出错。 以前，当您将捆绑产品添加到购物车，然后导航到购物车时，应用程序显示以下错误： `Please correct the quantity for some products`。

### 缓存

<!-- ENGCOM-7114-->

* 来自`Magento\Framework\Cache`的`cache.xsd`架构已重构，以便在您通过管理缓存管理禁用模块时，不具有`instance`属性的缓存类型不再导致异常。 以前，当您使用不带`instance`参数的`cache.xml`创建缓存类型时，当您尝试禁用该类型时，应用程序会引发异常。  _Andrii Beziazychnyi在拉取请求[中提交的修复27307](https://github.com/magento/magento2/pull/27307)_。 [GitHub-26224](https://github.com/magento/magento2/issues/26224)

<!-- ENGCOM-6834-->

* 如果在部署中配置了数据库缓存引擎，`health_check.php`不再失败。 _Andrii Beziazychnyi在拉取请求[中提交的修复25722](https://github.com/magento/magento2/pull/25722)_。 [GitHub-25669](https://github.com/magento/magento2/issues/25669)

### 购物车和结账

<!-- MC-23870-->

* 启用&#x200B;**与后端同步**&#x200B;配置设置时，应用程序在签出期间不再引发错误。 [GitHub-23833](https://github.com/magento/magento2/issues/23833)

<!-- MC-29786-->

* 现在，可以在签出工作流中按预期启用配送方法的单选按钮。

<!-- MC-30258-->

* 现在，当启用了具有&#x200B;**手动应用**&#x200B;设置的条款和条件时，对于要发往多个地址的订单，结账工作流中的订单审核页面会成功加载。 以前，审阅页面未通过验证，应用程序显示404错误。

<!-- MC-32330-->

* 在购物车上更新价格时，应用程序现在显示旋转图标。

<!-- MC-33230-->

* 现在，当迷你购物车中的产品在结账前缺货时，应用程序会显示一条信息性消息。 删除缺货项目后，应用程序会显示&#x200B;**继续结帐**&#x200B;按钮。 以前，应用程序不显示此按钮。

<!-- MC-31391-->

* 现在，当您尝试在要上传的文件损坏时通过单击&#x200B;**按SKU排序**&#x200B;添加产品时，应用程序会显示信息性错误消息。 以前，应用程序显示空白页。

<!-- MC-32962-->

* 该应用程序现在将购物车价格规则仅应用于符合规则条件的捆绑产品子产品。 以前，应用程序将购物车价格规则应用于属于捆绑产品的所有子产品。

<!-- ENGCOM-7485-->

* 已在MFTF测试中将`StorefrontMiniCartSection`替换为`StorefrontMinicartSection`。   _由Andrii Kalinich在拉取请求[中提交的修复27955](https://github.com/magento/magento2/pull/27955)_。 [GitHub-27897](https://github.com/magento/magento2/issues/27897)

<!-- ENGCOM-6389-->

* 装运地址表单上对国家选择器组件的硬编码引用已删除。  _Mateusz Krzeszowiak在拉取请求[中提交的修复25541](https://github.com/magento/magento2/pull/25541)_。 [GitHub-22416](https://github.com/magento/magento2/issues/22416)

<!-- ENGCOM-6522-->

* 在Internet Explorer中查看店面时，当光标悬停在购物车中的删除图标上时，应用程序不再为购物车中的删除图标加下划线。  _在拉取请求[26173](https://github.com/magento/magento2/pull/26173)_&#x200B;中由divyajyothi5321提交的修复。 [GitHub-26164](https://github.com/magento/magento2/issues/26164)

<!-- ENGCOM-6615-->

* 为帐单地址和送货地址同时选择了单个地址时，更改帐单地址不再更改客户的送货地址。 _由Yurii Tvardyi在拉取请求[中提交的修复26279](https://github.com/magento/magento2/pull/26279)_。 [GitHub-26276](https://github.com/magento/magento2/issues/26276)

<!-- ENGCOM-6251-->

* 迷你购物车的促销区域现在按预期呈现。 _Matti Vapa在拉取请求[中提交的修复25375](https://github.com/magento/magento2/pull/25375)_。 [GitHub-25373](https://github.com/magento/magento2/issues/25373)

### 购物车价格规则

<!-- MC-23986-->

* 现在，在结帐工作流中会应用基于付款方法的购物车价格规则。 [GitHub-24206](https://github.com/magento/magento2/issues/24206)

<!-- ENGCOM-6550-->

* 更正了Datepicker页面元素在&#x200B;**管理员** > **营销** > **促销活动** > **目录价格规则**&#x200B;上的行为。 _Hitesh在拉取请求[中提交的修复26290](https://github.com/magento/magento2/pull/26290)_。 [GitHub-26289](https://github.com/magento/magento2/issues/26289)

<!-- ENGCOM-7485-->

* 已在MFTF测试中将`StorefrontMiniCartSection`替换为`StorefrontMinicartSection`。   _由Andrii Kalinich在拉取请求[中提交的修复27955](https://github.com/magento/magento2/pull/27955)_。 [GitHub-27897](https://github.com/magento/magento2/issues/27897)

<!-- ENGCOM-5822-->

* 已禁用创建新购物车价格规则工作流中未使用的优惠券网格。 _Eden Duong在拉取请求[中提交的修复24471](https://github.com/magento/magento2/pull/24471)_。 [GitHub-24468](https://github.com/magento/magento2/issues/24468)

<!-- ENGCOM-6615-->

* 为帐单地址和送货地址同时选择了单个地址时，更改帐单地址不再更改客户的送货地址。 _由Yurii Tvardyi在拉取请求[中提交的修复26279](https://github.com/magento/magento2/pull/26279)_。 [GitHub-26276](https://github.com/magento/magento2/issues/26276)

### 目录

<!-- MC-25235-->

* 当您更改计划更新中包含的分层产品的名称时，应用程序不再引发错误。 以前，当您尝试使用新名称保存产品时，应用程序显示以下错误： `SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '3-0-0-2.0000-0' for key 'UNQ_EBC6A54F44DFA66FA9024CAD97FED6C7', query was: INSERT INTO catalog_product_entity_tier_price (all_groups, customer_group_id, qty, value, website_id, percentage_value, row_id) VALUES (?, ?, ?, ?, ?, ?, ?)`

<!-- MC-29023-->

* 现在，可以按预期从管理员保存自定义属性值。

<!-- MC-29775-->

* 现在，当&#x200B;**商店** > **配置** > **目录** > **最近查看/比较的产品** > **显示当前**&#x200B;设置为&#x200B;**商店视图**&#x200B;时，“最近查看产品”功能会显示仅与多商店部署中的当前商店视图关联的产品。 以前，应用程序显示所有网站中最近查看过的产品，无论该产品被分配到哪个网站。

<!-- MC-29896-->

* 现在，该应用程序在迷你购物车中显示产品图像时不会失真。 以前，应用程序拉伸迷你购物车中的图像以填充图像容器的整个宽度和高度。

<!-- MC-29866-->

* `getBasePrice`函数现在会按预期返回浮点值，而不是字符串。

<!-- MC-30229-->

* 产品比较功能现在按预期工作。 它现在只显示当前用户比较列表中的产品。

<!-- MC-30234-->

* 您现在可以为主题指定默认水印。 以前，在分配水印后，应用程序会引发致命错误。

<!-- MC-30540-->

* 现在，您可以从管理员成功编辑具有多个变体（约5,000个）的可配置产品。 以前，当您尝试编辑具有多个子产品的可配置产品时，应用程序会显示以下错误： `Warning: DOMDocumentFragment::appendXML(): Entity: line 1: parser error : CData section too big found in /vendor/magento/framework/View/TemplateEngine/Xhtml/Template.php on line 60`

<!-- MC-30734-->

* 对&#x200B;**管理员** > **目录** > **产品**&#x200B;上的属性集排序现在按预期字母顺序进行。

<!-- MC-30794-->

* 现在，“最近查看的产品”功能在多存储部署中可按预期运行。

<!-- MC-31838-->

* 默认情况下，多站点部署中受限制的管理员现在已启用新产品页面的&#x200B;**网站中的产品**&#x200B;复选框。 以前，未预先选中非默认网站的复选框，如果管理员未选中该复选框，则应用程序会显示错误消息。

<!-- MC-32772-->

* `addToCart`事件现在按预期在Data Layer中跟踪。 以前，更改产品的可配置选项，然后单击&#x200B;**添加到购物车**&#x200B;后，新的`addToCart`事件未添加到数据层。

<!-- MC-29449-->

* 现在，在应用目录价格规则时，迷你购物车和管理购物车（**管理员** > **客户** > **管理购物车**）会显示正确的产品价格。 以前，店面购物车显示正确的产品价格，但迷你购物车和管理员购物车显示原始产品价格。

<!-- MC-30777-->

* 现在，可在管理员产品网格网站列上按预期筛选。 以前，筛选器结果不显示正确的产品数量，而是始终将产品总数显示为1。

<!-- MC-31432-->

* 价格条件使用`catalog_product_entity_decimal`按价格筛选。 但是，此表不包含可配置、捆绑动态和分组产品的记录，因为这些产品没有固定价格。 用于按价格过滤的正确表是`catalog_product_index_price`。

<!-- ENGCOM-7104-->

* 管理目录和产品列表现在在MSRP、成本和特殊价格列中显示货币符号。 _Sergiy Vasiutynskyi在拉取请求[中提交的修复27261](https://github.com/magento/magento2/pull/27261)_。 [GitHub-21910](https://github.com/magento/magento2/issues/21910)，[GitHub-20906](https://github.com/magento/magento2/issues/20906)，[GitHub-20472](https://github.com/magento/magento2/issues/20472)

<!-- ENGCOM-6375-->

* 现在，当您单击关闭图标时，“为客户组添加价格”弹出窗口（**管理员** > **目录** > **产品** > **新产品** > **高级定价**）将按预期关闭。 _由Ashna-Jahan在拉取请求[中提交的修复25759](https://github.com/magento/magento2/pull/25759)_。 [GitHub-25433](https://github.com/magento/magento2/issues/25433)

<!-- ENGCOM-6300-->

* 为新产品的描述和标题提供的示例描述不再包含双引号。  _Nathan Morgan在拉取请求[中提交的修复25655](https://github.com/magento/magento2/pull/25655)_。 [GitHub-25654](https://github.com/magento/magento2/issues/25654)

<!-- ENGCOM-6424-->

* 当您尝试在“类别”页面上使用无效价格筛选产品时，应用程序不再引发错误。 以前，应用程序会在系统日志中记录此错误。 _由Ihor Sviziev在拉取请求[中提交的修复25912](https://github.com/magento/magento2/pull/25912)_。 [GitHub-25911](https://github.com/magento/magento2/issues/25911)

<!-- ENGCOM-6455-->

* 您现在可以导航浏览多页面类别搜索结果。 以前，当您尝试使用“返回”按钮返回到搜索结果的第一页时，应用程序会创建重复的搜索结果页。 _Douglas Radburn在拉取请求[中提交的修复25337](https://github.com/magento/magento2/pull/25337)_。 [GitHub-14971](https://github.com/magento/magento2/issues/14971)

<!-- ENGCOM-6194-->

* 已将`Eav\Attribute.php`类中`getSourceModel`方法的返回类型更正为`string|null`。 _Mychailo在拉取请求[中提交的修复25333](https://github.com/magento/magento2/pull/25333)_。 [GitHub-25278](https://github.com/magento/magento2/issues/25278)

<!-- ENGCOM-6625-->

* 保存新的（重复的）产品不再导致产品映像重复数百次。 _Jeroen在拉取请求[中提交的修复25875](https://github.com/magento/magento2/pull/25875)_。 [GitHub-9466](https://github.com/magento/magento2/issues/9466)

<!-- ENGCOM-6818-->

* 从管理员创建订单期间，当您删除具有`file`类型自定义选项的产品时，应用程序不再引发JavaScript错误。  _由adrian-martinez-interactiv4在拉取请求[24843](https://github.com/magento/magento2/pull/24843)_&#x200B;中提交的修复。 [GitHub-24842](https://github.com/magento/magento2/issues/24842)

<!-- ENGCOM-6959-->

* 通过在版面中使用`product_page_image_large`创建不含图像的产品，会导致占位符图像按预期显示。 以前，应用程序引发此错误： `Fatal error: PHP Fatal error: Uncaught TypeError: Argument 1 passed to Magento\Catalog\Block\Product\ImageFactory::getRatio() must be of the type integer, null given`。 Lukasz Bajsarowicz在拉取请求[中提交的&#x200B;_修复26974](https://github.com/magento/magento2/pull/26974)_。 [GitHub-26973](https://github.com/magento/magento2/issues/26973)

<!-- ENGCOM-6983-->

* 当产品具有现有链接时，可以使用`POST /V1/:sku/links`端点通过空的产品数组设置产品链接。 以前，应用程序会引发错误。 _由Sathish Subramanian在拉取请求[中提交的修复26979](https://github.com/magento/magento2/pull/26979)_。 [GitHub-26800](https://github.com/magento/magento2/issues/26800)

<!-- ENGCOM-7151-->

* 现在，您可以使用产品网格中的操作下拉菜单，指定当您从管理员更新多个产品的属性时，某个产品是否具有权重。  _Bartomiej Szubert在拉取请求[中提交的修复26075](https://github.com/magento/magento2/pull/26075)_。 [GitHub-6310](https://github.com/magento/magento2/issues/6310)

<!-- ENGCOM-7453-->

* 已将验证逻辑添加到网格上每页的&#x200B;**产品允许值**&#x200B;和存储配置页的网格默认值&#x200B;**字段上的每页**&#x200B;产品。 以前，存储管理员可以在这些字段中输入不可用的值。  Lukasz Bajsarowicz在拉取请求[中提交的&#x200B;_修复27093](https://github.com/magento/magento2/pull/27093)_。 [GitHub-27089](https://github.com/magento/magento2/issues/27089)_

### 目录构件

<!-- MC-29167-->

* `CatalogWidget`产品列表现在可按预期与锚点类别一起使用，锚点类别中的产品现在已匹配并显示。 以前，当您选择的父类别作为锚点但不包含分配的产品时，产品在小组件中不可见。

<!-- MC-30260-->

* 应用程序现在会按预期显示选定父类别的所有子级。 以前，如果您选择的父类别是锚点，但不包含分配的产品，则应用程序不会显示所有嵌套产品。

<!-- MC-31171-->

* 当&#x200B;**存储** > **配置** > **目录** > **目录** > **最近查看/比较** > **将构件产品与后端存储同步**&#x200B;设置为&#x200B;**是**&#x200B;时，最近查看的产品构件现在可以正常工作。

### Cleanup

<!-- ENGCOM-6573-->

* 从模块XML中删除了一个额外的结束标记。 _由Tejash Kumbhare在拉取请求[中提交的修复26339](https://github.com/magento/magento2/pull/26339)_。 [GitHub-26338](https://github.com/magento/magento2/issues/26338)

<!-- ENGCOM-6521-->

* 更正了结帐工作流的“审核和付款”页面部分上的&#x200B;**我的账单地址和送货地址相同**&#x200B;复选框的对齐错误。  _在拉取请求[26169](https://github.com/magento/magento2/pull/26169)_&#x200B;中由divyajyothi5321提交的修复。 [GitHub-26168](https://github.com/magento/magento2/issues/26168)

<!-- ENGCOM-6581-->

* 删除了签出工作流的“送货地址”部分上的字段标签和星号之间不必要的空格。  由Daniel Ruf在拉取请求[中提交的&#x200B;_修复26285](https://github.com/magento/magento2/pull/26285)_。 [GitHub-26275](https://github.com/magento/magento2/issues/26275)

<!-- ENGCOM-6480-->

* 更正了签出工作流的“送货方法”部分上单选按钮的对齐错误。  _Hitesh在拉取请求[中提交的修复25966](https://github.com/magento/magento2/pull/25966)_。 [GitHub-25962](https://github.com/magento/magento2/issues/25962)

<!-- ENGCOM-6579-->

* 更正了移动设备视图中菜单间距不一致的问题。 _Hitesh在拉取请求[中提交的修复26238](https://github.com/magento/magento2/pull/26238)_。 [GitHub-26235](https://github.com/magento/magento2/issues/26235)

<!-- ENGCOM-7225-->

* 更正了移动视图中迷你购物车“编辑”和“删除”图标的对齐错误。  _由Vasilii Burlacu在拉取请求[中提交的修复27493](https://github.com/magento/magento2/pull/27493)_。 [GitHub-26652](https://github.com/magento/magento2/issues/26652)

<!-- ENGCOM-6967-->

* 更正了“添加新税率/邮政编码”页面上的税率zip/邮政编码范围和复选框的对齐错误（**管理员** > **商店** > **税费** > **税区和税率**）。 _由Sathish Subramanian在拉取请求[中提交的修复26932](https://github.com/magento/magento2/pull/26932)_。 [GitHub-26917](https://github.com/magento/magento2/issues/26917)

<!-- ENGCOM-7237-->

* 从设置向导到管理员的链接现在可以按预期使用。 _Oleh Usik在拉取请求[中提交的修复26100](https://github.com/magento/magento2/pull/26100)_。 [GitHub-24990](https://github.com/magento/magento2/issues/24990)

<!-- ENGCOM-6531-->

* 已在Admin的“缓存管理”网格的“状态”列上禁用排序。 _由Sathish Subramanian在拉取请求[中提交的修复26215](https://github.com/magento/magento2/pull/26215)_。 [GitHub-26208](https://github.com/magento/magento2/issues/26208)

<!-- ENGCOM-7015-->

* 已更正&#x200B;**管理员** > **商店** > **属性** > **评级** > **添加新评级**&#x200B;对话框上的页面元素对齐错误。 _由Sathish Subramanian在拉取请求[中提交的修复27014](https://github.com/magento/magento2/pull/27014)_。 [GitHub-26992](https://github.com/magento/magento2/issues/26992)

<!-- ENGCOM-6485-->

* 更正了“添加设计更改”页面上日历图标的对齐错误。 _Eduard Chitoraga在拉取请求[中提交的修复26063](https://github.com/magento/magento2/pull/26063)_。 [GitHub-20379](https://github.com/magento/magento2/issues/20379)

<!-- ENGCOM-6447-->

* 删除了主页悬停菜单上的子菜单显示中不必要的空间。 _Hitesh在拉取请求[中提交的修复25973](https://github.com/magento/magento2/pull/25973)_。 [GitHub-25972](https://github.com/magento/magento2/issues/25972)

<!-- ENGCOM-6534-->

* 更正了storefront产品详细信息页面上价格标签的对齐错误。 _在拉取请求[26237](https://github.com/magento/magento2/pull/26237)_&#x200B;中由divyajyothi5321提交的修复。 [GitHub-25936](https://github.com/magento/magento2/issues/25936)

<!-- ENGCOM-6536-->

* 更正了与移动视图中产品列表页面上的&#x200B;**添加到购物车**&#x200B;按钮相关的缺货文本的对齐错误。  _在拉取请求[26183](https://github.com/magento/magento2/pull/26183)_&#x200B;中由divyajyothi5321提交的修复。 [GitHub-26181](https://github.com/magento/magento2/issues/26181)

<!-- ENGCOM-6458-->

* 在&#x200B;**管理员** > **系统** > **扩展** > **集成**&#x200B;上显示的集成成功消息现在可正确显示。 _在拉取请求[26011](https://github.com/magento/magento2/pull/26011)_&#x200B;中由divyajyothi5321提交的修复。 [GitHub-25930](https://github.com/magento/magento2/issues/25930)

### CMS内容

<!-- MC-29619-->

* 您现在可以保存和复制所有CMS页面。 以前，当您尝试复制某些页面时，应用程序会引发此异常： `Unique constraint violation found`。

<!-- MC-30963-->

* 如果块被分配给不同的存储视图，则应用程序现在允许您创建具有相同名称的CMS块。

<!-- MC-30103-->

* 现在，可以按预期缓存从图库图像缩略图中选择。 以前，这些图像会动态调整大小。

<!-- MC-32275-->

* 在保存已分配给多个存储的CMS页面时，应用程序不再引发错误。 以前，在创建或编辑CMS页面时，应用程序保存了该页面，但抛出了此错误： `Item (Magento\VersionsCms\Model\Hierarchy\Node) with the same ID "PAGE_ID" already exists`。

<!-- MC-32452-->

* 新的CMS页面现在按预期添加到网站的商店页面层级。

<!-- ENGCOM-7033-->

* CMS页面自定义布局更新逻辑已得到改进。 应用程序现在应用来自`cms_page_view_selectable_home_somechanges.xml`的特定布局更改。 _Sergiy Vasiutynskyi在拉取请求[中提交的修复27131](https://github.com/magento/magento2/pull/27131)_。 [GitHub-26758](https://github.com/magento/magento2/issues/26758)

### 可配置的产品

<!-- MC-23546-->

* 现在可以通过API成功禁用可配置产品的子产品。

<!-- MC-30391-->

* 将&#x200B;**条件设置为“类别”（仅限父级）**&#x200B;的购物车价格规则现在可以按预期持续工作。

<!-- MC-30989-->

* 您现在可以从交叉销售选项卡中将可配置产品添加到购物车。 现在，当您选择产品并单击该选项卡中的&#x200B;**添加到购物车**&#x200B;时，您将转到产品详细信息页面，您可以在其中选择特定的产品选项。 以前，应用程序会将您重定向到404错误页面。

<!-- MC-32411-->

* 当用于链接这些产品的API调用失败时，应用程序不再将简单产品链接到可配置产品。

<!-- ENGCOM-6483-->

* 更正了可配置产品当前变体列表中SKU的呈现。 _KaushikChavda在拉取请求[中提交的修复26007](https://github.com/magento/magento2/pull/26007)_。 [GitHub-25591](https://github.com/magento/magento2/issues/25591)

<!-- ENGCOM-6460-->

* 您现在可以通过在没有关联标签的字段中输入&#x200B;**管理员** > **系统** > **配置**&#x200B;中的值来保存`system.xml`配置信息。 _由Andrii Chorniy在拉取请求[中提交的修复25985](https://github.com/magento/magento2/pull/25985)_。 [GitHub-23899](https://github.com/magento/magento2/issues/23899)

<!-- ENGCOM-6689-->

* `\Magento\ConfigurableProduct\Model\Product\Type\Configurable::isSalable`的性能已优化。  由Stanislav Ilnytskyi在拉取请求[中提交的&#x200B;_修复26071](https://github.com/magento/magento2/pull/26071)_。 [GitHub-26065](https://github.com/magento/magento2/issues/26065)

<!-- ENGCOM-6992-->

* 改进了负责更新可配置产品映像的逻辑。 以前，与可配置产品关联的简单产品仅显示与可配置产品关联的默认图像，而应用程序有时会显示产品的错误主图像。 _Sergiy Vasiutynskyi在拉取请求[中提交的修复26560](https://github.com/magento/magento2/pull/26560)_。 [GitHub-26473](https://github.com/magento/magento2/issues/26473)，[GitHub-26856](https://github.com/magento/magento2/issues/26856)，[GitHub-26858](https://github.com/magento/magento2/issues/26858)

<!-- ENGCOM-6520-->

* 现在，当您选择可配置产品的折扣选项时，应用程序会按预期显示产品的特殊价格。 以前，在选择折扣选项时，`class="normal-price"`未更改为`class="special-price"`。 _Ravi Chandra在拉取请求[中提交的修复26170](https://github.com/magento/magento2/pull/26170)_。 [GitHub-24972](https://github.com/magento/magento2/issues/24972)

### Cookies

<!-- MC-24182-->

* `setRedirectCookie`和`clearRedirectCookie`函数现在按预期工作。 以前，这些函数向浏览器发送Cookie，但缺少所有Cookie参数。 [GitHub-24547](https://github.com/magento/magento2/issues/24547)

<!-- ENGCOM-6891-->

* 元数据已添加到`setRedirectCookie`和`clearRedirectCookie`函数。  _Alexander Lukyanov在拉取请求[中提交的修复24612](https://github.com/magento/magento2/pull/24612)_。 [GitHub-24547](https://github.com/magento/magento2/issues/24547)

### 自定义客户属性

<!-- MC-32301-->

* 当您在店面中创建公司帐户时，在&#x200B;**Forms的**&#x200B;字段中包含要使用的空客户属性字段时，应用程序不再引发错误。 以前，应用程序引发此错误： `PHP Fatal error: Uncaught TypeError: Argument 2 passed to Magento\Eav\Model\Attribute\Data\Text::validateLength() must be of the type string, null given`。

### 客户

<!-- MC-29102-->

* 注册新帐户后，不再取消订阅作为来宾订阅快讯的客户。

<!-- MC-29841-->

* 应用程序现在对密码的每次更改都使用新的`PHPSession`。

<!-- MC-30650-->

* 您现在可以使用&#x200B;**客户** > **所有客户** > **添加新客户**&#x200B;上的“与网站关联”下拉菜单，成功创建客户并将其与特定网站关联。 以前，当您尝试在多站点部署中将新客户与非默认网站关联时，应用程序显示以下错误： `The store view is not in the associated website`。

<!-- MC-29946-->

* 现在，当交易最初由于信用卡无效而被拒绝，但后来成功完成时，应用产品会保存客户在结账期间在默认帐单和送货字段中输入的信息。 以前，虽然应用产品在客户输入有效付款信息时创建了订单，但是它没有更新结帐工作流中“我的帐户”部分的默认帐单或送货地址。

<!-- MC-32325-->

* 现在，当您在多站点部署中从管理员创建新客户时，应用程序会遵循客户组设置。

<!-- MC-31481-->

* 启用`cron`且客户网格索引器设置为&#x200B;**按计划更新**&#x200B;时，应用程序现在使用&#x200B;**客户和地址（单个文件）**&#x200B;选项成功导入客户数据。 执行`cron`后，导入的客户信息可在Admin中按预期使用。 以前，应用程序会导入客户数据，但不会使用新导入的客户记录更新客户网格。

<!-- MC-31117-->

* 当需要出生日期时，您现在可以从店面创建新客户。 以前，即使输入了有效的DOB值，您也无法在需要此字段时创建新客户。 [GitHub-26700](https://github.com/magento/magento2/issues/26700)

<!-- MC-31945-->

* 从管理员创建的客户现在会按预期遵循默认客户组设置。

<!-- MC-31425-->

* 在客户注销并重新登录后，`PHPSessionId`现在按预期更改。

<!-- MC-32152-->

* 现在，客户购物车的管理员视图会显示在多网站部署中，从多个网站添加到购物车的所有产品。 以前，当客户将产品从非默认网站添加到购物车时，即使&#x200B;**共享客户帐户**&#x200B;设置为&#x200B;**全局**，管理员也不会显示该产品。

<!-- ENGCOM-6667-->

* 现在，当管理员查看购物车时，应用程序仅显示客户放入购物车的产品。 以前，当从管理员那里查看时，客户的购物车会显示目录中的所有产品。 _Ravinder在拉取请求[中提交的修复26489](https://github.com/magento/magento2/pull/26489)_。 [GitHub-26437](https://github.com/magento/magento2/issues/26437)

<!-- ENGCOM-7036-->

* 从管理员编辑客户时，验证现在可在&#x200B;**出生日期**&#x200B;字段中按预期工作。 以前，应用程序未考虑用户区域设置，对于某些出生日期，会显示此错误： `The Date of Birth should not be greater than today`。   _Sergiy Vasiutynskyi在拉取请求[中提交的修复27149](https://github.com/magento/magento2/pull/27149)_。 [GitHub-27027](https://github.com/magento/magento2/issues/27027)

<!-- ENGCOM-6208-->

* 从管理员下订单时，不再需要email字段。  _Solwininfotech在拉取请求[中提交的修复24479](https://github.com/magento/magento2/pull/24479)_。 [GitHub-22251](https://github.com/magento/magento2/issues/22251)

<!-- ENGCOM-6423-->

* “我的帐户”仪表板现在在移动视图中正确显示电子邮件地址值。 _Eden Duong在拉取请求[中提交的修复25942](https://github.com/magento/magento2/pull/25942)_。 [GitHub-25935](https://github.com/magento/magento2/issues/25935)

<!-- ENGCOM-7034-->

* 多次单击客户注册表单上的&#x200B;**创建帐户**&#x200B;按钮不再多次提交注册请求。 _PrinceCB在拉取请求[中提交的修复26642](https://github.com/magento/magento2/pull/26642)_。 [GitHub-26590](https://github.com/magento/magento2/issues/26590)

<!-- MC-29102-->

* 注册新帐户后，不再取消订阅作为来宾订阅快讯的客户。

<!-- MC-29841-->

* 应用程序现在对密码的每次更改都使用新的`PHPSession`。

<!-- MC-30650-->

* 您现在可以使用&#x200B;**客户** > **所有客户** > **添加新客户**&#x200B;上的“与网站关联”下拉菜单，成功创建客户并将其与特定网站关联。 以前，当您尝试在多站点部署中将新客户与非默认网站关联时，应用程序显示以下错误： `The store view is not in the associated website`。

<!-- MC-29946-->

* 现在，当交易最初由于信用卡无效而被拒绝，但后来成功完成时，应用产品会保存客户在结账期间在默认帐单和送货字段中输入的信息。 以前，虽然应用产品在客户输入有效付款信息时创建了订单，但是它没有更新结帐工作流中“我的帐户”部分的默认帐单或送货地址。

<!-- MC-32325-->

* 现在，当您在多站点部署中从管理员创建新客户时，应用程序会遵循客户组设置。

<!-- MC-31481-->

* 启用`cron`且客户网格索引器设置为&#x200B;**按计划更新**&#x200B;时，应用程序现在使用&#x200B;**客户和地址（单个文件）**&#x200B;选项成功导入客户数据。 执行`cron`后，导入的客户信息可在Admin中按预期使用。 以前，应用程序会导入客户数据，但不会使用新导入的客户记录更新客户网格。

<!-- MC-31117-->

* 当需要出生日期时，您现在可以从店面创建新客户。 以前，即使输入了有效的DOB值，您也无法在需要此字段时创建新客户。 [GitHub-26700](https://github.com/magento/magento2/issues/26700)

<!-- MC-31945-->

* 从管理员创建的客户现在会按预期遵循默认客户组设置。

<!-- MC-31435-->

* 在客户注销并重新登录后，`PHPSessionId`现在按预期更改。

<!-- MC-32152-->

* 现在，客户购物车的管理员视图会显示在多网站部署中，从多个网站添加到购物车的所有产品。 以前，当客户将产品从非默认网站添加到购物车时，即使&#x200B;**共享客户帐户**&#x200B;设置为&#x200B;**全局**，管理员也不会显示该产品。

<!-- ENGCOM-7036-->

* 从管理员编辑客户时，验证现在可在&#x200B;**出生日期**&#x200B;字段中按预期工作。 以前，应用程序未考虑用户区域设置，对于某些出生日期，会显示此错误： `The Date of Birth should not be greater than today`。   _Sergiy Vasiutynskyi在拉取请求[中提交的修复27149](https://github.com/magento/magento2/pull/27149)_。 [GitHub-27027](https://github.com/magento/magento2/issues/27027)

<!-- ENGCOM-6208-->

* 从管理员下订单时，不再需要email字段。  _Solwininfotech在拉取请求[中提交的修复24479](https://github.com/magento/magento2/pull/24479)_。 [GitHub-22251](https://github.com/magento/magento2/issues/22251)

<!-- ENGCOM-6667-->

* 现在，当管理员查看购物车时，应用程序仅显示客户放入购物车的产品。 以前，当从管理员那里查看时，客户的购物车会显示目录中的所有产品。 _Ravinder在拉取请求[中提交的修复26489](https://github.com/magento/magento2/pull/26489)_。 [GitHub-26437](https://github.com/magento/magento2/issues/26437)

<!-- ENGCOM-6423-->

* “我的帐户”仪表板现在在移动视图中正确显示电子邮件地址值。 _Eden Duong在拉取请求[中提交的修复25942](https://github.com/magento/magento2/pull/25942)_。 [GitHub-25935](https://github.com/magento/magento2/issues/25935)

<!-- ENGCOM-7034-->

* 多次单击客户注册表单上的&#x200B;**创建帐户**&#x200B;按钮不再多次提交注册请求。 _PrinceCB在拉取请求[中提交的修复26642](https://github.com/magento/magento2/pull/26642)_。 [GitHub-26590](https://github.com/magento/magento2/issues/26590)

### 目录

<!-- MC-33168-->

* “默认状态”下拉菜单现在由数据填充，该数据基于您为&#x200B;**默认纳税目标计算**&#x200B;字段配置值时分配给所选网站的允许国家/地区。 以前，此下拉列表列出分配给默认网站的国家/地区。

### 可下载

<!-- MC-32306-->

* 您现在可以使用导入文件按SKU和说明批量更新可下载的产品。 以前，发生验证错误，并且导入失败。

### EAV

<!-- MC-29999-->

* 该应用程序现在遵循特定于存储的设置，这些设置确定在多站点部署中是否需要签出工作流的电话号码字段。 以前，在部署中，有一个存储要求在签出工作流中填写此字段，而另一个存储未填写，则在签出时未要求填写此字段的客户遇到此错误：`Please check the shipping address information. "telephone" is required. Enter and try again`。

<!-- ENGCOM-6489-->

* 按`attribute option_id`排列的EAV排序顺序现在按预期运行。 _Tan Sezer在拉取请求[中提交的修复24360](https://github.com/magento/magento2/pull/24360)_。 [GitHub-24357](https://github.com/magento/magento2/issues/24357)

<!-- ENGCOM-7082-->

* 现在，您可以在通过REST添加新属性并将其分配给管理员的属性集之后创建新产品。 以前，应用程序引发500错误。  _Sergiy Vasiutynskyi在拉取请求[中提交的修复27191](https://github.com/magento/magento2/pull/27191)_。 [GitHub-26827](https://github.com/magento/magento2/issues/26827)

### 电子邮件

<!-- MC-32842-->

* 向客户请求退货时发送的授权电子邮件现在会按预期包含RMA状态。 以前，此电子邮件显示空字符串，而不是预期的返回状态。

<!-- MC-32864-->

* 当客户在全局共享客户帐户的多站点部署中报告忘记密码时，不再从当前网站重定向客户。 以前，客户会被重定向到创建帐户的网站。

<!-- MC-31544-->

* 向客户发送的订单确认电子邮件现在按预期包含订购项目列表。 以前，当您通过加载和保存默认模板在“管理员”中创建电子邮件模板时，从该模板生成的电子邮件不包括排序项目列表。 [GitHub-26882](https://github.com/magento/magento2/issues/26882)

### 框架

* Zend框架上的依赖项已迁移到[Laminas项目](https://getlaminas.org/about/foundation)，以反映Zend框架到Linux Foundation的Laminas项目的转换。 Zend框架已被弃用。 _由Ihor Sviziev在拉取请求[中提交的修复26436](https://github.com/magento/magento2/pull/26436)_。 [GitHub-26335](https://github.com/magento/magento2/issues/26335)

<!-- MC-25257-->

* 对于使用荷兰语言环境的管理员帐户，特殊价格范围设置（起始/截止日期）现在可以正常工作。

<!-- MC-29388-->

* `php bin/magento cron:run`不再多次处理更改日志表中的项。 以前，当更改日志表中有100000个以上新版本时，可能会为同一`entity id`调用多次操作。

* `php bin/magento setup:cron:run`命令现已移除。 升级时，应删除crontabs中对此的引用。

* `update/cron.php`文件已在2.4.0中删除，如果该文件存在于您的安装中，则可以安全地将其删除。 此外，升级时，请删除crontabs中对此文件的引用。

<!-- MC-30544-->

* 现在，当您从管理员编辑产品页面更新产品时，“更新属性”操作会从`catalog_product_entity`正确更新产品`updated_at column`的时间戳。

<!-- MC-30834-->

* 运行`setup:upgrade`时，在`env.php`中设置`'persistent' => '1'`不再引发错误。

<!-- MC-32243-->

* **无效的表单键。 请刷新登录页面上的页面**&#x200B;文本字符串，现在已按预期翻译。

<!-- MC-33278-->

* 我们改进了`Magento\Framework\App\DeploymentConfig\Reader::load`函数的性能。 以前，在向Magento发出请求时，会重复调用此函数，这会导致每次调用该方法时加载`config.php`和`env.php config`个文件。

<!-- MC-31728-->

* 当管理员从管理员创建订单时单击产品时，应用程序不再下载`blank.html`页面。

<!-- MC-31729-->

* 在引用说明中为页面上不存在（未声明）的组件添加到默认布局中的不可缓存块不再影响页面缓存。 将不可缓存块添加到默认布局处理程序会使得所有页面都不可缓存。 这是布局生成过程的结果：在布局生成过程中，应用程序收集特定页面的所有可用布局句柄，并将来自这些句柄的说明合并到页面的最终布局结构中。 默认布局句柄用作每个页面的基本句柄。 因此，为默认处理程序声明的布局更新会出现在每个页面上。 [GitHub-9041](https://github.com/magento/magento2/issues/9041)

<!-- MC-31920-->

* MySQL锁定管理器现在是主锁定管理器。 因此，最低要求的MySQL版本为5.7.9。

<!-- ENGCOM-6431-->

* `queue_consumer.xml`现在允许`handler`类中的数字。 以前，当处理程序路径中包含数字时，XSD验证失败。 _Eden Duong在拉取请求[中提交的修复25952](https://github.com/magento/magento2/pull/25952)_。 [GitHub-25731](https://github.com/magento/magento2/issues/25731)

<!-- ENGCOM-6902-->

* 已更正类`\Magento\Framework\MessageQueue\Topology\Config`中类成员变量`$queueIterator`的`doc`块中引用不正确的`@var`。 _由Artem Voloznov在拉取请求[24976](https://github.com/magento/magento2/pull/24976)_&#x200B;中提交的修复。 [GitHub-24971](https://github.com/magento/magento2/issues/24971)

<!-- ENGCOM-5305 6684-->

* 现在，当文档不再`loading`时，会触发JavaScript页面加载侦听器，而不是等到文档标记为`complete`时触发，因为等待文档标记为`complete`可能会导致呈现JavaScript内容时出现严重延迟。 _John Hughes在拉取请求[23313](https://github.com/magento/magento2/pull/23313)和拉取请求[50](https://github.com/magento/partners-magento2ee/pull/50)_&#x200B;中提交的修复。 [GitHub-22909](https://github.com/magento/magento2/issues/22909)

<!-- ENGCOM-6305-->

* 现在，当您尝试将数量为0或负数的产品添加到愿望清单时，应用程序会显示以下信息性消息： `Please enter a valid number in this field`。 以前，应用程序显示此错误： `We can't update your Wish List right now`。 _Pawe Tylek在拉取请求[中提交的修复25641](https://github.com/magento/magento2/pull/25641)_。 [GitHub-25032](https://github.com/magento/magento2/issues/25032)

<!-- ENGCOM-7071-->

* 应用程序不再支持从`Magento\Framework\Api\AbstractExtensibleObject`类继承DTO类。 缺少PHP注释`@api`  已添加到`AbstractExtensibleModel`，缺少`@deprecated`  批注已添加到`AbstractExtensibleObject`。  _Alexander Taranovsky在拉取请求[中提交的修复22011](https://github.com/magento/magento2/pull/22011)_。 [GitHub-22010](https://github.com/magento/magento2/issues/22010)

<!-- ENGCOM-6552-->

* 在执行非英语区域设置的商店中更改与产品相关的日期（例如，`news_from_date`、`news_to_date`、`special_price_from_date`、`special_price_to_date`）后，您现在可以按预期保存产品。 以前，应用程序抛出的错误与以下内容类似： `Invalid input datetime format of value '22/5/2019`。

### 常规修复

<!-- MC-21347-->

* 客户模块不再依赖于审核模块。 以前，由于此依赖关系，无法禁用审阅模块。

<!-- MC-25250-->

* 现在，当页面的默认属性集包含带有选择标签的下拉列表属性时，产品编辑页面会成功加载。

<!-- MC-25260-->

* 现在，可从“管理员”的“订单”标签访问的图形订单图表可准确反映订单数量。

<!-- MC-29273-->

* 当这两个URL不同时，商店的管理员URL不再重定向到店面URL。

<!-- MC-29658-->

* 现在，当在多个网站中使用性能工具包配置文件时，可以正确生成子类别的URL重写。

<!-- MC-30224-->

* 您现在可以删除空的用户模型，而无需删除为其分配该模型的管理员角色。

<!-- MC-30636-->

* TinyMCE4编辑器现在支持所有HTML标签。

<!-- MC-31128-->

* 单击创建贷项通知单工作流中的&#x200B;**离线退款**&#x200B;按钮，现在会按预期生成贷项通知单。 以前，JavaScript错误会禁用此按钮，并且应用程序不会创建贷项通知单。

<!-- MC-31832-->

* 商家现在可以创建类型为`Decimal`的产品属性。 以前，由于较早的错误修复，应用程序不显示产品属性类型`Price`。 [GitHub-26949](https://github.com/magento/magento2/issues/26949)

<!-- MC-32175-->

* 从“类别”页面的“设计”选项卡设置了&#x200B;**Layout = Product - Full Width**&#x200B;时，当您尝试打开店面上的“类别”页面时，应用程序不再返回500错误。

<!-- MC-32697-->

* 更正了`AbstractSimpleObjectBuilder.php`中的错误。

<!-- MC-33427-->

* MAP（最低广告价格）现可按预期用于集团产品。

<!-- MC-29998-->

* 在多存储部署的CMS页面上更改语言时，应用程序现在会将您重定向到相应存储视图的主页。 以前，当您在某些CMS页面上更改语言时，应用程序会显示404页面。

<!-- MC-30162-->

* 已重构订单查询(`SalesOrderIndexGridAsyncInsertCron`)以减少返回的数据集大小和查询频率。

<!-- MC-32371-->

* 您现在可以成功创建CMS页面，并将其分配给CMS层次结构中的网站根类别。

<!-- MC-32783-->

* 启用类别权限后（例如，**未登录**&#x200B;客户组已被授予这些权限），来宾现在可以显示产品价格或将产品添加到购物车。

<!-- MC-32815-->

* 产品规则现在按预期适用于缺货产品。 以前，即使将规则配置为显示缺货产品，应用程序也不会在相关产品列表中显示缺货产品。

<!-- MC-33222-->

* 单击管理员订单的&#x200B;**跟踪发货**&#x200B;按钮后，跟踪信息会按预期显示在弹出窗口中。 以前，此链接会将管理员带到“登录”页面。

<!-- MC-31305-->

* 现在，应用程序会显示信息性错误消息，并在客户尝试完成包含多选客户属性的注册表单时出现错误时继续按预期显示注册表单。 以前，应用程序显示500错误。

<!-- MC-32224-->

* 应用产品现在会在部分退款订单之后显示&#x200B;**贷项通知单**&#x200B;按钮。 以前，在创建部分退款后，应用产品不会显示此按钮，并且您无法为订单的其余部分创建贷项通知单。

<!-- MC-31878-->

* 现在，通过REST批量订单更新可按预期修改订单状态。 以前，应用程序引发此错误： `report.ERROR: Property "AdditionalInformation" does not have accessor method "setAdditionalInformation" in class "Magento\Sales\Api\Data\OrderPaymentInterface".`

<!-- MC-30398-->

* 属性筛选器现在按预期显示在“类别”页面的“购物选项”块中。

<!-- ENGCOM-7175-->

* 在Internet Explorer中显示时，客户帐单地址和送货地址现在会按预期显示在“管理员客户编辑”页面的“地址”选项卡下。 _由Vasilii Burlacu在拉取请求[中提交的修复27383](https://github.com/magento/magento2/pull/27383)_。 [GitHub-27370](https://github.com/magento/magento2/issues/27370)

<!-- ENGCOM-6546-->

* 现在，当您删除书签视图时，所有书签视图都可编辑。 以前，在您删除具有多个书签视图的帐户的第一个视图后，所有书签视图都变为不可编辑。 _Bartomiej Szubert在拉取请求[中提交的修复26263](https://github.com/magento/magento2/pull/26263)_。 [GitHub-14913](https://github.com/magento/magento2/issues/14913)

<!-- ENGCOM-7042-->

* 分层导航不再中断样本模块的HTML5验证。 以前，在[W3C标记HTML服务](https://validator.w3.org/)中未定义的属性发生验证错误，但这些属性已更改为数据属性。 _Nirav Patel在拉取请求[中提交的修复26055](https://github.com/magento/magento2/pull/26055)_。 [GitHub-22363](https://github.com/magento/magento2/issues/22363)

<!-- ENGCOM-7065-->

* 未使用的`require.JS`别名(`critical-css-loader``) has been removed from app/code/Magento/Theme/view/frontend/requirejs-config.js`)。 _Tu Nguyen在拉取请求[中提交的修复26987](https://github.com/magento/magento2/pull/26987)_。 [GitHub-26963](https://github.com/magento/magento2/issues/26963)

<!-- ENGCOM-6242-->

* 该应用程序现在实现PHP7.x的[可触发接口](https://www.php.net/manual/en/class.throwable.php)，以便能够捕获可能泄露敏感信息（如密码）的所有错误。 _由miszyman在拉取请求[中提交的修复25250](https://github.com/magento/magento2/pull/25250)_。 [GitHub-23350](https://github.com/magento/magento2/issues/23350)

<!-- ENGCOM-6284-->

* 在创建新文件夹弹出窗口中输入新文件夹名称时，按ESC键现在会按预期关闭弹出窗口，而不创建文件夹。  _由Shankar Konar在拉取请求[中提交的修复25349](https://github.com/magento/magento2/pull/25349)_。 [GitHub-572](https://github.com/magento/magento2/issues/572)

<!-- ENGCOM-7464-->

* 更正了错误嵌套的HTML结构。 以前，此结构会导致相关产品、追加销售产品或交叉销售产品列表的布局中断。 _Pieter Hoste在拉取请求[中提交的修复27926](https://github.com/magento/magento2/pull/27926)_。 [GitHub-27920](https://github.com/magento/magento2/issues/27920)

<!-- ENGCOM-7144-->

* 删除了对`addToolbarBlock`的重复调用，该调用在`ORDER BY`中导致两个类似的条件。  _由Vasilii Burlacu在拉取请求[中提交的修复27263](https://github.com/magento/magento2/pull/27263)_。 [GitHub-26708](https://github.com/magento/magento2/issues/26708)

<!-- ENGCOM-6014-->

* 商家现在可以设置管理员用户帐户的到期日期。 _Laura Folco在拉取请求[中提交的修复22837](https://github.com/magento/magento2/pull/22837)_。 [GitHub-22833](https://github.com/magento/magento2/issues/22833)

<!-- ENGCOM-7071-->

* 我们已将`@api` PHP注释添加到`AbstractExtensibleModel`，将`@deprecated` PHP注释添加到`AbstractExtensibleObject`，并将`@see`添加到`AbstractExtensibleModel`。  _Alexander Taranovsky在拉取请求[中提交的修复22011](https://github.com/magento/magento2/pull/22011)_。 [GitHub-22010](https://github.com/magento/magento2/issues/22010)

### GraphQL

<!-- ENGCOM-7074-->

* 现在，当购物车处于非活动状态并创建新购物车ID时，应用程序会返回GraphQL消息`The cart isn't active`，而不是`Current user does not have an active cart`。 _Vadim Malesh在拉取请求[中提交的修复27187](https://github.com/magento/magento2/pull/27187)_。 [GitHub-26117](https://github.com/magento/magento2/issues/26117)

<!-- ENGCOM-7105-->

* 删除了在使用GraphQL将产品添加到购物车时，之前添加的产品缺货时导致错误的代码。 _AleksLi在拉取请求[中提交的修复27015](https://github.com/magento/magento2/pull/27015)_。 [GitHub-26683](https://github.com/magento/magento2/issues/26683)

<!-- ENGCOM-6535-->

* 更正了GraphQL中的一个问题：在对产品查询中使用片段时，应用程序没有返回所有必需的信息。 _Riccardo Tempesta在拉取请求[中提交的修复26218](https://github.com/magento/magento2/pull/26218)_。 [GitHub-26217](https://github.com/magento/magento2/issues/26217)

* GraphQL突变`setShippingMethodsOnCart`不再检索`available_shipping_methods`属性中的错误数据。 _Vadim Malesh在拉取请求[中提交的修复27004](https://github.com/magento/magento2/pull/27004)_。 [GitHub-26742](https://github.com/magento/magento2/issues/26742)

### 分组的产品

<!-- ENGCOM-6115-->

* 现在，当属于同一组的另一个简单产品缺货时，您可以将属于该组产品的简单产品添加到购物车。  _由Gihovani Filipp Pereira m̩ Detrio在拉取请求[24955](https://github.com/magento/magento2/pull/24955)_&#x200B;中提交的修复。 [GitHub-22304](https://github.com/magento/magento2/issues/22304)

<!-- ENGCOM-6768-->

* 现在，该应用程序会按预期向客户发送有关退款组产品的电子邮件。  _Alexander Taranovsky在拉取请求[中提交的修复26246](https://github.com/magento/magento2/pull/26246)_。 [GitHub-26245](https://github.com/magento/magento2/issues/26245)

<!-- MC-30313-->

* 现在，当分组产品的某个其他子产品缺货时，您可以将分组产品的子产品添加到购物车。 以前，当一个子产品缺货时，您无法将任何其他子产品添加到购物车。

### 图像

<!-- MC-29523-->

* 现在，当您保存类别图像时，图像会按预期保存在`pub/media/catalog/category`中。 以前，应用程序将这些图像保存在`pub/media/catalog/tmp/category`中。

<!-- MC-30320-->

* 水印图像不再遮蔽它们所覆盖的产品图像。 以前，当水印图像大于其所应用到的产品图像时，该产品图像不可见。

<!-- MC-32273-->

* 您现在可以从管理员将图像成功保存到类别。 以前，保存图像后，URL的一部分缺失，无法重新打开图像。

<!-- MC-31727-->

* 应用程序现在在上载后按预期显示`.png`图像。

<!-- ENGCOM-7063-->

* 使用REST添加或更新图像时，现在会按预期创建图像缩略图。 _Sergiy Vasiutynskyi在拉取请求[中提交的修复27170](https://github.com/magento/magento2/pull/27170)_。 [GitHub-26825](https://github.com/magento/magento2/issues/26825)

<!-- ENGCOM-6962-->

* `Block\Product\ImageFactory`生成的图像的自定义属性现在可以正确呈现。 以前，由于HTML输出的转义不正确，您无法将自己的自定义属性添加到属性标记中。 _由alexander-aleman在拉取请求[中提交的修复26959](https://github.com/magento/magento2/pull/26959)_。 [GitHub-25219](https://github.com/magento/magento2/issues/25219)

<!-- ENGCOM-5980-->

* 从iPhone查看店面时，图像不再模糊。  _Dmitriy在拉取请求[中提交的修复24743](https://github.com/magento/magento2/pull/24743)_。 [GitHub-24735](https://github.com/magento/magento2/issues/24735)

<!-- ENGCOM-6999-->

* 店面上的图像现在响应了。 以前，图像高度会出现扭曲。  _由Sean van Zuidam在拉取请求[中提交的修复27041](https://github.com/magento/magento2/pull/27041)_。 [GitHub-27040](https://github.com/magento/magento2/issues/27040)

<!-- ENGCOM-7253-->

* 使用`Magento_blank`主题时，默认商店徽标现在会显示在店面上。 _由Vasilii Burlacu在拉取请求[中提交的修复27497](https://github.com/magento/magento2/pull/27497)_。 [GitHub-27496](https://github.com/magento/magento2/issues/27496)

### 导入/导出

<!-- MC-25206-->

* 当导入的数据包含`swatch_image`存储视图键的值为`no_selection`时，应用程序在导入期间不再引发错误。 以前，应用程序引发此错误： `Imported resource (image) could not be downloaded from external resource due to timeout or access permissions in row(s): 1`。 [GitHub-25026](https://github.com/magento/magento2/issues/25026)

<!-- MC-29417-->

* 在具有多个商店视图的部署中导入产品时，当您使用`hide_from_product_page`设置时，应用程序现在会按预期更新图像。

<!-- MC-29677-->

* 当`row_id`不等于产品的`entity_id`时，现在可自定义的选项按预期导入。 以前，当`row_id`不等于产品的`entity_id`时，应用程序不会导入可自定义的选项，这会导致某些产品无法导入。

<!-- MC-29916-->

* 现在，与可配置产品关联的图像可在导入期间正确上传，并可按预期从产品编辑页面中查看。

<!-- MC-30304-->

* 导出的`.csv`文件现在反映了用于包含缺货或缺货产品的筛选器设置。 以前，应用程序会导出所有产品，无论您选择哪种库存设置。

<!-- MC-30323-->

* 您现在可以使用导入工作流的客户并解决单个文件选项成功导入或更新客户。 以前，当您选择此选项时，应用程序不会导入客户数据并显示以下错误： `Invalid data for insert`。

<!-- MC-30357-->

* 现在，导入并更新产品状态后，库存索引器会按预期触发。 以前，Stock Indexer不对更改的产品库存数据进行索引。

<!-- MC-30528-->

* 在指定`store_view_code`时，应用程序现在可以成功导入可配置产品的子产品的所有自定义选项。 无论您选择单独还是集体导入可配置产品，此功能均起作用。 以前，当导入文件包含多个项并且指定了`store_view_code`时，应用程序无法成功导入所有自定义选项。

<!-- MC-30672-->

* 现在，应用程序会在产品导入期间提供一条消息，用于标识导入的`.csv`文件中的哪些产品具有重复的密钥。 商家可以使用此信息解决冲突。 以前，应用程序显示此错误： `Notice: Undefined index: name in /var/www/html/ee233dev/app/code/Magento/CatalogImportExport/Model/Import/Product.php on line 2524`

<!-- MC-29960-->

* 现在，当您尝试从&#x200B;**系统** > **导出**&#x200B;列表中删除目录时，应用程序会显示信息更丰富的错误消息，并且不显示下载链接。 以前，当您尝试从此列表中删除目录时，应用程序继续显示无法下载的文件的下载链接，并显示一条信息不充分的错误消息。

<!-- MC-29959-->

* 导入期间使用的`.csv`文件现在包含可下载产品的正确链接，并且现在格式正确以支持导入和更新可下载产品。

<!-- MC-30189-->

* 现在，当您为“替换”设置导入行为，选择之前导出的`.csv`文件，然后单击“**检查数据**”时，应用程序将成功导出`.csv`文件。 以前，应用程序显示此错误： `Data validation failed. Please fix the following errors and upload the file again`和`Following Error(s) has been occurred during importing process`。

<!-- MC-30141-->

* 现在，导入并更新产品状态后，库存索引器会按预期触发。 以前，Stock Indexer不对更改的产品库存数据进行索引。

<!-- MC-31198-->

* 产品导入期间生成的`.csv`文件现在按预期包含可下载产品的组标题。 以前，在导入期间对`group_title`进行不必要的验证会阻止显示可下载产品的组标题。

<!-- MC-32153-->

* 启用`cron`并且使用&#x200B;**(客户和地址（单个文件）)**&#x200B;选项执行客户导入时，应用程序会按预期将数据填充到管理员客户网格。 在`customer_grid indexer`的手动重新索引完成后，客户网格会显示客户。 以前，应用程序不会使用新导入的客户地址更新客户网格。

<!-- MC-32154-->

* 应用程序现在在自动重新索引后按预期显示客户列表。 以前，尽管手动运行`bin/magento index:reindex`有效，但客户网格在自动重新索引后不显示客户信息。

<!-- MC-30148-->

* 在产品导入完成后，应用程序现在会按预期从`<Magento_home>/var`中删除临时文件。

<!-- MC-31879-->

* 当产品由`.csv`文件导入时，应用程序不再在管理员中创建重复的SKU。

<!-- ENGCOM-6141-->

* 当导入的可配置属性的值中包含等号(=)时，导入不再失败。 _由dhoang89在拉取请求[中提交的修复25194](https://github.com/magento/magento2/pull/25194)_。 [GitHub-25188](https://github.com/magento/magento2/issues/25188)

<!-- ENGCOM-6901-->

* 现在，所有导出的网格数据(Magento Open Source数据和自定义数据)都具有选项标签，而不是类型为`Select`或`Multiselect`的所有列的选项值。 以前，在导出此数据时，导出的电子表格包含具有ID的列，而不是网格中显示的值。 _由Maksym Novik在拉取请求[中提交的修复26523](https://github.com/magento/magento2/pull/26523)_。 [GitHub-25963](https://github.com/magento/magento2/issues/25963)

<!-- ENGCOM-7145-->

* 现在，通过导入`.csv`文件更新产品后，应用程序会按预期在店面上显示捆绑产品。 _Pavel Bystritsky在拉取请求[中提交的修复25664](https://github.com/magento/magento2/pull/25664)_。 [GitHub-25540](https://github.com/magento/magento2/issues/25540)

### 索引

<!-- MC-25236 30779-->

* 我们改进了`indexer_update_all_views`的性能。 现在，索引速度更快，不再处理不活动的规则，并且缓存中仅清除了已更改产品的条目。

<!-- MC-29917-->

* 店面上的产品价格现在准确地反映了计划目录价格规则更新的应用。 以前，在手动重新编制索引(`php bin/magento indexer:reindex catalogrule_rule`)之前，价格不会反映计划的购物车价格规则。

<!-- MC-30588-->

* 添加不可搜索的属性（即`is_searchable`、`is_filterable`、`is_visible_in_advanced_search`属性已禁用）后，您现在可以成功地重新索引产品数据库。

<!-- ENGCOM-6533-->

* 应用程序现在显示一条消息，标识索引器以及重新索引操作失败时索引操作所用的时间。 Lukasz Bajsarowicz在拉取请求[中提交的&#x200B;_修复26207](https://github.com/magento/magento2/pull/26207)_。 [GitHub-26206](https://github.com/magento/magento2/issues/26206)

<!-- ENGCOM-7179-->

* 现在，保存在启用了`onthefly`索引器和平面表的商店中的产品会遵循网站分配。 以前，如果您从产品中删除所有网站分配然后保存它，则所有平面表都将包含该产品，而不管指定的网站分配是什么。  _Abel Truong在拉取请求[中提交的修复27365](https://github.com/magento/magento2/pull/27365)_。 [GitHub-16315](https://github.com/magento/magento2/issues/16315)

### 基础架构

* 不再支持Internet Explorer 11.x浏览器。

<!-- MC-32223-->

* 与客户注册表单的&#x200B;**出生日期**&#x200B;字段关联的验证逻辑不再触发JavaScript错误。

<!-- ENGCOM-7000-->

* 添加了集成测试，以涵盖类别存储库`get()`方法的`$storeId`。 Lukasz Bajsarowicz在拉取请求[中提交的&#x200B;_修复27048](https://github.com/magento/magento2/pull/27048)_。 [GitHub-27044](https://github.com/magento/magento2/issues/27044)

<!-- ENGCOM-6378-->

* 启用Safari中的&#x200B;**阻止所有Cookie**&#x200B;设置不会再导致JavaScript错误，应用程序会按预期显示`cookies disabled`消息。 以前，应用程序在控制台中显示多个`SecurityError (DOM Exception 18): The operation is insecure`错误。 _Rl a̼ Verdugo Lorenzo在拉取请求[中提交的修复](https://github.com/magento/magento2/pull/25324)253243}。_[GitHub-13865](https://github.com/magento/magento2/issues/13865)

<!-- ENGCOM-6674-->

* 运行集成测试时，应用程序不再引发此错误： `Error: Call to a member function findFile() on array (/var/www/html/lib/internal/Magento/Framework/Code/Generator/DefinedClasses.php:59)`。 以前，`AutoloaderRegistry::getAutoloader`的问题会导致集成测试随机失败。 Lukasz Bajsarowicz在拉取请求[中提交的&#x200B;_修复26480](https://github.com/magento/magento2/pull/26480)_。 [GitHub-26479](https://github.com/magento/magento2/issues/26479)

<!-- ENGCOM-6958-->

* `/module-sales/view/frontend/templates/order/order_date.phtml`中的`date`标记已更正为`span`。 以前，当您在店面&#x200B;**我的帐户** > **我的订单**&#x200B;页面上单击&#x200B;**查看订单**&#x200B;时，应用程序会在`exception.log`文件中记录错误。 _由Andrii Chorniy在拉取请求[中提交的修复25895](https://github.com/magento/magento2/pull/25895)_。 [GitHub-13269](https://github.com/magento/magento2/issues/13269)，[GitHub-25738](https://github.com/magento/magento2/issues/25738)

<!-- ENGCOM-6316-->

* JavaScript mixin模块已重构，以改进高级捆绑模块mixin的加载和应用。 以前，应用程序不会为高级捆绑模块加载或应用mixin。  _Mateusz Krzeszowiak在拉取请求[中提交的修复25587](https://github.com/magento/magento2/pull/25587)_。 [GitHub-25586](https://github.com/magento/magento2/issues/25586)

<!-- ENGCOM-6344-->

* `grunt clean`命令现在会按预期清除生成的代码和元数据文件夹。 _Andrii Beziazychnyi在拉取请求[中提交的修复25765](https://github.com/magento/magento2/pull/25765)_。 [GitHub-25739](https://github.com/magento/magento2/issues/25739)

<!-- ENGCOM-6463-->

* 现已缓存`getVersion`结果(`ProductMetadata::getVersion`)，这改进了`ProductMetadata::getVersion`方法的性能。  _Lukasz Lewandowski在拉取请求[中提交的修复26001](https://github.com/magento/magento2/pull/26001)_。 [GitHub-24025](https://github.com/magento/magento2/issues/24025)

<!-- ENGCOM-7037-->

* `additional_information`缺少的setter已添加到`OrderPaymentInterface`，这解决了其架构声明与接受的属性之间的不一致问题。 _Antonino Bonumore在拉取请求[中提交的修复26748](https://github.com/magento/magento2/pull/26748)_。 [GitHub-26745](https://github.com/magento/magento2/issues/26745)，[GitHub-13222](https://github.com/magento/magento2/issues/13222)

### 分层导航

<!-- MC-31763-->

* 当启用了&#x200B;**在分层导航中使用：可筛选（包含结果）**&#x200B;店面属性时，应用程序现在在类别页面上呈现&#x200B;**是/否**&#x200B;属性。

<!-- ENGCOM-6807-->

* 冗余`\Magento\Sales\Model\Order\Email\Sender\ShipmentSender`已弃用，支持`\Magento\Sales\Model\Order\Shipment\Sender\EmailSender`。 _由Adarsh Manickam在拉取请求[中提交的修复26714](https://github.com/magento/magento2/pull/26714)_。 [GitHub-14885](https://github.com/magento/magento2/issues/14885)

### 媒体集

<!-- ENGCOM-6993-->

* 在命名媒体集中的新文件夹后单击&#x200B;**Enter**&#x200B;将保存您所做的所有更改。 以前，单击&#x200B;**Enter**&#x200B;而不使用鼠标选择&#x200B;**确定**&#x200B;会导致所有更改丢失。  _Sergiy Vasiutynskyi在拉取请求[中提交的修复27029](https://github.com/magento/magento2/pull/27029)_。 [GitHub-26847](https://github.com/magento/magento2/issues/26847)

<!-- ENGCOM-7490-->

* 现在，您可以在介质集下创建一个与主文件夹同名的子文件夹。 以前，无法以相同的名称保存子文件夹。 _Vadim Malesh在拉取请求[中提交的修复27976](https://github.com/magento/magento2/pull/27976)_。 [GitHub-1270](https://github.com/magento/adobe-stock-integration/issues/1270)

### 媒体存储

<!-- MC-32593-->

* 当`get.php`请求图像时，不再重新生成`var/resource_config.json`。 以前，每次调用`get.php`时都会重写此文件。

### 新闻稿

<!-- MC-31768-->

* 客户现在可以按预期订阅新闻稿。 以前，当客户尝试确认其订阅时，应用程序显示以下错误： `This is an invalid subscription confirmation code`。

<!-- ENGCOM-6525-->

* 店面页脚的新闻稿输入字段现在由任何支持的浏览器相同地呈现。  _在拉取请求[26182](https://github.com/magento/magento2/pull/26182)_&#x200B;中由divyajyothi5321提交的修复。 [GitHub-26176](https://github.com/magento/magento2/issues/26176)

<!-- ENGCOM-6691-->

* 有关新闻稿订阅的店面消息现在按HTML中的预期呈现。 _Oleh Usik在拉取请求[中提交的修复26455](https://github.com/magento/magento2/pull/26455)_。 [GitHub-25162](https://github.com/magento/magento2/issues/25162)

### 订购

<!-- MC-33456-->

* 当网站显示设置指定应排除税时，订单汇总小计不再显示排除的税。 以前，当多个网站配置了不同的显示设置时，无论应用商店级别的配置如何，都会将服务器变量中定义的设置用于应用商店。

### 支付方式

<!-- MC -->

* 第三方支付方法Authorize.Net、eWay、CyberSource、Braintree和Worldpay已经集成到核心代码中。 商家应该迁移到Commerce Marketplace上提供的官方扩展。

<!-- MC -->

* 不再支持重要欺诈防护的核心实施。 商家应迁移到Commerce Marketplace上可用的[Signifyd Fraud &amp; Chargeback Protection扩展](https://marketplace.magento.com/signifyd-module-connect.html)。

<!-- MC-32546-->

* 配置&#x200B;**Website Payments Pro托管解决方案**&#x200B;后，您现在可以成功完成订单并返回商户主页。 以前，当您单击&#x200B;**返回商家**&#x200B;时，应用程序引发此错误： `Invalid Form Key. Please refresh the page`。

<!-- ENGCOM-6606-->

* 切换账单地址不再导致JavaScript函数文本在店面结账工作流的付款部分呈现。 _Chris Pook在拉取请求[中提交的修复26378](https://github.com/magento/magento2/pull/26378)_。 [GitHub-26375](https://github.com/magento/magento2/issues/26375)

<!-- ENGCOM-7223-->

* 贷项通知单现在在贷项通知单概览的&#x200B;**调整退款**&#x200B;字段中显示正确的金额。  _Sergiy Vasiutynskyi在拉取请求[中提交的修复27343](https://github.com/magento/magento2/pull/27343)_。 [GitHub-13851](https://github.com/magento/magento2/issues/13851)

<!-- ENGCOM-6524-->

* 保存报价后，您现在可以从`quote_payment column additional_information`表中删除其他信息。 以前，保存报价后无法删除此信息，因为`\Magento\Payment\Model\Info`中的`unsAdditionalInformation`方法未正确初始化数据。  _由Marco Oliveira在拉取请求[中提交的修复26084](https://github.com/magento/magento2/pull/26084)_。 [GitHub-26083](https://github.com/magento/magento2/issues/26083)

<!-- ENGCOM-6609-->

* 现在，付款指示是从下订单的商店视图中派生出来的。 以前，付款指示是从默认商店视图中使用的，因为`BeforeOrderPaymentSaveObserver`方法从默认商店视图中提取了付款指示。 _Karyna Tsymbal在拉取请求[中提交的修复26399](https://github.com/magento/magento2/pull/26399)_。 [GitHub-26332](https://github.com/magento/magento2/issues/26332)

<!-- ENGCOM-6953-->

* 现在，应用产品会收集在具有多个商店的部署中下达订单的商店中显示的付款信息，以及发票和发运发票中的付款信息。 以前，应用程序从默认商店获取付款信息。  _Bartomiej Szubert在拉取请求[中提交的修复26765](https://github.com/magento/magento2/pull/26765)_。 [GitHub-17933](https://github.com/magento/magento2/issues/17933)

#### PayPal

<!-- MC-30498-->

* 现在，当客户在结帐工作流中输入无效的送货地址后每次单击&#x200B;**使用PayPal付款**&#x200B;时，应用程序都会显示信息性错误消息。 以前，应用程序仅在客户首次单击按钮时显示错误消息，而不会在后续单击时显示错误消息。

<!-- MC-30639-->

* 当使用PayPal的付款失败时，应用程序不再在结账工作流的“付款审核”部分将订单的状态更改为`Processing`。

<!-- MC-30864-->

* 您现在可以使用“工资流链接”付款方法成功完成订单。 以前，Payflow Link付款方法始终拒绝付款，因为订单状态保持在`Pending`付款状态，即使付款方法日志中的订单状态为`Approved`也是如此。

<!-- MC-32494-->

* 触发欺诈过滤器时，使用PayPal Payflow Pro下单的订单现在设置为`Suspected Fraud`状态。

<!-- MC-33110-->

* 现在，您可以将PayPal Express结帐与任何受支持的信用卡结合使用。 以前，当您在使用PayPal Express签出功能完成订单时单击信用卡按钮时，应用程序挂起，并且您无法输入任何信用卡信息。

<!-- MC-33117-->

* 触发欺诈筛选器时，在PayPal Payflow Pro中下单的订单现在设置为`Suspected Fraud`状态。 以前，在申请方进行付款审批之前，PayPal上的付款交易记录状态未经验证。

<!-- MC-33294-->

* 启用“网站限制”后，Payflow Pro现在可按预期工作。

<!-- MC-31196-->

* 现在，应用产品将成功处理通过PayPal Express结帐下达的订单，其中订单的发运地址指定了客户已在文本字段中手动输入而不是从“发运”页的下拉菜单中选择的国家/地区。 以前，应用程序在订单审核页面上显示此错误： `Error 500: NOTICE: PHP message: PHP Fatal error: Uncaught Error: Call to a member function getId() on null in httpdocs/vendor/magento/module-paypal/Model/Api/Nvp.php:1527`。 [GitHub-26698](https://github.com/magento/magento2/issues/26698)

<!-- MC-31573-->

* PayPal Pro支付方式现在可在Chrome 80浏览器中按预期工作。 此付款方法以前调用一个回调端点，该端点需要访问客户的会话，而新的默认Chrome SameSite Cookie功能不允许进行访问。 [GitHub-26840](https://github.com/magento/magento2/issues/26840)

<!-- MC-31292-->

* 当永久签出购物车已启用，且&#x200B;**注销时清除持久性**&#x200B;设置设置为&#x200B;**否**&#x200B;时，您现在可以成功使用PayPal Express支付订单。 以前，应用程序会将您重定向到“登录”页面。

<!-- ENGCOM-6383-->

* Paypal Express和Web Payments Pro的付款现在在处理开始后按预期移至`Processing`状态。 以前，即使付款信息处于`Processing`状态，Paypal Web Payments Pro付款仍处于`Pending`付款状态。 _Azambon在拉取请求[中提交的修复25876](https://github.com/magento/magento2/pull/25876)_。 [GitHub-25659](https://github.com/magento/magento2/issues/25659)

### 性能

<!-- MC-31499-->

* 客户数据部分失效逻辑已得到改进。 此版本引入了使所有客户部分数据失效的新方式，可避免在自定义`sections.xml`失效处于活动状态时本地存储出现已知问题。 (以前，当具有操作无效的自定义&#x200B;*etc/frontend/sections.xml*&#x200B;时，未正确填充私有内容（本地存储）。) 查看[私人内容](https://developer.adobe.com/commerce/php/development/cache/page/private-content/)。

<!-- MC-31449-->

* 为提高进口速度，对客户账户进口进行了重组。

<!-- MC-23383 ENGCOM-7006-->

* 商家现在可以使用[延迟加载](https://en.wikipedia.org/wiki/Lazy_loading)来加载图像。 _Timon de Groot在拉取请求[中提交的修复27033](https://github.com/magento/magento2/pull/27033)_。 [GitHub-27032](https://github.com/magento/magento2/issues/27032)

<!-- ENGCOM-6988-->

* 仪表板图表已迁移到`chart.js`库。  _由Bartomiej Szubert在拉取请求[中提交的修复26923](https://github.com/magento/magento2/pull/26923)。 [GitHub-186](https://github.com/magento/community-features/issues/186)_

<!-- ENGCOM-6232-->

* 通过重构属性选项数组的构建方式，提高了在包含许多产品属性(3,000 - 23000个选项)的大型目录上运行的操作的性能。 _Behnam Shayani在拉取请求[中提交的修复25452](https://github.com/magento/magento2/pull/25452)_。 [GitHub-20966](https://github.com/magento/magento2/issues/20966)

### 定价

<!-- ENGCOM-6647-->

* 该应用程序现在可以保存并显示分层产品的正确价格，即使您已经多次编辑了产品。 以前，应用程序不会保存对产品价格进行的最后一次编辑。 _Ravi Chandra在拉取请求[中提交的修复26162](https://github.com/magento/magento2/pull/26162)_。 [GitHub-25195](https://github.com/magento/magento2/issues/25195)

<!-- ENGCOM-6914-->

* 现在，固定保存百分比和折扣保存百分比均可正确应用于订单的最终价格。 以前，应用程序在产品详细信息页面上显示不正确的分层价格（固定和折扣）保存百分比。 _由Sathish Subramanian在拉取请求[中提交的修复26584](https://github.com/magento/magento2/pull/26584)_。 [GitHub-26583](https://github.com/magento/magento2/issues/26583)

<!-- MC-30255-->

* 向客户发送的有关可配置产品重新补充库存的库存警报电子邮件现在包含正确的产品价格。 以前，此电子邮件的产品价格为0。

<!-- MC-32873-->

* 现在，当用户的会话过期时，产品库存警报取消订阅生效。 以前，当您单击&#x200B;**单击此处停止此产品的警报**&#x200B;链接时，应用程序显示404错误。

<!-- MC-31979-->

* 现在，产品警报的取消订阅操作可按预期运行。 以前，当客户单击&#x200B;**单击此处停止此产品的警报**&#x200B;链接时，应用程序显示404错误。

### 产品视频

<!-- MC-23743-->

* 您现在可以使用REST更新YouTube视频(PUT`rest/V1/products/{SKU}`)。 以前，应用程序显示视频的缩略图，但在您单击&#x200B;**播放**&#x200B;按钮时视频播放器未加载。 [GitHub-23194](https://github.com/magento/magento2/issues/23194)

### 报告

<!-- ENGCOM-6635-->

* 产品列表现在按SKU订购可配置产品，SKU按变体对可配置产品进行分组。 以前，报表按`product_id`对产品进行分组。 Lukasz Bajsarowicz在拉取请求[中提交的&#x200B;_修复25858](https://github.com/magento/magento2/pull/25858)_。 [GitHub-25856](https://github.com/magento/magento2/issues/25856)

<!-- ENGCOM-6427-->

* **管理员** > **报表** > **刷新统计信息**&#x200B;表现在在&#x200B;**已更新**&#x200B;列中将&#x200B;**更新时间= Null**&#x200B;状态显示为&#x200B;**从不**，而不是&#x200B;**未定义**。 _Eden Duong在拉取请求[中提交的修复25932](https://github.com/magento/magento2/pull/25932)_。 [GitHub-25931](https://github.com/magento/magento2/issues/25931)

<!-- ENGCOM-6925-->

* 低库存报表不再包含已禁用的产品。 _Mohamed-Asar在拉取请求[中提交的修复26862](https://github.com/magento/magento2/pull/26862)_。 [GitHub-26838](https://github.com/magento/magento2/issues/26838)

<!-- ENGCOM-7110-->

* 应用程序现在在&#x200B;**管理员** > **商店** > **配置** > **常规** > **报表**&#x200B;中显示了&#x200B;**年初至今开始**&#x200B;字段的准确值。 在拉取请求[27088](https://github.com/magento/magento2/pull/27088)_中由Priya-V-Panchal提交的_&#x200B;修复。 [GitHub-27086](https://github.com/magento/magento2/issues/27086)

### 审核

<!-- MC-29578-->

* 应用程序现在会在用户单击一次按钮后禁用&#x200B;**提交审核**&#x200B;按钮。 以前，应用程序在第一次单击后未禁用此按钮，并且在用户多次单击&#x200B;**提交审核**&#x200B;按钮时创建了多个审核。

<!-- MC-31293-->

* **管理员** > **报表** > **审核** > **按产品**&#x200B;筛选列表现在可按预期显示结果。 以前，当您尝试过滤此列表时，应用程序不显示任何结果。

<!-- ENGCOM-6938-->

* 在&#x200B;**管理员** > **营销** > **用户内容** > **未决审阅**&#x200B;上，已按预期激活“未决审阅”菜单项。  _Ravinder在拉取请求[中提交的修复26230](https://github.com/magento/magento2/pull/26230)_。 [GitHub-26229](https://github.com/magento/magento2/issues/26229)

### 销售

<!-- MC-29426-->

* 已完成订单现在会同时显示在付款系统和Magento Open Source中。 以前，订单出现在支付系统中，但不出现在Magento Open Source中。 [GitHub-25862](https://github.com/magento/magento2/issues/25862)

<!-- MC-30000-->

* 该应用程序现在遵循客户的默认送货地址。 以前，应用程序不会根据设置接受默认帐单地址和默认送货地址，并且不会自动启用&#x200B;**与帐单地址相同**&#x200B;设置。

<!-- MC-30299-->

* 现在，应用产品可以正确计算包括折扣的订单退款。 以前，应用程序错误地计算了运费税和运费折扣，并且退回的总额与支付的总额不匹配。

<!-- MC-33165-->

* 现在，当新客户在多站点部署中创建订单时，应用程序会分配正确的组ID。 以前，应用程序应用默认客户组中的设置。

<!-- MC-31786-->

* 具有有限权限（包括查看贷项通知单、发票和发运的权限）的管理员现在可以按预期从“订单”页查看发票和发运。 以前，当受限管理员尝试查看订单时，应用程序显示以下错误： `Something went wrong with processing the default view and we have restored the filter to its original state`。

<!-- MC-24023-->

* 当客户将超过现有产品库存的一半但不超过总库存的产品数量添加到购物车时，应用程序不再显示错误。 以前，在这些情况下，应用程序显示以下错误： `The requested qty is not available`。 [Github-24365](https://github.com/magento/magento2/issues/24365)

<!-- ENGCOM-6910-->

* 现在，当库存数量为1时，您可以从管理员成功将产品添加到购物车。 以前，应用程序没有将产品添加到购物车并显示以下消息： `The requested qty is not available`。 _由Serhii Petrychenko在拉取请求[中提交的修复26650](https://github.com/magento/magento2/pull/26650)。_ [GitHub-25675](https://github.com/magento/magento2/issues/25675)

<!-- ENGCOM-7090-->

* 当商店管理员尝试对自定义选项名称超过最大字符数的产品重新排序时，应用程序现在会显示信息性错误消息。 以前，在这些条件下，应用程序显示“报告”页面，而不是消息。 _由Mudit Shukla在拉取请求[中提交的修复26348](https://github.com/magento/magento2/pull/26348)_。 [GitHub-26345](https://github.com/magento/magento2/issues/26345)

<!-- ENGCOM-6328-->

* 已重构销售订单地址信息编辑表单的布局，以符合管理员表单库惯例。 _Alexey Rakitin在拉取请求[中提交的修复25699](https://github.com/magento/magento2/pull/25699)_。 [GitHub-19805](https://github.com/magento/magento2/issues/19805)

<!-- ENGCOM-6007-->

* **目录** > **类别**&#x200B;页面的“产品”部分上的复选框现在可按预期工作。  由Denis Kopylov在拉取请求[中提交的&#x200B;_修复22990](https://github.com/magento/magento2/pull/22990)_。 [GitHub-22988](https://github.com/magento/magento2/issues/22988)

<!-- ENGCOM-6809-->

* `getCustomer`方法现在返回`phpdoc`块中定义的客户对象。 以前，此方法返回`NULL`，`phpdoc`块未突出显示此方法可以返回`NULL`。 _Fanis Strezos在拉取请求[中提交的修复26423](https://github.com/magento/magento2/pull/26423)_。 [GitHub-25268](https://github.com/magento/magento2/issues/25268)

<!-- ENGCOM-6492-->

* 当商家禁用&#x200B;**管理员** > **商店** > **配置** > **销售** > **重新订购** > **允许订购**&#x200B;时，重新订购功能现在会按预期禁用。  _Eden Duong在拉取请求[中提交的修复26051](https://github.com/magento/magento2/pull/26051)_。 [GitHub-25130](https://github.com/magento/magento2/issues/25130)

<!-- ENGCOM-6627-->

* 在Admin中设置订单的自定义价格时，`getPrice()`方法现在会返回浮点数或空值，而不是字符串。  _由Andrii Chorniy在拉取请求[中提交的修复26313](https://github.com/magento/magento2/pull/26313)_。 [GitHub-25968](https://github.com/magento/magento2/issues/25968)

<!-- ENGCOM-6786-->

* **管理员** > **商店** >设置> **订单状态**&#x200B;的&#x200B;**状态代码和标题**&#x200B;列现在会按预期显示状态，而不是状态。  _Oleh Usik在拉取请求[中提交的修复26569](https://github.com/magento/magento2/pull/26569)_。 [GitHub-17847](https://github.com/magento/magento2/issues/17847)

<!-- ENGCOM-6936-->

* 在GB语言环境中创建时，PDF发票现在会捕获正确的购买日期。 _Eden Duong在拉取请求[中提交的修复26701](https://github.com/magento/magento2/pull/26701)_。 [GitHub-26675](https://github.com/magento/magento2/issues/26675)

### 销售规则

<!-- MC-30155-->

* 在禁用购物车价格规则后，`quote_item.applied_rule_ids`现在会按预期更新。 [GitHub-24526](https://github.com/magento/magento2/issues/24526)

<!-- MC-32229-->

* 现在，当您尝试创建或编辑购物车价格规则时，应用程序会按预期显示类别树。 以前，在创建或编辑规则时，在条件部分中选择类别会导致JavaScript错误。

<!-- ENGCOM-6824-->

* 现在，在将可配置产品首次添加到购物车时，应用程序会使用购物车价格规则正确计算购物车级别的固定折扣。 _由Lachlan Turner在拉取请求[中提交的修复26623](https://github.com/magento/magento2/pull/26623)_。 [GitHub-26622](https://github.com/magento/magento2/issues/26622)

### Search {#search-heading}

* Elasticsearch7.6.x现在是Adobe Commerce和Magento Open Source的默认目录搜索引擎。 如果不安装Elasticsearch7.6.x，则无法安装或升级到版本2.4.0。已删除版本2.x代码的Elasticsearch。 Elasticsearch版本5.x和6.x已被弃用，不再受支持。 请参阅[搜索引擎先决条件](../../../installation/prerequisites/search-engine/overview.md)。

<!-- MC-23753-->

* 应用程序现在正确呈现storefront目录搜索字符串中的&#x200B;**&lt;**&#x200B;和&#x200B;**>**&#x200B;符号。

<!-- MC-25010-->

* 在实施Elasticsearch的部署中运行`cron:run`后，产品现在在类别中按预期显示。

<!-- MC-25254-->

* 该应用程序不再需要完全搜索重新索引，以便能够在店面上搜索新产品属性。

<!-- MC-29545-->

* 现在，当您按按字母顺序排列产品名称对包含捆绑产品的产品列表进行排序时，Elasticsearch会按预期工作。

<!-- MC-29951-->

* 在类别中筛选可配置产品时，筛选结果不再包含缺货选项。

<!-- MC-30131-->

* 现在，使用Elasticsearch从产品列表页面中选择所有产品，搜索结果中的所有产品都会按预期显示。 以前，应用程序不显示搜索结果。

<!-- MC-30201-->

* 现在，当您更改每页查看的搜索结果数时，Elasticsearch可正确显示类别页中的结果。 以前，当您更改搜索结果页面上应显示的搜索结果数量时，应用程序将显示一个空白页，此错误： `"0":"SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near'`

<!-- MC-32430-->

* 现在可对缺货的可配置产品正确执行价格排序。

<!-- MC-25176-->

* 当客户在多网站部署中使用店面快速搜索时，应用程序不再引发异常。

<!-- ENGCOM-6842-->

* 当商家通过单击&#x200B;**营销** > **SEO和搜索** > **搜索词**&#x200B;的页脚上的“搜索词”选项打开搜索词页面时，应用程序不再显示警告。  _由vishal-webkul在拉取请求[中提交的修复25246](https://github.com/magento/magento2/pull/25246)_。 [GitHub-25245](https://github.com/magento/magento2/issues/25245)

<!-- ENGCOM-7289-->

* 在移动视图中运行Safari时，当您单击搜索输入框时，应用程序不再调整视区的大小。  _由Pawe Tylek在拉取请求[中提交的修复27603](https://github.com/magento/magento2/pull/27603)。 [GitHub-27506](https://github.com/magento/magento2/issues/27506)_

<!-- ENGCOM-6364-->

* Elasticsearch版本现在由Admin （**存储** >设置> **配置** > **目录** > **目录** > **目录搜索**）中的X.x表示法而不是X.0+表示法来标识。 _由Andreas Mautz在拉取请求[中提交的修复25838](https://github.com/magento/magento2/pull/25838)_。 [GitHub-25674](https://github.com/magento/magento2/issues/25674)

### 配送

<!-- MC-32782-->

* 如果订购的产品之一是虚拟产品，您现在可以将订单发送到多个地址。 以前，应用程序成功下实物产品的订单，但虚拟产品订单为空。

<!-- MC-29276-->

* 现在，对于要发往多个地址的订单，应用产品会正确应用固定金额的整张购物车折扣。 以前，当客户使用多个地址的结帐功能结帐订单时，会多次应用此类折扣。 [GitHub-25834](https://github.com/magento/magento2/issues/25834)

<!-- MC-29444-->

* 现在，在创建购物车价格规则过程中可用于选择配送方法的下拉列表仅包含有效值。 以前，此下拉列表包含空值或额外值。

<!-- MC-30186-->

* 现在，当您从订单存档列表中的订单中从“操作”下拉列表中选择&#x200B;**打印装运标签**&#x200B;时，应用程序会按预期将装运标签打印为`.pdf`文件。 以前，应用程序显示404错误。

<!-- MC-31396-->

* 现在，当购物车包含来自免运费价格规则所包含类别的产品以及来自未包含在该规则中的类别的产品时，免运费价格规则仅影响相关产品。 以前，当购物车包含来自免运费类别以及价格规则中未包含的其他类别的产品时，则免运费不适用于任何产品。

<!-- ENGCOM-6436-->

* 应用程序不再显示空白页，而是在下拉/多选框中显示所有装运承运人。 以前，`vendor/magento/module-shipping/Model/Config/Source/Allmethods.php`中的`toOptionArray`函数发生错误。 _由Marc Rodriguez在拉取请求[中提交的修复25315](https://github.com/magento/magento2/pull/25315)_。 [GitHub-13136](https://github.com/magento/magento2/issues/13136)

* 当客户创建将发运至多个地址的订单时，应用产品不再多次应用固定金额折扣。  Mahesh Singh在拉取请求[中提交的&#x200B;_修复26419](https://github.com/magento/magento2/pull/26419)_。 [GitHub-25834](https://github.com/magento/magento2/issues/25834)

<!-- ENGCOM-6523-->

* 实施自定义`di.xml`的`Magento\Ups\Model\Carrier`插件现在可在开发人员模式下正常工作。 以前，应用程序引发此错误： `1 exception(s): Exception #0 (BadMethodCallException): Missing required argument $data of Magento\Ups\Model\Carrier`。 _Bartomiej Szubert在拉取请求[中提交的修复26130](https://github.com/magento/magento2/pull/26130)_。 [GitHub-25390](https://github.com/magento/magento2/issues/25390)

### Sitemap

<!-- MC-29362-->

* 现在，当您生成站点地图时，应用程序会按预期使用项目基本URL。

<!-- ENGCOM-6670-->

* 生成的站点地图现在包含主页的URL。 _Deepaksnair在拉取请求[中提交的修复26445](https://github.com/magento/magento2/pull/26445)_。 [GitHub-25761](https://github.com/magento/magento2/issues/25761)

### 存储

<!-- MC-25187-->

* 现在，当客户登录到一个商店，将产品添加到购物车，然后在多商店部署中切换到新商店时，客户会话会按预期保留。 以前，当客户导航到第二家商店时，应用程序会注销客户并清空购物车。

<!-- ENGCOM-4781-->

* 应用程序现在会按预期从`sale_sequence_meta`和`sales_sequence_profile`表中删除与已删除的存储区视图相关的记录。 _Bartomiej Szubert在拉取请求[中提交的修复22296](https://github.com/magento/magento2/pull/22296)_。 [GitHub-14958](https://github.com/magento/magento2/issues/14958)

<!-- ENGCOM-6869-->

* 现在，在具有不同基本URL的存储之间切换时，存储切换器会按预期工作。 以前，当客户使用商店切换器在各商店之间切换时，如果目标商店的基础URL与当前商店不同，则请求失败。 _Tobias Nilsson在拉取请求[中提交的修复26548](https://github.com/magento/magento2/pull/26548)_。 [GitHub-23755](https://github.com/magento/magento2/issues/23755)，[GitHub-26384](https://github.com/magento/magento2/issues/26384)

### 色板

<!-- MC-30294-->

* 商家现在可以使用&#x200B;**商店** > **属性** > **产品** > **新属性**&#x200B;上的&#x200B;**可视化色板**&#x200B;选项成功将色板属性添加到产品中。 以前，当您尝试打开新创建的样本属性时，会触发JavaScript错误。

<!-- ENGCOM-6750-->

* 现在，当客户为可配置产品选择新的样本选项时，最低广告价格会按预期发生变化。 _Sergiy Vasiutynskyi在拉取请求[中提交的修复26241](https://github.com/magento/magento2/pull/26241)_。 [GitHub-26240](https://github.com/magento/magento2/issues/26240)

<!-- ENGCOM-6685-->

* 当您选择新的样本选项时，应用程序不再复制可配置产品的最低广告价格。 _Sergiy Vasiutynskyi在拉取请求[中提交的修复26317](https://github.com/magento/magento2/pull/26317)_。 [GitHub-26314](https://github.com/magento/magento2/issues/26314)

<!-- ENGCOM-6966-->

* 更正了“New Product Attribute”（新产品属性）页面的“Manage Swatch”(管理样本（属性的值）)区域中的下拉菜单行为的问题。  _Oleh Usik在拉取请求[中提交的修复26090](https://github.com/magento/magento2/pull/26090)_。 [GitHub-25910](https://github.com/magento/magento2/issues/25910)

### TargetRule

<!-- MC-31546-->

* 现在，店面中为产品显示的相关产品块会显示符合“相关产品规则”中定义的条件的产品。 以前，该应用程序不显示任何相关产品。

### 税金

<!-- MC-29579-->

* 现在，当客户在结帐期间更改订单的目标国家/地区时，应用产品会按预期更新运费和价格。

<!-- MC-30546-->

* 现在，根据适用的购物车价格规则，按预期应用免运费。 以前，在计算订单是否符合免运费标准时，购物车价格规则不考虑税费。

### 测试

>[!NOTE]
>
>**MFTF现在使用Google Authenticator执行启用了2FA的测试。 如果没有启用Google Authenticator**&#x200B;的其他配置步骤，MFTF将无法与2.4.0一起使用。 请参阅[为双重身份验证(2FA)配置MFTF](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html#magento-functional-testing-framework)。

<!-- ENGCOM-6585-->

* 测试和操作组中的硬编码URL已被替换为页面引用。 _Lukasz Bajsarowicz在私有存储库合作伙伴 — magento2ee_&#x200B;的拉取请求117中提交的修复。 [GitHub-26331](https://github.com/magento/magento2/issues/26331)

<!-- ENGCOM-7273-->

* 测试现在包含记录与CMS页面相关的管理员操作的任务。 _Lukasz Bajsarowicz在私有存储库合作伙伴 — magento2ee_&#x200B;的拉取请求172中提交的修复。 [GitHub-171](https://github.com/magento/magento2/issues/171)

<!-- ENGCOM-7040 7051-->

* 无效的功能测试名称已修改为遵循最佳实践。 _Lukasz Bajsarowicz在拉取请求[27118](https://github.com/magento/magento2/pull/27118)中提交的修复，并在私有存储库合作伙伴 — magento2ee中提交拉取请求151。 [GitHub-27117](https://github.com/magento/magento2/issues/27117)_

<!-- ENGCOM-7026-->

* Magento Open Source`cron`现在用于在创建测试数据后重新编制索引，如果适用，`cache:flush config`将取代`cache:flush`。 Lukasz Bajsarowicz在拉取请求[中提交的&#x200B;_修复26990](https://github.com/magento/magento2/pull/26990)_。 [GitHub-26989](https://github.com/magento/magento2/issues/26989)

<!-- ENGCOM-7421-->

* 接受测试现在遵循`Magento/Indexer`和`Magento/Backup`模块的命名约定。  _由Shankar Konar在拉取请求[中提交的修复27515](https://github.com/magento/magento2/pull/27515)_。 [GitHub-27503](https://github.com/magento/magento2/issues/27503)

<!-- ENGCOM-6791 6825-->

* `AdminReorderWithCatalogPrice`测试已重构，在CI验证过程中不再失败。 _Lukasz Bajsarowicz在私有存储库合作伙伴 — magento2ee_&#x200B;的拉取请求135中提交的修复。 [GitHub-26607](https://github.com/magento/magento2/issues/26607)

<!-- ENGCOM-6780 6795-->

* `AdminAddingNewOptionsWithImagesAndPricesToConfigurableProduct`和`StorefrontApplyPromoCodeDuringCheckout`测试已重构，在CI验证过程中不再失败。 _Lukasz Bajsarowicz在拉取请求[26611](https://github.com/magento/magento2/pull/26611)和拉取请求[26614](https://github.com/magento/magento2/pull/26614)_&#x200B;中提交的修复。 [GitHub-26612](https://github.com/magento/magento2/issues/26612)，[GitHub-26610](https://github.com/magento/magento2/issues/26610)

<!-- ENGCOM-6621-->

* `DeleteProduct and DeleteCustomer Action Groups`测试已重构，在CI验证过程中不再失败。 Lukasz Bajsarowicz在拉取请求[中提交的&#x200B;_修复26407](https://github.com/magento/magento2/pull/26407)_。 [GitHub-26396](https://github.com/magento/magento2/issues/26396)

<!-- ENGCOM-6608-->

* `AdminMoveAnchoredCategoryTest.xml`测试已重构，在CI验证过程中不再失败。 Lukasz Bajsarowicz在拉取请求[中提交的&#x200B;_修复26395](https://github.com/magento/magento2/pull/26395)_。 [GitHub-26396](https://github.com/magento/magento2/issues/26396)

#### 集成测试

<!-- ENGCOM-7143-->

* 集成测试中的连续请求不再失败。 以前，测试失败，因为请求对象在调度程序之间共享。 `resetRequest`方法现在清空`request`的状态。 Lukasz Bajsarowicz在拉取请求[中提交的&#x200B;_修复27300](https://github.com/magento/magento2/pull/27300)_。 [GitHub-27299](https://github.com/magento/magento2/issues/27299)

<!-- ENGCOM-7262-->

* 已添加其他集成测试以涵盖`Magento_Customer`电子邮件功能。 Lukasz Bajsarowicz在拉取请求[中提交的&#x200B;_修复27606](https://github.com/magento/magento2/pull/27606)_。 [GitHub-27607](https://github.com/magento/magento2/issues/27607)

#### PHP单元测试

<!-- ENGCOM-7435 7306-->

* PHP单元测试不再引发此致命错误： `Fatal error: Class Mock_CartExtensionInterface_0ba80a0b contains 2 abstract methods and must therefore be declared abstract or implement the remaining methods (Magento\Quote\Api\Data\CartExtensionInterface::getAmazonOrderReferenceId, Magento\Quote\Api\Data\CartExtensionInterface::setAmazonOrderReferenceId) in /var/www/html/vendor/phpunit/phpunit-mock-objects/src/Generator.php(264) : eval()'d code on line 1`。 _Lukasz Bajsarowicz在私有存储库合作伙伴 — magento2ee和[27701](https://github.com/magento/magento2/pull/27701)_&#x200B;的拉取请求中提交的修复178。 [GitHub-27638](https://github.com/magento/magento2/issues/27638)

<!-- ENGCOM-7271-->

* `Offline_Payments`的测试现在与PHPUnit 8兼容。  Cristiano Pacheco在拉取请求[中提交的&#x200B;_修复27627](https://github.com/magento/magento2/pull/27627)_。 [GitHub-27500](https://github.com/magento/magento2/issues/27500)

<!-- ENGCOM-7243 7284 7291-->

* 已为PHPUnit 8更新`Framework`、`AdminAnalytics`、`AdminNotification`和`AMPQ`的单元测试。 _由Ihor Sviziev在拉取请求[27522](https://github.com/magento/magento2/pull/27522)、[27521](https://github.com/magento/magento2/pull/27521)、[27519](https://github.com/magento/magento2/pull/27519)、[27522](https://github.com/magento/magento2/pull/27522)_&#x200B;中提交的修复。 [GitHub-27500](https://github.com/magento/magento2/issues/27500)

<!-- ENGCOM-6542-->

* 您现在无需连接到Internet即可运行`\Magento\Downloadable\Test\Unit\Helper\DownloadTest`单元测试。  _由aleromano89在拉取请求[中提交的修复26264](https://github.com/magento/magento2/pull/26264)_。 [GitHub-23521](https://github.com/magento/magento2/issues/23521)

<!-- ENGCOM-6695-->

* 已添加`app/code/Magento/Fedex/Model/Source/Generic.php`的单元测试。 _由Sathish Subramanian在拉取请求[中提交的修复26549](https://github.com/magento/magento2/pull/26549)_。

<!-- ENGCOM-7251 7283 7472-->

* `<magentoCron>`已添加到多个测试中，这会触发部分重新索引。 此更改解决了在涵盖`Magento_Bundle`、`CatalogImportExport`、`CatalogInventory`、`CatalogRule`、`Backend`、`Braintree`和`Captcha`的功能测试中创建误报的问题。 _Lukasz Bajsarowicz在拉取请求[27322](https://github.com/magento/magento2/pull/27322)、[27323](https://github.com/magento/magento2/pull/27323)、[27321](https://github.com/magento/magento2/pull/27321)_&#x200B;中提交的修复。 [GitHub-27320](https://github.com/magento/magento2/issues/27320)

<!-- ENGCOM-6844-->

* 已将`<amOnPage>`的所有不正确使用替换为适用于测试中的管理员注销的适当`<actionGroup>`。 _Lukasz Bajsarowicz在私有存储库合作伙伴 — magento2ee_&#x200B;的拉取请求116中提交的修复。 [GitHub-26331](https://github.com/magento/magento2/issues/26331)

<!-- ENGCOM-6352-->

* 测试中的每个“操作”组已移至单独的文件以遵循MFTF最佳实践，并且已修订不一致的文件名。 以下模块的测试受到影响：

   * module-catalog-missions
   * module-share-catalog
   * module-catalog-event
   * module-banner
   * module-admin-gws
   * module-advanced-checkout
   * 模块送达
   * module-ui
   * 模块送达
   * module-checkout-address-search
   * module-sales
   * module-catalog
   * module-catalog-rule-staging
   * module-visual-merchandiser
   * 模块 — 客户

  _Lukasz Bajsarowicz在拉取请求中提交的修复[25800](https://github.com/magento/magento2/pull/25800)、[26323](https://github.com/magento/magento2/pull/26323)、[26321](https://github.com/magento/magento2/pull/26321)、[26320](https://github.com/magento/magento2/pull/26320)、[26319](https://github.com/magento/magento2/pull/26319)、[26322](https://github.com/magento/magento2/pull/26322)、[25828](https://github.com/magento/magento2/pull/25828)、[26329](https://github.com/magento/magento2/pull/26329)（和拉取请求104、105、106、107、108、109、111、120、12 1，在私有存储库合作伙伴 — magento2ee）_&#x200B;中。 [GitHub-22853](https://github.com/magento/magento2/issues/22853)

### 主题

<!-- MC-29804-->

* 我们已经解决了`JsFooterPlugin.php`中影响动态块显示的错误。 以前，当您直接访问`/banner/ajax/load/url`时，应用程序会显示此错误： `Uncaught TypeError: strpos() expects parameter 1 to be string, null given in`。

<!-- ENGCOM-6708-->

* `i18n`方法提供了将字符串添加到下划线模板的功能。  _Sergiy Vasiutynskyi在拉取请求[中提交的修复26435](https://github.com/magento/magento2/pull/26435)_。 [GitHub-18012](https://github.com/magento/magento2/issues/18012)

<!-- ENGCOM-6666-->

* `section-config`模块已重构。 此重构减少了由第三方模块发出POST请求或直接在`data-mage-init`初始化模块之前请求客户数据所导致的错误。 _Mateusz Krzeszowiak在拉取请求[中提交的修复25764](https://github.com/magento/magento2/pull/25764)_。 [GitHub-17125](https://github.com/magento/magento2/issues/17125)

<!-- ENGCOM-6924-->

* 已修复`LoadCssAsync`HTML格式错误。 _由Sathish Subramanian在拉取请求[中提交的修复26764](https://github.com/magento/magento2/pull/26764)_。 [GitHub-26760](https://github.com/magento/magento2/issues/26760)

<!-- ENGCOM-7052-->

* 在创建新主题过程中创建`default.xml`和`catalog_product_view.xml`文件时，应用程序会按预期创建这些页面或在日志文件中记录错误。 以前，应用程序在`vendor/magento/framework/View/Page/Config/Renderer.php`文件中记录错误。 Vinh Le在拉取请求[27026](https://github.com/magento/magento2/pull/27026)_中提交的_&#x200B;修复。 [GitHub-27009](https://github.com/magento/magento2/issues/27009)

### 翻译和区域设置

<!-- MC-24186-->

* 当设置了&#x200B;**管理员** > **商店** > **配置** > **高级** > **开发人员** > **翻译内联** > **为商店启用**&#x200B;时，内联翻译现在可在店面正常工作。

<!-- MC-31663-->

* 为店面启用内联翻译后，现在可按预期工作。

<!-- ENGCOM-7064-->

* 产品URL键现在可按预期音译。 在拉取请求[26506](https://github.com/magento/magento2/pull/26506)_中由DanieliMi提交的_&#x200B;修复。 [GitHub-26499](https://github.com/magento/magento2/issues/26499)

<!-- ENGCOM-6899-->

* 现在支持`es_US Spanish (United States)`区域设置。 Vinh Le在拉取请求[26857](https://github.com/magento/magento2/pull/26857)_中提交的_&#x200B;修复。 [GitHub-26843](https://github.com/magento/magento2/issues/26843)

<!-- ENGCOM-6996-->

* 数字占位符计数和JavaScript代码占位符计数现在相同。 以前，JavaScript代码假定为0%，而数字占位符计数以%1开头。  _修复由korostii在拉取请求[中提交25359](https://github.com/magento/magento2/pull/25359)_。 [GitHub-25243](https://github.com/magento/magento2/issues/25243)

<!-- ENGCOM-6557-->

* 您现在可以禁用产品详细信息页面(`page.main.title`)的页面标题的翻译，默认情况下会启用此功能。 _Bartomiej Szubert在拉取请求[中提交的修复26269](https://github.com/magento/magento2/pull/26269)_。 [GitHub-7065](https://github.com/magento/magento2/issues/7065)

<!-- ENGCOM-7465-->

* 发票PDF中阿拉伯文和希伯来文的译文问题已得到解决。 _由Ihor Sviziev在拉取请求[中提交的修复27887](https://github.com/magento/magento2/pull/27887)_。 [GitHub-25769](https://github.com/magento/magento2/issues/25769)

<!-- ENGCOM-6646-->

* 现在，按照预期和文档中的说明，在首次使用的基础上应用语言包继承顺序。  _Sergiy Vasiutynskyi在拉取请求[中提交的修复26420](https://github.com/magento/magento2/pull/26420)_。 [GitHub-8691](https://github.com/magento/magento2/issues/8691)

<!-- ENGCOM-6443-->

* 现在，当您在仅支持拉丁字母的区域设置中为文件夹名称输入非拉丁字符时，应用程序会显示此错误消息： `Please rename the folder using only Latin letters, numbers, underscores and dashes`。 _Eden Duong在拉取请求[中提交的修复25904](https://github.com/magento/magento2/pull/25904)。 [GitHub-25896](https://github.com/magento/magento2/issues/25896)_

<!-- ENGCOM-6539-->

* `directory_country_region_name`的`locale`列的长度已从8增加到16，以支持区域设置，如`zh_Hans_CN`。 _Bartomiej Szubert在拉取请求[中提交的修复26268](https://github.com/magento/magento2/pull/26268)_。 [GitHub-14001](https://github.com/magento/magento2/issues/14001)

### UI

<!-- ENGCOM-7490-->

* 现在，在&#x200B;**管理员** > **商店** > **订单状态** > **编辑订单状态**&#x200B;中，“上一步”按钮可按预期工作。 _Vadim Malesh在拉取请求[中提交的修复27976](https://github.com/magento/magento2/pull/27976)_。 [GitHub-1270](https://github.com/magento/magento2/issues/1270)

<!-- ENGCOM-6692-->

* 当您使用箭头键在Adobe Stock列表的&#x200B;**文件名**&#x200B;字段中移动光标时，预览图像不再意外更改。 _由Adarsh Manickam在拉取请求[中提交的修复25991](https://github.com/magento/magento2/pull/25991)_。 [GitHub-847](https://github.com/magento/magento2/issues/847)

<!-- ENGCOM-6414-->

* **管理员** > **系统** > **集成**&#x200B;页面的“当前用户身份验证”部分中的&#x200B;**您的密码**&#x200B;字段现在会按预期继承样式。 _Eduard Chitoraga在拉取请求[中提交的修复25918](https://github.com/magento/magento2/pull/25918)_。 [GitHub-25917](https://github.com/magento/magento2/issues/25917)

<!-- ENGCOM-6482-->

* 店面上的JavaScript验证器验证的输入内容也将通过管理员的验证。 以前，JavaScript验证器将新行数计为店面中的一个字符，但在服务器端，`\Magento\Catalog\Model\Product\Option\Type\maxCharacters`将新行数计为两个字符。 _Grzegorz Bogusz在拉取请求[中提交的修复26033](https://github.com/magento/magento2/pull/26033)_。 [GitHub-25974](https://github.com/magento/magento2/issues/25974)

<!-- ENGCOM-6517-->

* 使用`setTitle()`调用更改模态标题时，`subTitle`标记不再被清除。 以前，当您尝试创建包含标题和子标题的弹出窗口或自定义模组，然后使用`setTitle()`方法更改标题时，`subTitle`被清除。 _Andrea Parmeggiani在拉取请求[中提交的修复26142](https://github.com/magento/magento2/pull/26142)_。 [GitHub-26141](https://github.com/magento/magento2/issues/26141)

<!-- ENGCOM-6464-->

* 现在，管理员营销选项卡中的子菜单可按预期自动调整菜单项的长度。  您现在还可以水平滚动。  _Pawel Tylek在拉取请求[中提交的修复26034](https://github.com/magento/magento2/pull/26034)_。 [GitHub-18687](https://github.com/magento/magento2/issues/18687)

<!-- ENGCOM-6519-->

* 表`quote`列`customer_note`现在按预期使用类型`text`。 以前，它使用类型`varchar(255)`。 _Ravi Chandra在拉取请求[中提交的修复26160](https://github.com/magento/magento2/pull/26160)_。 [GitHub-26155](https://github.com/magento/magento2/issues/26155)

<!-- ENGCOM-7153-->

* 更正了&#x200B;**我的帐户** > **通讯簿**&#x200B;地址条目表中表头出现的显示问题。  _Abrar Pathan在拉取请求[中提交的修复27336](https://github.com/magento/magento2/pull/27336)_。 [GitHub-27335](https://github.com/magento/magento2/issues/27335)

<!-- ENGCOM-5986-->

* 分层导航价格步骤中使用的货币符号现在基于预期的默认设置。  _Bartomiej Szubert在拉取请求[中提交的修复24815](https://github.com/magento/magento2/pull/24815)_。 [GitHub-21684](https://github.com/magento/magento2/issues/21684)

<!-- ENGCOM-6324-->

* 白俄罗斯货币(BYR)的符号已更新为BYN。 _Bartomiej Szubert在拉取请求[中提交的修复25723](https://github.com/magento/magento2/pull/25723)_。 [GitHub-24713](https://github.com/magento/magento2/issues/24713)

<!-- ENGCOM-6622-->

* 在分辨率小于767px的显示屏上，“目录”页面的“比较产品”部分现在按预期显示在移动设备视图中。 _Hitesh在拉取请求[中提交的修复26418](https://github.com/magento/magento2/pull/26418)_。 [GitHub-26416](https://github.com/magento/magento2/issues/26416)

<!-- ENGCOM-6376-->

* 现在，产品页面滚动在移动设备视图中可按预期工作。  _Mateusz Krzeszowiak在拉取请求[中提交的修复25385](https://github.com/magento/magento2/pull/25385)_。 [GitHub-10518](https://github.com/magento/magento2/issues/10518)，[GitHub-21717](https://github.com/magento/magento2/issues/21717)

<!-- ENGCOM-6368-->

* 现在，您可以按预期在移动设备视图中的产品页面上滚动浏览图片库缩略图图像。 _由iGerchak在拉取请求[中提交的修复25839](https://github.com/magento/magento2/pull/25839)_。 [GitHub-21014](https://github.com/magento/magento2/issues/21014)

<!-- ENGCOM-6425-->

* 单击&#x200B;**管理员** > **内容** > **主题**&#x200B;上的主题标题不再导致重复记录。 _Eden Duong在拉取请求[中提交的修复25926](https://github.com/magento/magento2/pull/25926)_。 [GitHub-25925](https://github.com/magento/magento2/issues/25925)

<!-- ENGCOM-6328-->

* “管理员账单地址/送货地址”页面的布局已重构，以符合管理员表单显示约定。 _Alexey Rakitin在拉取请求[中提交的修复25699](https://github.com/magento/magento2/pull/25699)_。 [GitHub-23481](https://github.com/magento/magento2/issues/23481)，[GitHub-19805](https://github.com/magento/magento2/issues/19805)

<!-- ENGCOM-6628 6593-->

* 现在，产品详细信息页面上的“添加到比较”链接在分辨率低于640像素的显示屏上的移动设备视图中正确呈现。 _由Pawe Tylek在拉取请求[26424](https://github.com/magento/magento2/pull/26424)中提交的修复和由Tejash Kumbhare在拉取请求[26365](https://github.com/magento/magento2/pull/26365)_&#x200B;中提交的修复。 [GitHub-26364](https://github.com/magento/magento2/issues/26364)

<!-- ENGCOM-6607-->

* **排序依据**&#x200B;标签不再与移动视图类别页面上的&#x200B;**购物依据**&#x200B;按钮重叠。 由Andrii Kartavtsev在拉取请求[中提交的&#x200B;_修复26381](https://github.com/magento/magento2/pull/26381)_。 [GitHub-25300](https://github.com/magento/magento2/issues/25300)

<!-- ENGCOM-7137-->

* 您现在可以通过启用&#x200B;**使用默认值**&#x200B;复选框来更新可下载产品的示例和链接标题的值。 _Abel Truong在拉取请求[中提交的修复27295](https://github.com/magento/magento2/pull/27295)_。 [GitHub-27169](https://github.com/magento/magento2/issues/27169)

<!-- ENGCOM-6532-->

* 已更正迷你购物车上&#x200B;**更新**&#x200B;按钮和&#x200B;**数量**&#x200B;字段之间的间距。  _Hitesh在拉取请求[中提交的修复26234](https://github.com/magento/magento2/pull/26234)_。 [GitHub-26227](https://github.com/magento/magento2/issues/26227)

<!-- ENGCOM-7032-->

* 通讯簿页上“其他地址条目”表的下边框颜色现在与`thead`和`tbody`边框颜色匹配。 _由Tejash Kumbhare在拉取请求[中提交的修复26649](https://github.com/magento/magento2/pull/26649)_。 [GitHub-26648](https://github.com/magento/magento2/issues/26648)

<!-- ENGCOM-7195-->

* 当用户单击模态叠加时，提示模态不再执行确认操作。 在拉取请求[27399](https://github.com/magento/magento2/pull/27399)_中由Serhiy Zhovnir提交的_&#x200B;修复。

### URL

<!-- ENGCOM-7112-->

* 类别存储库（保存方法）已重构，以前在更改类别URL键时阻止创建唯一路径。 _Sergiy Vasiutynskyi在拉取请求[中提交的修复27304](https://github.com/magento/magento2/pull/27304)_。 [GitHub-14080](https://github.com/magento/magento2/issues/14080)

<!-- ENGCOM-7208-->

* 类别URL键逻辑的验证已得到改进。 _Sergiy Vasiutynskyi在拉取请求[中提交的修复27412](https://github.com/magento/magento2/pull/27412)_。 [GitHub-13689](https://github.com/magento/magento2/issues/13689)

### URL重写

<!-- MC-31147-->

* 在CMS页面上更改语言的客户现在可以成功导航到他们选择的商店视图。 以前，应用程序显示404错误。

<!-- ENGCOM-6997-->

* 现在，为您启用了类别路径包含的产品URL生成URL重写可按预期运行。 以前，在具有多个存储视图的部署中，应用程序有时会使用类别URL路径的默认值（而不是特定于存储的URL路径）来生成错误的URL重写。 _Pieter Hoste在拉取请求[中提交的修复26784](https://github.com/magento/magento2/pull/26784)_。 [GitHub-25124](https://github.com/magento/magento2/issues/25124)，[GitHub-11616](https://github.com/magento/magento2/issues/11616)

<!-- ENGCOM-6995-->

* 我们添加了检查，以防止在请求路径与目标路径相同时进行URL重定向。 _Bartomiej Szubert在拉取请求[中提交的修复26902](https://github.com/magento/magento2/pull/26902)_。 [GitHub-20309](https://github.com/magento/magento2/issues/20309)

<!-- ENGCOM-6303-->

* 当URL具有尾随斜杠时，URL重写操作不再从URL中删除查询字符串。  _Alexey Arendarenko在拉取请求[中提交的修复25603](https://github.com/magento/magento2/pull/25603)_。 [GitHub-18717](https://github.com/magento/magento2/issues/18717)

### 增值税

<!-- ENGCOM-7458-->

* 更正了[欧盟增值税编号](https://ec.europa.eu/taxation_customs/vies/checkVatService.wsdl)的增值税验证URL。  _Shikha Mishra在拉取请求[中提交的修复27886](https://github.com/magento/magento2/pull/27886)_。 [GitHub-27874](https://github.com/magento/magento2/issues/27874)

### Web API框架

<!-- MC-29891-->

* 更正了POST`/rest/default/async/bulk/V1/orders`调用存在的问题。

<!-- MC-30675-->

* 更正了POST`/rest/default/async/bulk/V1/products`调用存在的问题。

<!-- ENGCOM-6945-->

* 已重构`getList`方法以检索`is_subscribed`扩展特性。 以前，在通过API获取客户实体时，无法检索此属性。 _在拉取请求[中由enriquei4提交的修复25311](https://github.com/magento/magento2/pull/25311)_。 [GitHub-13252](https://github.com/magento/magento2/issues/13252)

<!-- ENGCOM-6500-->

* 通过`/V1/customers/:id`更新客户信息不再不必要地重置`group_id`。 以前，当您通过REST更新客户时，如果正文不包含客户组，则客户组将更改为1。 _由MaxRomanov4669在拉取请求[25958](https://github.com/magento/magento2/pull/25958)_&#x200B;中提交的修复。 [GitHub-14663](https://github.com/magento/magento2/issues/14663)

<!-- ENGCOM-6920-->

* 在Web API中使用服务合同中可为空的getter时，不再引发反射错误。 现在，可以返回null和有效类型的方法不论顺序如何，均可正常工作。  _Marco k̦Pcke在拉取请求[中提交的修复25806](https://github.com/magento/magento2/pull/25806)_。 [GitHub-25656](https://github.com/magento/magento2/issues/25656)

<!-- ENGCOM-7075-->

* 您现在可以使用POST`/V1/guest-carts/:cartId/items`将产品添加到特定购物车。 以前，当您使用此调用时，应用程序忽略`cartId`的值。 _Vadim Malesh在拉取请求[中提交的修复27172](https://github.com/magento/magento2/pull/27172)_。 [GitHub-14086](https://github.com/magento/magento2/issues/14086)

<!-- ENGCOM-7102-->

* 您现在可以使用`PUT /V1/cmsPage/:id`端点保存CMS页面标题而不更改其他字段的值。 _Vadim Malesh在拉取请求[中提交的修复27237](https://github.com/magento/magento2/pull/27237)_。 [GitHub-24704](https://github.com/magento/magento2/issues/24704)

<!-- ENGCOM-7011-->

* 对REST请求的结果进行分页现在很准确。 以前，当您从特定页面请求结果时（例如，`page_size` = 1以及超出范围的`current_page`值），调用返回的是重复结果的最后一页，而不是信息性消息。  Lukasz Bajsarowicz在拉取请求[中提交的&#x200B;_修复26988](https://github.com/magento/magento2/pull/26988)_。 [GitHub-26986](https://github.com/magento/magento2/issues/26986)，[GitHub-8099](https://github.com/magento/magento2/issues/8099)

<!-- ENGCOM-6540-->

* GET`/V1/orders/items/{id}`的结果现在包含包含包含礼品消息数据的扩展属性元素。 _Laura Folco在拉取请求[中提交的修复25946](https://github.com/magento/magento2/pull/25946)_。 [GitHub-19093](https://github.com/magento/magento2/issues/19093)

### 愿望清单

<!-- MC-29988-->

* 现在，当愿望清单在商店视图级别启用并在全局级别禁用时，它可按预期工作。 以前，设置这些后，将产品添加到愿望清单会导致404错误。

<!-- ENGCOM-6518-->

* 我们改进了在客户尝试使用超出允许的电子邮件地址共享其愿望清单时显示的错误消息。  _在拉取请求[26066](https://github.com/magento/magento2/pull/26066)_&#x200B;中由divyajyothi5321提交的修复。 [GitHub-26064](https://github.com/magento/magento2/issues/26064)

<!-- ENGCOM-6723-->

* 应用程序现在按中的预期显示“我的愿望清单”页面，该页面的分辨率大于768像素，小于1023像素。 _Hitesh在拉取请求[中提交的修复26546](https://github.com/magento/magento2/pull/26546)_。 [GitHub-26543](https://github.com/magento/magento2/issues/26543)

<!-- ENGCOM-7062-->

* 单击&#x200B;**共享愿望清单**&#x200B;时生成的电子邮件现在显示与愿望清单页面相同的产品图像。 _Michael Bottens在拉取请求[中提交的修复27125](https://github.com/magento/magento2/pull/27125)。 [GitHub-27124](https://github.com/magento/magento2/issues/27124)_

<!-- ENGCOM-6602-->

* 客户现在可以将属于分组产品的简单产品以及具有不同数量的相同简单产品添加到愿望清单。  _由MaxRomanov4669在拉取请求[26258](https://github.com/magento/magento2/pull/26258)_&#x200B;中提交的修复。 [GitHub-11209](https://github.com/magento/magento2/issues/11209)

### 所见即所得

<!-- ENGCOM-6275-->

* WYSIWYG图像上载程序现在使用`pub/media/wysiwyg`作为存储根。 以前，上传的映像使用`pub/media`作为其存储根目录，这使得最近对映像上传程序代码进行更改后，无法访问这些已上传的映像。 _Pieter Hoste在拉取请求[中提交的修复24878](https://github.com/magento/magento2/pull/24878)_。 [GitHub-22609](https://github.com/magento/magento2/issues/22609)

<!-- ENGCOM-7045-->

* Chrome浏览器上的TinyMCE4现在可按预期处理双字节字符。 以前，TinyMCE4无法在Chrome上正确处理双字节字符（例如中文字符）。 _Hirokazu Nishi在拉取请求[中提交的修复25454](https://github.com/magento/magento2/pull/25454)_。 [GitHub-24637](https://github.com/magento/magento2/issues/24637)

## 已知问题 — 常规

**问题**：安装PHP 7.4.2的部署中出现storefront错误消息异常。 使用PHP 7.4.2部署2.4.0时，店面错误消息中的空格符号将替换为加(+)字符。  此错误是PHP 7.4.2的固有错误，无法通过Magento Open Source进行更正。 **解决方法**：我们建议使用其他版本的PHP 7.4.x。请参阅[原始消息数据显示在店面](https://support.magento.com/hc/en-us/articles/360045804332)知识库文章。<!-- MC-34170-->

**问题**：商家无法从“管理创建包”页面将订购的产品添加到包中并保存包。 请参阅[发运标签创建](https://support.magento.com/hc/en-us/articles/360046750171)知识库文章。 此问题的&#x200B;**MC-35514-2.4.0-CE-composer.patch**&#x200B;修补程序现已从[版本](https://magento.com/tech-resources/download)中提供。<!-- MC-35514-->

**问题**：应用程序在安装第三方扩展时显示此错误消息，这些扩展依赖于CLI命令中`Store`模块的API： `The default website isn't defined. Set the website and try again`。 **解决方法**：从Composer中删除对第三方扩展的依赖关系，安装Magento，然后安装第三方扩展。

**问题**：购物车底部的&#x200B;**将选定内容添加到购物车**&#x200B;按钮不起作用。 **解决方法**：使用页面顶部的&#x200B;**将选定内容添加到我的购物车**&#x200B;按钮。 请参阅[将选定内容添加到购物车按钮无效](https://support.magento.com/hc/en-us/articles/360045838312)知识库文章。<!-- MC-35313-->

**问题**：商家无法从管理员创建新订单，因为&#x200B;**按SKU添加产品**&#x200B;和&#x200B;**添加产品**  启用JavaScript捆绑时，订单创建页面中缺少按钮。  **解决方法**：为您的部署禁用JavaScript捆绑包。<!-- MC-36044-->

**问题**：当客户在签出发往多个地址的订单时尝试删除奖励点时，应用程序出现`404 not found`错误。<!-- MC-35955-->

**问题**：从客户的愿望清单中编辑可配置产品会导致以下意外行为：“配置产品”页面上出现意外字段，单击&#x200B;**确定**&#x200B;后，“配置产品”页面不会消失。 应用程序还显示此消息： `Please load Wish List item`。 **解决方法**：重新加载“配置产品”页。<!-- MC-35617-->

**问题**：当订单列表跨越多个页面时，客户无法更改每页显示的订单数。 目前，当您导航到订单的最后一页并尝试更改每页显示的订单数时，应用程序会显示此消息： `You have placed no orders`。 请参阅[订单显示错误](https://support.magento.com/hc/en-us/articles/360046802271)知识库文章。  **解决方法**：重新打开“我的订单”页将导致显示订单列表。<!-- MC-34153-->

**问题**：直接单击“添加新税则”页面的&#x200B;**导出税率**&#x200B;按钮（**商店** > **税则**）无法按预期下载`tax_rates.csv`文件。 **解决方法**：单击&#x200B;**导出税率**&#x200B;按钮的边缘。  请参阅[导出税率不起作用](https://support.magento.com/hc/en-us/articles/360045850032)知识库文章。<!-- MC-35345-->

**问题**：“管理客户活动”页面的“上次订购的项目”、“比较列表中的产品”和“最近比较的产品”部分中的&#x200B;**刷新**&#x200B;按钮无法按预期工作。 目前，应用程序在每次单击&#x200B;**刷新**&#x200B;按钮时滚动页面，并且不显示产品名称。 请参阅[有关客户活动的刷新功能无效](https://magento.zendesk.com/hc/en-us/articles/360046091332)知识库文章。<!-- MC-35296-->

## 已知问题 — VBE

### Amazon Pay

* **问题**：在用Amazon Pay结帐期间，当客户单击&#x200B;**返回标准结帐**&#x200B;时，结帐工作流中缺少付款方法。 **解决方法**：刷新签出页面以显示缺少的方法。 <!-- BUNDLE-2661-->

* **问题**：应用程序在创建新的购物车价格规则时可用的“付款方式”下拉列表中显示两个相同的Amazon付款方式。 <!-- BUNDLE-2685-->

### Braintree

* **问题**：当管理员尝试访问Braintree结算报告页面时，应用程序显示错误（**管理员** > **报告**）。 目前，应用程序显示此消息： `An error has happened during application run. See exception log for details`。 请参阅[Braintree结算报告无法加载](https://support.magento.com/hc/en-us/articles/360046798251)知识库文章。 此问题的&#x200B;**BUNDLE-2683_SettlementReport.patch**&#x200B;修补程序现已从[版本](https://magento.com/tech-resources/download)中提供。<!-- BUNDLE-2683-->

* **问题**：商户无法在启用了Venmo且禁用了&#x200B;**为卡付款启用保管库**&#x200B;设置的部署中为订单创建部分发票。 目前，应用程序显示此错误： `The "vault_capture" command doesn't exist. Verify the command and try again`。<!-- BUNDLE-2647-->

* **问题**：应用程序在创建新购物车价格规则时可用的“付款方式”下拉列表中显示两个相同的PayPal方式。   <!-- BUNDLE-2686-->

* **问题**：应用程序打开&#x200B;**Sales** > **Braintree虚拟终端**&#x200B;时出错。 尽管表单包含损坏的UI元素，但仍接受付款。 **解决方法**：保存正确的Braintree凭据，这将修复折叠的输入字段。 请参阅[Braintree虚拟终端页已损坏](https://support.magento.com/hc/en-us/articles/360046800071)知识库文章。 此问题的&#x200B;**BUNDLE-2670_VirtualTerminal.patch**&#x200B;修补程序现已从[版本](https://magento.com/tech-resources/download)中提供。<!-- BUNDLE-2670-->

* **问题**：当客户在结账期间选择本地支付方式时，应用程序在以下国家/地区显示错误消息：比利时、荷兰、意大利、西班牙和波兰。  **解决方法**：忽略错误消息并继续付款。

### 克拉尔纳

* **问题**：将Klarna现场消息传递中的&#x200B;**设计主题**&#x200B;字段留空（**管理员** > **商店** > **配置** > **Klarna设置**）会导致出现空白页面。  **解决方法**：选择设计主题并保存。 <!-- BUNDLE-2623-->

### 顶点

* **问题**：即使地址验证被禁用，应用程序也会在签出工作流的送货部分显示&#x200B;**地址验证**&#x200B;按钮。 地址验证器不重新检查更新的地址，并且当客户在首次输入错误地址之后输入正确的地址时，即使启用了地址验证，仍继续显示指示地址无效的消息。 **解决方法**：禁用顶点地址验证。<!-- BUNDLE-2604-->

## 社区贡献

我们感谢更广泛的Magento Open Source界，并感谢他们为这一版本做出的贡献。 您可以通过以下方式了解社区对我们当前版本的贡献：

* 如果社区成员提供了此版本的修复，我们将在这些注释的“修复问题”部分中使用短语“*由社区成员@member_name*”提供的修复”来标识此修复。

* 社区工程团队[Magento参与者](https://magento.biterg.io/app/kibana)按月、季度、年维护了主要参与人员和合作伙伴的列表。 从该参与者页面，您可以单击链接以转到GitHub上其合并的PR。

### 合作伙伴投稿

下表列出了合作伙伴所做的贡献。 此表列出了提出拉取请求的合作伙伴、外部拉取请求以及与其关联的GitHub问题编号（如果可用）。

{{$include /help/_includes/release-notes/engcomm-2-4-0-partner.md}}

### 个人贡献者

下表列出了来自社区成员的贡献。 此表列出了外部拉取请求、与其关联的GitHub问题编号（如果可用）以及参与拉取请求的社区成员。

{{$include /help/_includes/release-notes/engcomm-2-4-0-issues.md}}

### 系统要求

我们的技术栈栈是基于PHP和MySQL构建的。 有关详细信息，请参阅[系统要求](../../../installation/system-requirements.md)。

### 安装和升级说明

您可以使用编辑器安装Magento Open Source2.4.0。

## 迁移工具包

Data Migration Tool可帮助将现有Magento1.x存储数据转移到Magento2.x。此命令行界面包括验证、进度跟踪、日志记录和测试功能。 有关安装说明，请参阅[安装数据迁移工具](../../../tools/data-migration-tool/install.md)。 考虑浏览或参与[数据迁移存储库](https://github.com/magento/data-migration-tool)。

[代码迁移工具包](https://github.com/magento/code-migration)可帮助将现有Magento1.x存储扩展和自定义项传输到Magento2.x。命令行界面包括用于转换Magento1.x模块和布局的脚本。
