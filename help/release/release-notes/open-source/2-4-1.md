---
title: Magento Open Source 2.4.1发行说明
description: 了解2.4.1 Magento Open Source版本中的新增功能、增强功能、错误修复和已知问题。
recommendations: noCatalog
exl-id: 63d04bfc-96c9-4fe3-b3c1-252f1243459a
source-git-commit: 95ea96a566b0579a22b2ba738bd4a4bceef8cd9c
workflow-type: tm+mt
source-wordcount: '13109'
ht-degree: 0%

---

# Magento Open Source 2.4.1发行说明

Magento Open Source 2.4.1在性能和安全性方面引入了增强功能。 安全增强功能包括支持Cookie的`SameSite`属性，为与支付和订单相关的API端点以及下单店面页面添加了CAPTCHA保护。

此版本包括2.4.0中包含的所有核心质量改进、核心代码的150多项新修复以及超过15项安全增强功能。 其中包括我们的社区成员解决近300个GitHub问题。 这些社区贡献的内容包括对核心代码进行次要清理，以及GraphQL中的重大增强。

此版本中修复了2.4.0中识别的所有已知问题。

{{bics}}

## 安全补丁可用

商家现在无需应用完整季度版本（例如2.4.0-p1）提供的数百个功能修复和增强功能，即可安装时效性很强的安全修复。 修补程序2.4.0.1 （Composer包2.4.0-p1）是一个安全修补程序，它针对我们以前的季度版本2.4.0中发现的漏洞提供了修补程序。此安全修补程序中包含应用于2.4.0版本的所有修补程序。 （*修补程序*&#x200B;提供对已发布版本的修补程序，该版本可解决特定问题或错误。）

有关安全修补程序的一般信息，请参阅[Introducing the New Security Patch Release](https://community.magento.com/t5/Magento-DevBlog/Introducing-the-New-Security-Patch-Release/ba-p/141287)。 有关下载和应用安全修补程序（包括修补程序2.3.5-p2）的说明，请参阅[快速入门本地安装](../../../installation/composer.md)。 安全修补程序仅包括安全错误修复，而不包括完整修补程序中包含的其他安全增强功能。

## 应用`AC-3022.patch`以继续将DHL作为装运承运人提供

DHL已引入架构版本6.2，并且将在不久的将来弃用架构版本6.0。 支持DHL集成的Adobe Commerce 2.4.4及更早版本仅支持版本6.0。部署这些版本的商家应尽早应用`AC-3022.patch`，以继续将DHL作为装运承运人提供。 有关下载和安装修补程序的信息，请参阅[应用修补程序以继续将DHL作为运输运营商提供](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier)知识库文章。

## 其他发行信息

虽然这些功能的代码与季度版本捆绑在一起，但其中几个项目(例如，Progressive Web Applications (PWA) Studio)也单独发布。 每个项目的文档中都提供了特定于项目的单独发行信息，其中记录了这些项目的错误修复。

## 高亮

在此版本中查找以下要点。

### 显着的安全增强功能

此版本包括15项以上的安全修复和平台安全改进。 所有安全修复均已回溯至2.4.0-p1和2.3.6。

#### 超过15项安全增强功能，可帮助消除远程代码执行(RCE)和跨站点脚本(XSS)漏洞

到目前为止，尚未发生与这些问题相关的已确认攻击。 但是，可能会利用某些漏洞访问客户信息或接管管理员会话。 这些问题中的大多数要求攻击者首先获得对管理员的访问权限。 列入允许列表因此，我们提醒您采取一切必要步骤来保护您的管理员，包括但不限于：IP身份验证、[双重身份验证](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/)、使用VPN、使用唯一位置而非`/admin`以及良好的密码卫生。 有关这些已修复问题的讨论，请参阅[可用于Magento的安全更新](https://helpx.adobe.com/cn/security/products/magento/apsb20-59.html)。

#### 其他安全增强功能

此版本的安全性改进包括：

* **CAPTCHA**&#x200B;保护已添加到以下产品区域：

   * 下单店面页面和REST和GraphQL端点<!-- MC-36067-->
   * 与付款相关的REST和GraphQL端点。<!-- MC-36064-->

  默认情况下，将禁用对这些附加页面的验证码保护。 它可以在管理员中启用，其启用方式与验证码涵盖的其他页面相同。 此保护已添加为反暴力机制，以保护商店免受梳理攻击。 请参阅[验证码](https://experienceleague.adobe.com/zh-hans/docs/commerce-admin/systems/security/captcha/security-captcha)。

* **支持Cookie的SameSite属性**。 为了支持新Cookie分类系统的Google Chrome实施，已更新处理Cookie的应用程序类以支持`SameSite` Cookie属性。 此属性默认设置为`Lax`，但可以显式覆盖。<!-- MC-35389-->

* **增强的安全扫描工具**。 Adobe已与[Sanguine Security](https://sansec.io/)（防止数字盗版的领先公司）合作，将其超过8700个威胁签名的数据库集成到安全扫描工具中。 这种合作关系将使商家能够通过主动检测恶意软件并减少误报，实时了解其网站的安全状态。 商家可以通过访问https://account.magento.com/scanner注册该工具。 有关详细信息，请参阅[使用增强的安全扫描工具保护您的店面](https://magento.com/blog/magento-news/secure-your-storefront-enhanced-magento-security-scan-tool)博客文章。

{{cve-notice}}

### 基础架构改进

此版本包含对核心质量的增强，这些改进改进了Framework以及以下功能区域的质量：客户帐户、目录、CMS、OMS、导入/导出、促销和定位、购物车和结账以及暂存和预览。

### 性能改进

* **减少Redis与Magento之间的网络传输大小**。 现在在执行`bin/magento di:compile`命令期间生成插件列表配置。 此配置信息会根据作用域写入生成的元数据文件夹。 以前，此信息存储在缓存中。 产生的性能改进包括减少网络缓存大小和执行时间（对于许多情形）。<!-- MC-31617-->

* **增强的消息队列使用者性能**。 三个新的配置设置支持减少使用者队列CPU的使用量。 这些可选参数可增强对使用者的控制并节省服务器资源。 有关[、](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/)和`maxIdleTime`参数的说明，请参阅`sleep`配置消息队列`onlySpawnWhenMessageAvailable`。

* **已改进**&#x200B;命令的执行时间`bin/magento`。

### Adobe Stock集成

此版本包括Adobe Stock集成v2.1.0。

### 新建媒体集

新媒体集现在默认在Admin中启用。 商家现在可以对媒体集中的图像执行以下操作：

* 批量删除图像
* 通过识别店面未使用的重复图像和图像优化媒体存储
* 按图像使用的店面区域筛选图像，包括产品和类别内容以及CMS块
* 使用图像元数据
   * 查看上传到媒体集的图像中的元数据
   * 编辑图像元数据（标题、描述和关键字）
   * 按图像的元数据搜索图像

### GraphQL

此版本添加了GraphQL涵盖以下功能的功能：

* **产品评论**。 客户和来宾可以撰写产品评论。 客户可以检索其产品审核历史记录。 有关检索有关审阅基础结构的信息，请参阅[创建产品审阅](https://developer.adobe.com/commerce/webapi/graphql/schema/products/mutations/create-review/)和[productReviewRatingsMetadata查询](https://developer.adobe.com/commerce/webapi/graphql/schema/products/queries/product-review-ratings-metadata/)。<!-- MC-32349-->

* **礼品选项**。 所有客户和客人均可在订单中添加礼品信息。 客户还可以将礼品包装、礼品收据和打印卡添加到订单中。 查看[`setGiftOptionsOnCart`突变](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/set-gift-options/)和[`updateCartItems`突变](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/update-items/)<!-- MC-32345-->

* **订单历史记录**。 所有客户都可以查看有关其订单历史的详细信息，包括发票、发运和退款。<!-- MC-20635-->

* **添加到购物车**。 [`addProductsToCart`突变](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/add-products/)允许您向活动购物车添加任何类型的产品。 我们建议使用此突变而不是单用途突变，如`addSimpleProductsToCart`。 _由Yaroslav Rogoza在拉取请求[中提交的修复27914](https://github.com/magento/magento2/pull/27914)_。 [GitHub-28524](https://github.com/magento/magento2/issues/28524) <!-- MC-21513-->

* **已存储支付方式**。 登录客户现在可以将付款详细信息(包括Braintree信用卡和带PayPal的Braintree)存储在“我的帐户”中。

* **Magento Open Source中的愿望清单支持**。 您可以[将项目](https://developer.adobe.com/commerce/webapi/graphql/schema/wishlist/mutations/add-products/)添加至，[在其中更新项目](https://developer.adobe.com/commerce/webapi/graphql/schema/wishlist/mutations/update-products/)，以及[从愿望清单中删除项目](https://developer.adobe.com/commerce/webapi/graphql/schema/wishlist/mutations/remove-products/)。

* **已改进客户帐户的管理**。 我们已添加[`createCustomerV2`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/create-v2/)和[`updateCustomerV2`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/update-v2/)突变来管理客户帐户。 这些新的突变需要与`createCustomer`和`updateCustomer`突变不同的输入对象。 若要更改客户的电子邮件地址，请使用新的[`updateCustomerEmail`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/update-email/)突变。

* **支持Payflow Pro保险库**。 为[Payflow Pro Vault](https://developer.adobe.com/commerce/webapi/graphql/payment-methods/payflow-pro-vault/)付款方法添加了GraphQL Vault支持。 _Oleh Usik在拉取请求[中提交的修复28821](https://github.com/magento/magento2/pull/28821)_。 [GitHub-28520](https://github.com/magento/magento2/issues/28520)

* 已更新GraphQL [`storeConfig`查询](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/)以包含新的客户配置设置。 _Oleh Usik在拉取请求[中提交的修复27876](https://github.com/magento/magento2/pull/27876)_。 [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* 添加了[`requestPasswordResetEmail`突变](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/request-password-reset-email/)，这会触发所提供电子邮件地址的密码重置电子邮件。 _Oleh Usik在拉取请求[中提交的修复27876](https://github.com/magento/magento2/pull/27876)_。 [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* **GraphQL**。 在[Klarna的付款方式](https://developer.adobe.com/commerce/webapi/graphql/payment-methods/klarna/)和[`createKlarnaPaymentsSession`](https://developer.adobe.com/commerce/webapi/graphql/schema/checkout/mutations/create-klarna-payments-session/)中添加或更新了关于Klarna GraphQL的主题

有关这些增强功能的详细信息，请参阅[GraphQL开发人员指南](https://developer.adobe.com/commerce/webapi/graphql/)。

### PWA Studio

PWA Studio v8.0.0引入了以下新增功能和增强功能：

* 对适用于设计令牌、排版规则、颜色、核心组件和页面布局的Venia样式指南进行了更新。<!-- PWA-519 419-->

* 改进了Venia迷你购物车体验<!-- PWA-236-->

* 对Venia店面<!-- PWA-295-->上的多个区域设置和本地化内容的初始支持

* 对Venia店面<!-- PWA-247-->的“我的帐户”体验进行了多项改进

有关PWA Studio版本及其兼容版本的列表，请参阅[兼容性](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/)。 有关增强功能和错误修复的信息，请参阅[PWA Studio版本](https://github.com/magento/pwa-studio/releases)。

### 功能测试框架(MFTF)

MFTF 3.1.0现已可用。 请参阅[功能测试框架更改日志](https://github.com/magento/magento2-functional-testing-framework/blob/develop/CHANGELOG.md)。

### 供应商开发的扩展

有关此版本功能和更改的更新，请参阅以下文章：

* [Amazon支付](https://marketplace.magento.com/amzn-amazon-pay-magento-2-module.html)

* [Braintree](https://experienceleague.adobe.com/docs/commerce-admin/stores-sales/payments/braintree.html?lang=zh-Hans)

* [dotdigital Engagement Cloud](https://marketplace.magento.com/dotdigital-dotdigital-magento2-os-package.html)

* [Klarna](https://marketplace.magento.com/klarna-m2-klarna.html)

* [顶点云](https://marketplace.magento.com/vertexinc-vertex-tax-module.html)

* [Yotpo产品评论](https://marketplace.magento.com/yotpo-module-yotpo.html)

## 修复的问题

我们已在2.4.1核心代码中修复了数百个问题。

### 安装、升级、部署

<!-- MC-36113-->

* 在CLI命令中使用依赖于Store模块API的第三方扩展进行安装不会再失败。 以前，应用程序显示此错误消息： `The default website isn't defined. Set the website and try again`。 这是2.4.0中的一个已知问题。

<!-- MC-33273-->

* `bin/magento setup:di:compile`不再引发致命错误。 以前，在您第一次运行此命令时，应用程序会引发错误，但第二次执行会导致编译成功。

<!-- MC-34429-->

* 在`Magento\Framework\Encryption\Encryptor`上声明插件后，升级不再失败。

<!-- MC-36231-->

* 运行`bin/magento setup:static-content:deploy`后未部署某些主题时，应用程序现在会显示信息性错误消息。 以前，当部署成功完成但未部署所有包时，应用程序不会显示错误。 当在启用并行处理的情况下执行命令，并且每个主题需要部署的时间超过指定的最大执行时间时，尽管未部署主题，但此命令可以成功完成。

<!-- MC-35001-->

* 网站范围更改时，Klarna付款的&#x200B;**使用默认**&#x200B;复选框（**商店** > **配置** > **销售** > **付款方式** > **Klarna**）现在仍按预期保持选中状态。

<!-- MC-33788-->

* 升级不再导致Galera群集突然失败。 以前，Galera群集在升级后立即重新索引后突然退出。 在升级过程中，索引表被更改，引擎从`MEMORY`更改为`InnoDB`。 此时，这些表的内容在Galera群集的节点之间变得不同步。 [GitHub-25334](https://github.com/magento/magento2/issues/25334)

<!-- MC-34254-->

* 禁用PageBuilder模块不再影响产品页面的呈现。 以前，在禁用模块时，产品页面上的自定义布局会消失，并且应用程序会显示一个空白页面。

<!-- ENGCOM-7219-->

* 在使用编辑器安装Magento Open Source后，您现在可以使用`bin/magento sampledata:deploy`按预期部署示例数据。 以前，应用程序引发此错误： `Git installations must deploy sample data from GitHub; see [Clone sample data Git repositories](../../../installation/sample-data/git-repositories.md) for more information`。 _Andrii Beziazychnyi在拉取请求[中提交的修复27481](https://github.com/magento/magento2/pull/27481)_。 [GitHub-19481](https://github.com/magento/magento2/issues/19481)

<!-- ENGCOM-7459-->

* 通过消除`Datepicker`组件的不必要加载，店面性能得到了改进。 _Mateusz Krzeszowiak在拉取请求[中提交的修复27860](https://github.com/magento/magento2/pull/27860)_。 [GitHub-28823](https://github.com/magento/magento2/issues/28823)

<!-- ENGCOM-7265-->

* 执行`bin/magento setup:upgrade`不再显示有关缓存无关的信息。 _由Sathish Subramanian在拉取请求[中提交的修复27567](https://github.com/magento/magento2/pull/27567)_。 [GitHub-27091](https://github.com/magento/magento2/issues/27091)

<!-- MC-17959 ENGCOM-7629-->

* 运行`bin/magento config:show <vendor_module>/general/value`现在会按预期返回`0`或空字符串。 以前，它返回`Configuration for path: "vendor_module/general/value" doesn't exist`。 _Vadim Malesh在拉取请求[中提交的修复28549](https://github.com/magento/magento2/pull/28549)_。 [GitHub-23290](https://github.com/magento/magento2/issues/23290)

<!-- ENGCOM-7853-->

* `bin/magento setup:static-content:deploy --language=all`现在部署店面上使用的所有语言以及管理员用户配置的所有语言（未设置语言参数时）。 （`en_US`始终默认部署。）_Anton Evers在拉取请求[中提交的修复](https://github.com/magento/magento2/pull/28922)289224&rbrace;。_[GitHub-29218](https://github.com/magento/magento2/issues/29218)

<!-- ENGCOM-7883-->

* 禁用“备份”功能后，应用程序不再显示“备份”菜单。 _Eden Duong在拉取请求[中提交的修复29222](https://github.com/magento/magento2/pull/29222)_。 [GitHub-29280](https://github.com/magento/magento2/issues/29280)

<!-- ENGCOM-7987-->

* 目录图像帮助程序初始化现在使用产品模型，而不是`DataObject`。 _在拉取请求[29435](https://github.com/magento/magento2/pull/29435)_&#x200B;中由jmonteros422提交的修复。 [GitHub-1711](https://github.com/magento/adobe-stock-integration/issues/1711)

<!-- MC-37226-->

* 管理员用户现在可以保存空的&#x200B;**客户令牌生命周期（小时）**&#x200B;字段（管理员&#x200B;**商店** > **配置** > **服务** > **OAuth** > **访问令牌过期**）。 [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-7724 -->

* 默认情况下，类别的&#x200B;**为旧URL创建永久重定向**&#x200B;设置处于禁用状态。 _Vadim Malesh在拉取请求[中提交的修复28752](https://github.com/magento/magento2/pull/28752)_。 [GitHub-24922](https://github.com/magento/magento2/issues/24922)

### Adobe Stock集成

<!-- ENGCOM-7776-->

* 在清除过滤器后，Adobe Stock图像网格中的图像现在会正确对齐。 _Nazar Klovanych在拉取请求[中提交的修复28366](https://github.com/magento/magento2/pull/28366)_。 [GitHub-824](https://github.com/magento/adobe-stock-integration/issues/824)，[GitHub-972](https://github.com/magento/adobe-stock-integration/issues/972)

<!-- ENGCOM-7709 -->

* Adobe Stock图库图像详细信息页面的&#x200B;**用于**&#x200B;字段现在可以准确识别该图像是否与产品关联。 _Nazar Klovanych在拉取请求[中提交的修复28798](https://github.com/magento/magento2/pull/28798)_。 [GitHub-1474](https://github.com/magento/adobe-stock-integration/issues/1474)

<!-- ENGCOM-7873 -->

* `\Magento\MediaGallery\Model\ResourceModel\Keyword\SaveAssetsKeywords::execute`现在会删除指向参数上未指定的关键字的链接，并在编辑图像详细信息时删除关键字标记时插入新链接。 _在拉取请求[29207](https://github.com/magento/magento2/pull/29207)_&#x200B;中由jmonteros422提交的修复。 [GitHub-1391](https://github.com/magento/adobe-stock-integration/issues/1391)

<!-- ENGCOM-7981 -->

* 商家为以前保存的、未授权的Adobe Stock图像单击`Login failed`许可证&#x200B;**后，应用程序显示的**&#x200B;消息不再包含HTML标记。 _由您的用户在拉取请求[中提交的修复29398](https://github.com/magento/magento2/pull/29398)_。 [GitHub-1684](https://github.com/magento/adobe-stock-integration/issues/1684)

<!-- ENGCOM-7976 -->

* 单击“图像详细信息”页面的&#x200B;**用于**&#x200B;部分中的链接现在会显示一个网格，该网格可显示按图像过滤的所有实体。 此外，还可正确设置和显示资源筛选器。 以前，应用程序未在&#x200B;**应用的过滤器**&#x200B;部分中显示资产标题。 _Nazar Klovanych在拉取请求[中提交的修复29367](https://github.com/magento/magento2/pull/29367)_。 [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-7976 -->

* 当映像未被使用时，应用程序不再显示映像“详细信息”页面的&#x200B;**用于**&#x200B;部分。 _Nazar Klovanych在拉取请求[中提交的修复29367](https://github.com/magento/magento2/pull/29367)_。 [GitHub-1699](https://github.com/magento/adobe-stock-integration/issues/1699)

<!-- ENGCOM-7976 -->

* 修复了在添加超过最大字符数的新图像标记时出现的显示问题。 _Nazar Klovanych在拉取请求[中提交的修复29367](https://github.com/magento/magento2/pull/29367)_。 [GitHub-1702](https://github.com/magento/adobe-stock-integration/issues/1702)

<!-- ENGCOM-7976 -->

* 现在可以使用图像详细信息&#x200B;**用于**&#x200B;部分上的资源筛选器按预期检查Assets。 _Nazar Klovanych在拉取请求[中提交的修复29367](https://github.com/magento/magento2/pull/29367)_。 [GitHub-1704](https://github.com/magento/adobe-stock-integration/issues/1704)

<!-- ENGCOM-7976 -->

* 有关不同实体（例如，`page`和`category`）使用的图像的信息现在已在图像详细信息页面中列出并已更正。 _Nazar Klovanych在拉取请求[中提交的修复29367](https://github.com/magento/magento2/pull/29367)_。 [GitHub-1747](https://github.com/magento/adobe-stock-integration/issues/1747)

<!-- ENGCOM-8006-->

* 禁用媒体库后，当商家尝试保存产品及其相关图像时，应用程序不再引发异常。 _Nazar Klovanych在拉取请求[中提交的修复29492](https://github.com/magento/magento2/pull/29492)_。 [GitHub-1750](https://github.com/magento/adobe-stock-integration/issues/1750)

<!-- ENGCOM-8019-->

* 单击媒体库中图像的“用于”部分中的链接，现在会按预期打开按图像过滤的实体网格。 以前，图像标题不会显示在网格的已应用过滤器部分中。 _Nazar Klovanych在拉取请求[中提交的修复29429](https://github.com/magento/magento2/pull/29429)_。 [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-8019-->

* 现在，当您在媒体集中连续编辑多个图像时，应用程序可正确添加标记。 _Nazar Klovanych在拉取请求[中提交的修复29429](https://github.com/magento/magento2/pull/29429)_。 [GitHub-1755](https://github.com/magento/adobe-stock-integration/issues/1755)

<!-- ENGCOM-8015-->

* 现在，商家删除标记并保存图像详细信息后，应用程序将删除Adobe Stock图像的标记。 以前，在刷新页面之前不会删除标记。 _Honeymay Louiese Ignacio在拉取请求[中提交的修复29400](https://github.com/magento/magento2/pull/29400)_。 [GitHub-1703](https://github.com/magento/adobe-stock-integration/issues/1703)

### Amazon Pay

* Amazon Pay现在会先检查用户是否已登录，然后再呈现付款选项。

* 多重身份验证问题和放弃的购物车已得到解决。

* Amazon Pay现在会在电子邮件和其他显示的位置中正确填充`store name`。  如果Amazon Pay配置中的&#x200B;**商店名称**&#x200B;字段为空，则扩展将检索该商店的默认名称（即您在Admin中提供的商店名称）。

* 已解决拒绝方案的本地化/翻译问题。 显示的文本不再总是英文。

### 捆绑产品

<!-- MC-36281-->

* 当您尝试在安装了清单但`Magento_InventoryBundleProduct`模块已禁用的部署中创建产品时，应用程序不再引发异常。

<!-- MC-34261-->

* 现在，该应用程序可以正确计算包含捆绑产品的订单的离线退款。

<!-- MC-24363-->

* 现在，当为简单产品分配了层价格时，迷你购物车会显示捆绑产品的正确价格。 [GitHub-22807](https://github.com/magento/magento2/issues/22807)

<!-- ENGCOM-7499-->

* 商家现在可以为捆绑产品创建贷项通知单，无需退货即可提供退款。 以前，应用程序会引发错误。 _Dzung Nguyen在拉取请求[中提交的修复27455](https://github.com/magento/magento2/pull/27455)_。 [GitHub-23440](https://github.com/magento/magento2/issues/23440)

<!-- ENGCOM-7655-->

* 当购物者将捆绑产品添加到购物车而未选择所需选项时，应用程序不再显示冗余的验证消息。 _Dzung Nguyen在拉取请求[中提交的修复27455](https://github.com/magento/magento2/pull/27455)_。 [GitHub-23440](https://github.com/magento/magento2/issues/23440)

<!-- ENGCOM-7985 -->

_由Michal Derlatka在拉取请求[中提交的修复29256](https://github.com/magento/magento2/pull/29256)_。 [GitHub-26110](https://github.com/magento/magento2/issues/26110)

### 缓存

<!-- MC-36096-->

* 本地缓存存储现在保留在&#x200B;**存储** > **配置** > **常规** > **Web** > **默认Cookie设置**&#x200B;中设置的时间段。 以前，Cookie的过期日期硬编码为一天，这会使其与此设置不同步。 因此，欢迎消息不会在预期持续时间内保留返回的客户信息。

<!-- ENGCOM-7780-->

* 对页面缓存`config`的调用次数已减少。 Lukasz Bajsarowicz在拉取请求&#x200B;_中提交的[修复28992](https://github.com/magento/magento2/pull/28992)_。 [GitHub-29159](https://github.com/magento/magento2/issues/29159)

<!-- ENGCOM-7073-->

* 按计划重新索引大型目录时，清漆不再引发`Connection reset by peer`错误。 由Matthew O&#39;Loughlin在拉取请求&#x200B;_中提交的[修复26256](https://github.com/magento/magento2/pull/26256)_。 [GitHub-8815](https://github.com/magento/magento2/issues/8815)

<!-- MC-29069-->

* 在管理员中编辑产品后，不再为不相关的产品清除全页缓存。 [GitHub-25670](https://github.com/magento/magento2/issues/25670)

### 购物车和结账

<!-- ENGCOM-7950-->

* 直接SQL查询已被数据提供程序取代，这改进了签出性能。 Lukasz Bajsarowicz在拉取请求&#x200B;_中提交的[修复29376](https://github.com/magento/magento2/pull/29376)_。 [GitHub-29453](https://github.com/magento/magento2/issues/29453)

<!-- MC-36252-->

* “比较”和“最近比较”产品列表中的产品现在按预期工作。 以前，当比较列表展开时，应用程序不显示产品，即使部分指出该列表包含产品。

<!-- MC-35329-->

* 在客户的&#x200B;**管理购物车**&#x200B;页面的&#x200B;**按SKU添加到购物车**&#x200B;部分中，**删除**&#x200B;按钮现在可在选择多行时按预期工作。

<!-- MC-34999-->

* 当您尝试按SKU订购产品时，如果输入的数字与有效的SKU匹配，但这两个数字的大小写不同，则应用程序不会再引发错误。 以前，当您在&#x200B;**我的帐户** > **Order by SKU**&#x200B;上输入的SKU与有效的SKU不完全匹配时，应用程序会引发错误。

<!-- MC-25042-->

* 现在，如果客户发货地址位于允许国家/地区列表上标识的国家/地区，并且该列表仅包含该国家/地区，则在结账时默认会选择客户的发货地址。 以前，应用程序未选择地址作为默认地址，并显示以下错误消息： `Please specify a regionId in shipping address`。

<!-- MC-24043-->

* 商户现在可以在&#x200B;**营销** > **购物车价格规则** > **添加新规则**&#x200B;的“操作”选项卡中启用&#x200B;**申请配送金额**（当对整个购物车应用&#x200B;**固定金额折扣**&#x200B;时）。 [GitHub-24422](https://github.com/magento/magento2/issues/24422)

<!-- MC-23992-->

* 当购物者在开始结帐并导航到storefront主页后尝试取消设置持久性Cookie时，应用程序不再引发异常。 以前，当购物者单击&#x200B;**不是您时？主页上的**&#x200B;链接，应用程序引发此异常： `The shipping address is missing. Set the address and try again`。 [GitHub-24218](https://github.com/magento/magento2/issues/24218)

<!-- MC-33899-->

* 现在，当客户将缺货产品添加到购物车时，应用程序会显示添加到购物车成功消息。 以前，会添加产品，但应用程序不会显示成功消息。

<!-- MC-35989-->

* 自定义地址属性现在按预期包含在结账工作流中为付款步骤显示的表单中。

<!-- MC-36060-->

* **州/省/地区**&#x200B;输入框现在已在&#x200B;**我的帐户** > **通讯簿** > **添加新地址**&#x200B;上按预期启用。

<!-- ENGCOM-7746-->

* 启用&#x200B;**运费金额**&#x200B;后，运费现在按预期折扣。 _由Andrii Kalinich在拉取请求[中提交的修复28839](https://github.com/magento/magento2/pull/28839)_。 [GitHub-26723](https://github.com/magento/magento2/issues/26723)

<!-- ENGCOM-7752-->

* 已重构支持关闭迷你购物车的代码以删除`closeSidebar`函数。 已将相应的点击绑定添加到`[data-action="close"]`元素。 _在拉取请求[中由lumnn提交的修复28906](https://github.com/magento/magento2/pull/28906)_。 [GitHub-29161](https://github.com/magento/magento2/issues/29161)

<!-- ENGCOM-7585-->

* 购物车页面上的新&#x200B;**显示“清除购物车”按钮**&#x200B;配置设置控制了在购物车查看页面上显示&#x200B;**清除购物车**&#x200B;按钮。 默认情况下，此设置处于禁用状态。 _Pavlo Sydorenko在拉取请求[中提交的修复27917](https://github.com/magento/magento2/pull/27917)_。 [GitHub-28705](https://github.com/magento/magento2/issues/28705)

<!-- ENGCOM-7457-->

* 验证已添加到签出工作流的“电话”字段中。 _Oleh Usik在拉取请求[中提交的修复27537](https://github.com/magento/magento2/pull/27537)_。 [GitHub-28800](https://github.com/magento/magento2/issues/28800)

<!-- ENGCOM-5629-->

* 当购物车包含可下载的产品时，如果禁用了&#x200B;**可共享**&#x200B;和&#x200B;**如果购物车包含可下载的项目，则禁用访客签出**&#x200B;设置，则访客签出现在按预期禁用。 _Rani Priya在拉取请求[中提交的修复23972](https://github.com/magento/magento2/pull/23972)_。 [GitHub-23971](https://github.com/magento/magento2/issues/23971)

<!-- ENGCOM-7949-->

* 当购物者从客户帐户侧边栏将产品添加到购物车时，应用程序显示的成功消息现在包含指向购物者的购物车的链接。 _Ajith在拉取请求[中提交的修复27977](https://github.com/magento/magento2/pull/27977)_。 [GitHub-29097](https://github.com/magento/magento2/issues/29097)

<!-- ENGCOM-7825-->

* 应用程序现在为签出工作流上的“前缀”下拉选项菜单默认选择一个空值。 _Vadim Malesh在拉取请求[中提交的修复28238](https://github.com/magento/magento2/pull/28238)_。 [GitHub-18823](https://github.com/magento/magento2/issues/18823)

<!-- ENGCOM-8004-->

* 现在，当您从购物车中删除多个项目时，应用程序显示的弹出消息可准确地描述您选择删除的实体的数量和类型。 _Nazar Klovanych在拉取请求[中提交的修复29490](https://github.com/magento/magento2/pull/29490)_。 [GitHub-1749](https://github.com/magento/adobe-stock-integration/issues/1749)

<!-- MC-36418-->

* 现在，当访客用户完成结账时，应用程序会显示客户注册表单。

<!-- MC-35607-->

* 自定义客户地址属性字段现在按预期显示在店面结账工作流中。

<!-- ENGCOM-7793-->

* 现在，应用程序在结帐期间会检索当前客户组以获取有效报价。 以前，应用程序使用在首次将产品添加到购物车时处于活动状态的客户组，如果该客户组在结账前已被删除，则应用程序会引发错误。 _Konstantin在拉取请求[中提交的修复28902](https://github.com/magento/magento2/pull/28902)_。 [GitHub-29327](https://github.com/magento/magento2/issues/29327)

### 目录

<!-- MC-31068-->

* 应用程序现在会在结帐前从购物车的购物车中删除禁用的产品。 以前，当购物者向购物车添加在结账前禁用的产品时，应用程序会从购物车中删除禁用的产品，但该产品仍保留在报价中，购物者无法结账。 [GitHub-26680](https://github.com/magento/magento2/issues/26680)

<!-- MC-30624-->

* 该应用程序现在会按预期排序畅销产品。 以前，产品计数和排序结果的分页都不正确。 [GitHub-25955](https://github.com/magento/magento2/issues/25955)

<!-- ENGCOM-7292-->

* 购物者现在可以通过单击比较产品侧边栏中的产品名称来打开产品的详细信息页面。 _Eduard Chitoraga在拉取请求[中提交的修复27451](https://github.com/magento/magento2/pull/27451)_。 [GitHub-21101](https://github.com/magento/magento2/issues/21101)

<!-- ENGCOM-7513-->

* 当管理员删除类别时，`children_count`值现在保持为正。 以前，当管理员删除类别时，剩余类别的`children_count`为负数。 _Vitaliy Prokopov在拉取请求[中提交的修复28044](https://github.com/magento/magento2/pull/28044)_。 [GitHub-27969](https://github.com/magento/magento2/issues/27969)

<!-- MC-34314-->

* 应用程序现在使用您在创建新产品时为&#x200B;**属性选择的默认选项（**&#x200B;配置&#x200B;**>** Web **>**&#x200B;默认布局&#x200B;**>**&#x200B;默认产品布局`page_layout`）。 以前，不会应用您选择的默认值。

<!-- MC-34258-->

* 您现在可以成功地对库存产品库存执行成批活动。 以前，当您尝试对库存产品库存执行成批活动时，应用产品将显示一个空白页。 如果您在开发人员模式下对应用程序执行了此操作，则应用程序引发此错误： `Notice: Undefined offset: 32000 in /Users/kodithuw/sites/m23inventory/inventory/InventoryCatalogAdminUi/view/adminhtml/templates/catalog/product/edit/action/inventory.phtml on line 24`。

<!-- MC-32552-->

* 将产品添加到目录类别时，单击“产品”选项卡上的&#x200B;**添加产品**&#x200B;时显示的总记录数不再因产品排序顺序而更改。

<!-- ENGCOM-7854 -->

* `{products(filter: {sku: {eq: "some sku"}}) {…}`查询现在返回已转换为预期货币的值。 以前，`price_tiers.final_price.value`以基础货币显示特殊价格。 _Petkovski Marjan在拉取请求[中提交的修复28890](https://github.com/magento/magento2/pull/28890)_。 [GitHub-26121](https://github.com/magento/magento2/issues/26121)

### Cleanup

<!-- ENGCOM-7281-->

* 更正了“管理员销售订单网格”复选框的对齐错误。 _Tu Nguyen在拉取请求[中提交的修复27642](https://github.com/magento/magento2/pull/27642)_。 [GitHub-27633](https://github.com/magento/magento2/issues/27633)

<!-- ENGCOM-7723-->

* 更正了销售订单地址保存处理程序中送货地址ID getter的拼写错误。 _Konstantin在拉取请求[中提交的修复28810](https://github.com/magento/magento2/pull/28810)_。 [GitHub-28982](https://github.com/magento/magento2/issues/28982)

<!-- ENGCOM-7745-->

* 已将`getRegionNameExpresion`方法名称更正为`getRegionNameExpression`。 _Pierre Grimaud在拉取请求[中提交的修复](https://github.com/magento/magento2/pull/28832)288323&rbrace;。_[GitHub-28829](https://github.com/magento/magento2/issues/28829)

<!-- ENGCOM-7657-->

* 已从`init`和`app/code/Magento/AdvancedPricingImportExport/Model/Import/AdvancedPricing/Validator/Website.php`中删除冗余`app/code/Magento/AdvancedPricingImportExport/Model/Import/AdvancedPricing/Validator/TierPriceType.php`方法。 _Oleh Usik在拉取请求[中提交的修复28650](https://github.com/magento/magento2/pull/28650)_。 [GitHub-29009](https://github.com/magento/magento2/issues/29009)

<!-- ENGCOM-7698-->

* `localStorage` polyfill已从`base`移动到`frontend`。 _由Ihor Sviziev在拉取请求[中提交的修复28749](https://github.com/magento/magento2/pull/28749)_。 [GitHub-28900](https://github.com/magento/magento2/issues/28900)

<!-- ENGCOM-7753-->

* 更新了Adobe Commerce徽标并从`magento/magento2`存储库的主自述文件中删除了无关空格。 Rafael Cora r̻Gomes在拉取请求&#x200B;_28891[&#128279;](https://github.com/magento/magento2/pull/28891)中提交的_&#x200B;修复。 [GitHub-29056](https://github.com/magento/magento2/issues/29056)

<!-- ENGCOM-7771-->

* 已从迷你购物车侧边栏构件中删除不必要的`overflowed`类。 _在拉取请求[中由lumnn提交的修复28963](https://github.com/magento/magento2/pull/28963)_。 [GitHub-29160](https://github.com/magento/magento2/issues/29160)

<!-- ENGCOM-7658-->

* 已更正“装运”页面中错误的CSS选择器。 _Tu Nguyen在拉取请求[中提交的修复28639](https://github.com/magento/magento2/pull/28639)_。 [GitHub-29261](https://github.com/magento/magento2/issues/29261)

<!-- ENGCOM-7680-->

* 通过优化逻辑并删除冗余变量分配和函数中返回的超量使用，`lib/internal/Magento/Framework/App/Request/Http.php`文件已得到简化。 _Chris Snedaker在拉取请求[中提交的修复28608](https://github.com/magento/magento2/pull/28608)_。 [GitHub-29381](https://github.com/magento/magento2/issues/29381)

<!-- ENGCOM-7925-->

* `bin/magento module:status`命令现在接受多个模块名称作为参数。 _Chandru Rajendran在拉取请求[中提交的修复28250](https://github.com/magento/magento2/pull/28250)_。 [GitHub-29344](https://github.com/magento/magento2/issues/29344)

<!-- ENGCOM-7983-->

* 修复了`\Magento\Downloadable\Block\Sales\Order\Email\Items\Downloadable`的类描述中的拼写错误。 _Benjamin Rosenberger在拉取请求[中提交的修复29451](https://github.com/magento/magento2/pull/29451)_。 [GitHub-29470](https://github.com/magento/magento2/issues/29470)

<!-- ENGCOM-7993-->

* 已重构`TierPriceManagement`类以删除冗余代码。 Lukasz Bajsarowicz在拉取请求&#x200B;_中提交的[修复29202](https://github.com/magento/magento2/pull/29202)_。 [GitHub-29477](https://github.com/magento/magento2/issues/29477)

<!-- ENGCOM-7830-->

* `autoload.php`已重构以提高可读性和返回速度。 _Vitaliy Ryaboy在拉取请求[中提交的修复28923](https://github.com/magento/magento2/pull/28923)_。 [GitHub-29527](https://github.com/magento/magento2/issues/29527)

### CMS内容

<!-- MC-35971-->

* 现在，选定默认商店视图的“层次结构”选项卡可按预期显示选定的父页面。

<!-- ENGCOM-7602-->

* 当新的商店视图包含的CMS页面与其他商店视图中的页面具有相同的URL键时，应用程序在商店视图创建期间不再引发错误。 _Vadim Malesh在拉取请求[中提交的修复28421](https://github.com/magento/magento2/pull/28421)_。 [GitHub-28357](https://github.com/magento/magento2/issues/28357)

### 可配置的产品

<!-- MC-33523-->

* 已更正可配置产品编辑当前变体列表的分页问题。

<!-- MC-33406-->

* 当购物者为可配置产品选择选项时，应用程序不再更新“相关产品”价格框。 以前，每当购物者选择可配置产品的选项时，应用程序都会更新价格框。

<!-- MC-29882-->

* 现在，应用程序在“管理员创建订单”页面上显示了带有可自定义选项的可配置产品的正确价格。 如预期的那样，显示的价格是子产品的价格和自定义选项的价格之和。 以前，应用程序仅显示自定义选项价格。 [GitHub-25766](https://github.com/magento/magento2/issues/25766)

<!-- MC-33745-->

* 应用购物车价格规则后，订单摘要现在显示正确的折扣金额。 以前，规则在计算运费折扣时无法正确舍入金额。

<!-- MC-33765-->

* 从范围受限的管理员帐户创建的管理员用户帐户现在可以按预期创建具有属性的可配置产品。 以前，应用程序引发此错误： `Notice: Undefined index: value_index in 23develop/app/code/Magento/ConfigurableProduct/Helper/Product/Options/Factory.php on line 101`。

<!-- ENGCOM-7787-->

* 当您使用POST `/V1/products`对值为0的`int`的可配置产品进行验证时，应用程序不再引发验证错误。 以前，应用程序引发此错误： `Product with id "%1" does not contain required attribute "%2"."` _Vadim Malesh在拉取请求[29001](https://github.com/magento/magento2/pull/29001)_&#x200B;中提交的修复。 [GitHub-13210](https://github.com/magento/magento2/issues/13210)

<!-- ENGCOM-7214-->

* 父产品的配置选项属性不再分配给新可配置产品的`size`属性。 _Abel Truong在拉取请求[中提交的修复27339](https://github.com/magento/magento2/pull/27339)_。 [GitHub-26449](https://github.com/magento/magento2/issues/26449)

### Cookies

<!-- ENGCOM-7156-->

* 应用程序现在为每个会话最多创建一个`mage-translation-file-version`和`mage-translation-storage`Cookie。 _由Ihor Sviziev在拉取请求[中提交的修复27364](https://github.com/magento/magento2/pull/27364)_。 [GitHub-27355](https://github.com/magento/magento2/issues/27355)

### cron

<!-- MC-35884-->

* 扩展了消息队列使用者配置，添加了新参数，这些参数可帮助控制使用者并保存服务器资源，并且可能会减少使用者队列CPU的使用量：

   * `maxIdleTime`定义来自队列的新消息的最长等待时间（秒）。
   * `sleep`指定在检查队列中是否有新消息可用之前休眠的时间（以秒为单位）。
   * `onlySpawnWhenMessageAvailable`标识是否仅当相关队列中存在可用消息时才应派生使用者。 默认情况下，此设置对所有使用者全局启用，但可以按使用者进行配置。

<!-- ENGCOM-7863-->

* `cron`表达式，如  `3/10 * * * *`现在按预期计划。 _Anton Evers在拉取请求[中提交的修复28930](https://github.com/magento/magento2/pull/28930)_。 [GitHub-29240](https://github.com/magento/magento2/issues/29240)

<!-- ENGCOM-7193-->

* `sales_clean_quotes`不再一次加载所有过期的引号。 以前，应用程序由于此致命错误而失败，因为同时加载了所有过期的引号： `PHP Fatal error: Allowed memory size of 2147483648 bytes exhausted (tried to allocate 20480 bytes) in /path/to/magento2/vendor/magento/framework/Model/AbstractModel.php on line 359`，

### CSS

<!-- ENGCOM-7678-->

* 启用&#x200B;**关键CSS**&#x200B;后，应用程序不再复制CSS。 _Tu Nguyen在拉取请求[中提交的修复28480](https://github.com/magento/magento2/pull/28480)_。 [GitHub-26498](https://github.com/magento/magento2/issues/26498)

<!-- MC-24981-->

* 服务器端LESS编译器现在会在您运行`bin/magento setup:static-content:deploy -f`时按预期导入所有远程CSS文件。 以前，应用程序不导入远程文件，并引发错误。 [GitHub-25119](https://github.com/magento/magento2/issues/25119)

### 客户

<!-- MC-33679-->

* 管理员客户地址中的区域名称现在按预期进行了翻译。

<!-- MC-36226-->

* **省/市/自治区**&#x200B;字段现在按预期在“编辑地址”页（**我的帐户** > **通讯簿**）上填充。

<!-- MC-34655-->

* 当客户在整个店面多次单击启用了不可见reCAPTCHA的表单上的&#x200B;**Submit**&#x200B;按钮时，应用程序不再引发错误。 以前，多次单击此按钮会导致类似以下内容的内部错误： `Internal error: Make sure you are using reCaptcha V3 api keys`。

<!-- MC-33522-->

* 现在，从管理员那里保存已删除的客户只会生成一条错误消息。 以前，应用程序显示一个空白页，并生成一个包含此字符串的报告： `"0":"No such entity with customerId = 3","1":"#1 Magento\\Customer\\Model CustomerRegistry->retrieve() called at [app\/code\/Magento\/Customer\/Model\/ResourceModel\/CustomerRepository.php:340"`。

<!-- MC-33357-->

* 现在，当管理员尝试为帐户刚刚被删除的客户保存地址时，应用程序会按预期显示错误消息。 以前，应用程序显示一个空白消息框。

<!-- MC-33150-->

* 已编辑签出工作流和通讯簿中地址字段的标签以保持一致性。

<!-- ENGCOM-7244 -->

* 现在，如果前端标签的值不为空，则将其回退到存储标签。 以前，客户属性使用默认前端标签。 _Toan Nguyen在拉取请求[中提交的修复27064](https://github.com/magento/magento2/pull/27064)_。 [GitHub-27063](https://github.com/magento/magento2/issues/27063)

<!-- ENGCOM-7147 -->

* 已更正布局XML中的`sortOrder`个链接。 以前，此顺序被颠倒并使用降序。 _Tu Nguyen在拉取请求[中提交的修复27340](https://github.com/magento/magento2/pull/27340)_。 [GitHub-27162](https://github.com/magento/magento2/issues/27162)

### 目录

<!-- MC-32271-->

* 现在，省/市/自治区下拉菜单的格式在管理员中是一致的。

### dotdigital

* 当订单包含目录中不再存在的产品SKU时，订单同步不再失败。

* Web insight数据中不再包含空的产品类别。

* Web行为跟踪现在适用于具有某些主题配置的商家。 新的回退选择器可解决此问题。

* 使用cron运行客户同步时，订阅者状态数据字段不再包含空值。 （应用程序模拟可解决此问题。）

* 现在，如果在默认级别启用dotdigital帐户，但在主网站中禁用，则通讯簿映射将按预期工作。

* 现在，可以为包含加号(“+”)的电子邮件地址生成优惠券（使用外部动态内容URL生成优惠券）。

* 当联系人的`last_subscribed_at`值为null时，不再重新订阅联系人。

* 已解决影响早期版本的升级错误（自4.5.2开始）。

* 修复了4.5.3中引入的回归问题，该问题在准备订阅者导出时影响使用获得订阅者状态的方法。

* 现在可以正确计算已同步订阅者的总人数（显示在日志和屏幕上）。

### 可下载

<!-- MC-35026-->

* “我的可下载产品”区域现在会按预期显示已购买的可下载产品的链接，这些产品属于分组产品。

<!-- MC-34262-->

* 现在，单击“管理员”产品页面中可下载产品的&#x200B;**示例**&#x200B;按钮时，可按预期下载示例。 以前，当您单击&#x200B;**示例**&#x200B;时，应用程序显示以下错误： `The product that was requested doesn't exist. Verify the product and try again`。

<!-- ENGCOM-7757-->

* 购物者现在可以下载无库存的可下载产品样品。 以前，当购物者尝试下载示例时，应用程序会打开一个新选项卡，但不会显示信息性消息或开始下载过程。 _Vadim Malesh在拉取请求[中提交的修复28898](https://github.com/magento/magento2/pull/28898)_。 [GitHub-23638](https://github.com/magento/magento2/issues/23638)

<!-- ENGCOM-7796-->

* 改进了当购物者尝试为可下载产品设置送货地址时应用程序显示的例外消息。 _由Michal Derlatka在拉取请求[中提交的修复28904](https://github.com/magento/magento2/pull/28904)_。 [GitHub-26107](https://github.com/magento/magento2/issues/26107)

<!-- ENGCOM-7715 -->

* 当使用REST PUT调用更新`stock_item`值时，将更新产品的`stock_item`数据，并按预期保留可下载的产品链接和示例。 以前，在产品更新之后，该产品不再包含用于下载内容的链接。 _Vadim Malesh在拉取请求[中提交的修复28799](https://github.com/magento/magento2/pull/28799)_。 [GitHub-21811](https://github.com/magento/magento2/issues/21811)

<!-- MC-29905-->

* 现在，当客户为仅包含可下载产品的订单设置送货地址时，应用程序会显示一条信息更丰富的消息。

### 电子邮件

<!-- MC-32789-->

* 如果在创建订单后更改了客户电子邮件，则应用程序现在会向正确的客户电子邮件发送有关订单更改的电子邮件通知。

<!-- MC-36015-->

* 向客户发送的订单更新电子邮件现在包含正确的订单状态。 以前，如果订单状态从`processing`更改为其他状态，则订单电子邮件不会反映状态更改。

<!-- MC-34107-->

* 应用程序在访客结帐期间不再显示有关现有帐户的误导性消息。 以前，当访客导航到签出页面，然后导航回送货页面时，应用程序显示以下错误： `You already have an account with us. Sign in or continue as guest`。

<!-- MC-33905-->

* 现在，自定义电子邮件模板会加载与本机默认电子邮件模板相同的元素。 以前，缺少某些元素，包括变量值。

<!-- ENGCOM-7576-->

* 已从电子邮件预览模板中删除不必要的CSS。 _Tu Nguyen在拉取请求[中提交的修复27828](https://github.com/magento/magento2/pull/27828)_。 [GitHub-27543](https://github.com/magento/magento2/issues/27543)

<!-- ENGCOM-7177-->

* 电子邮件模板中重复页脚已显示的文本的文本已被删除。 _Pawel Tylek在拉取请求[中提交的修复27356](https://github.com/magento/magento2/pull/27356)_。 [GitHub-28433](https://github.com/magento/magento2/issues/28433)

<!-- ENGCOM-7506-->

* 产品警报电子邮件现在从订阅警报的存储中发送。 以前，此电子邮件始终从默认商店发送。 _Maciej Pawlowski在拉取请求[中提交的修复26534](https://github.com/magento/magento2/pull/26534)_。 [GitHub-28968](https://github.com/magento/magento2/issues/28968)

<!-- ENGCOM-7815-->

* 已从电子邮件模板中删除重复的`customer.name`变量。 _Pawel Tylek在拉取请求[中提交的修复29054](https://github.com/magento/magento2/pull/29054)_。 [GitHub-29087](https://github.com/magento/magento2/issues/29087)

<!-- MC-33700-->

* 您现在可以创建电子邮件模板，用于发送电子邮件  `Content-Type: "text/plain"`。 以前，应用程序忽略模板中指定的内容类型。 _由twoonesixdigital在拉取请求[中提交的修复26474](https://github.com/magento/magento2/pull/26474)_。 [GitHub-26471](https://github.com/magento/magento2/issues/26471)

### 框架

<!-- MC-35893-->

* 现在已正确呈现管理员&#x200B;**商店** > **配置** > GENERAL > **高级报告**&#x200B;页面的&#x200B;**发送数据的时间**&#x200B;字段。

<!-- MC-34153-->

* 当订单列表跨越多个页面时，购物者现在可以更改每页显示的订单数。 以前，当购物者导航到订单的最后一页并尝试更改每页显示的订单数时，应用程序会显示以下消息： `You have placed no orders`。 这是2.4.0中的已知问题。

<!-- MC-35020-->

* 现在，您可以在实施2级缓存时将产品添加到类别。

<!-- MC-29755-->

* `X-Magento-Tags`标头不再超过HTTP规范允许的大小。 以前，包含许多产品的类别页面返回`X-Magento-Tag`标头，导致503错误。

<!-- MC-34257-->

* 使用REST API创建装运时，`sales_order_shipment_track_save_commit_after`现在按预期触发。

<!-- MC-33898-->

* 当`di compile`由于不存在依赖关系而失败时，应用程序现在会显示信息性错误消息。 以前，显示的消息不识别发生异常的类。

<!-- MC-32929-->

* 当Redis使用所有允许内存时，应用程序不再引发以下严重错误： `report.CRITICAL: OOM command not allowed when used memory > 'maxmemory'.`

<!-- MC-18021-->

* 禁用`Persistent`模块后，购物者现在可以将多个产品添加到购物车。 [GitHub-14486](https://github.com/magento/magento2/issues/14486)

### 常规修复

<!-- MC-36048-->

* 对管理员（**商店** > **属性** > **产品**）上的产品进行排序现在会显示符合您的搜索条件的所有产品。 以前，应用程序不显示记录，要排序记录，您必须导航到搜索结果的第一页。

<!-- MC-36343-->

* `tracking.phtml`中URL周围不必要的引号和转义已被删除。

<!-- MC-35998-->

* 现在，当用户尝试访问静态目录下的非现有资源文件并启用SCD OnDemand和生产模式时，`var/log/system.log`会显示更准确的消息。 应用程序现在记录404错误。 以前，应用程序会记录当开发人员模式中出现错误时所记录的相同消息。

<!-- ENGCOM-7286-->

* JavaScript缩小功能现在可以正常使用。 缩小文件解析程序不再将变量泄露到全局范围。 以前，窗口下的`ctx`、`origNameToUrl`和`baseUrl`变量被泄漏。 _Mateusz Krzeszowiak在拉取请求[中提交的修复27622](https://github.com/magento/magento2/pull/27622)_。 [GitHub-28110](https://github.com/magento/magento2/issues/28110)

<!-- ENGCOM-7532-->

* 在调试阻止创建对象的错误时，应用程序现在会打印并记录原始异常消息。 以前，仅记录消息。 _Marvin Hinz在拉取请求[中提交的修复26572](https://github.com/magento/magento2/pull/26572)_。 [GitHub-26550](https://github.com/magento/magento2/issues/26550)

<!-- ENGCOM-7577-->

* 提交数据库更改后的回调执行已得到改进。 以前，如果一个回调失败并出现异常，则所有回调都会失败。 _Alok Patel在拉取请求[中提交的修复27134](https://github.com/magento/magento2/pull/27134)_。 [GitHub-28167](https://github.com/magento/magento2/issues/28167)

<!-- ENGCOM-7447-->

* 未定义依赖项的模块的Mixin不再引发此错误：`TypeError: Cannot read property 'map' of null`。 _Mateusz Krzeszowiak在拉取请求[中提交的修复27690](https://github.com/magento/magento2/pull/27690)_。 [GitHub-28340](https://github.com/magento/magento2/issues/28340)

<!-- ENGCOM-7299-->

* 现在仅在`localStorage`或`sessionStorage`不可用时才加载和应用存储Polyfill。 _Mateusz Krzeszowiak在拉取请求[中提交的修复27619](https://github.com/magento/magento2/pull/27619)_。 [GitHub-28381](https://github.com/magento/magento2/issues/28381)

<!-- ENGCOM-7610-->

* 现在，当购物者从第二个或后续结果页面更改每页显示的结果数时，多页店面订单列表会按预期运行。 以前，当购物者更改&#x200B;**我的帐户** > **我的订单**&#x200B;列表中显示的搜索结果数时，应用程序会显示此错误： `You have placed no orders`。 _Vadim Malesh在拉取请求[中提交的修复28417](https://github.com/magento/magento2/pull/28417)_。 [GitHub-28488](https://github.com/magento/magento2/issues/28488)

<!-- ENGCOM-7565-->

* 已弃用的`addWarning`方法已在安全模块中被替换为`addWarningMessage`方法。 _由kishorekumarkesavan在拉取请求[中提交的修复28264](https://github.com/magento/magento2/pull/28264)_。 [GitHub-28308](https://github.com/magento/magento2/issues/28308)

<!-- ENGCOM-7588-->

* 使用`bin/magento`命令行命令生成的代码现在符合要求和编码标准。 Lukasz Bajsarowicz在拉取请求&#x200B;_中提交的[修复28351](https://github.com/magento/magento2/pull/28351)_。 [GitHub-28376](https://github.com/magento/magento2/issues/28376)

<!-- ENGCOM-7511-->

* 保存具有`backend_type = static`的属性时，不再删除`frontend_class`字段的内容。 _由jiten-patel在拉取请求[中提交的修复27369](https://github.com/magento/magento2/pull/27369)_。 [GitHub-27051](https://github.com/magento/magento2/issues/27051)

<!-- ENGCOM-7462-->

* 已从主题加载的文件中删除不必要的代码和`responsive.js`。 _Mateusz Krzeszowiak在拉取请求[中提交的修复27617](https://github.com/magento/magento2/pull/27617)_。 [GitHub-28811](https://github.com/magento/magento2/issues/28811)

<!-- ENGCOM-7856-->

* 验证已添加到管理员CAPTCHA配置页面上的&#x200B;**符号数**&#x200B;字段中。 _Eden Duong在拉取请求[中提交的修复29199](https://github.com/magento/magento2/pull/29199)_。 [GitHub-29198](https://github.com/magento/magento2/issues/29198)

<!-- ENGCOM-7999-->

* RSS馈送现在可以正确加载。 以前，馈送不会首次加载，但在刷新页面时会按预期加载。 _Vadim Malesh在拉取请求[中提交的修复29455](https://github.com/magento/magento2/pull/29455)_。 [GitHub-25211](https://github.com/magento/magento2/issues/25211)

<!-- MC-35550-->

* 当购物者重新登录时，已过期的永久会话现在会按预期续订。

<!-- MC-35230-->

* 现在遵循&#x200B;**存储** > **配置** > **高级** > **管理员**&#x200B;中设置的密码生命周期。 以前，如果您单击&#x200B;**忘记密码？**&#x200B;当提示您重置密码时，您可以绕过密码重置。

<!-- MC-34369-->

* 优惠券代码现在仅适用于指定的产品。 以前，该应用程序将优惠券代码应用于购物车中的所有产品。 [GitHub-28246](https://github.com/magento/magento2/issues/28246)

<!-- MC-35008-->

* 在库存或价格更新发生时，购物车到期设置不再重新设置。 以前，当购物车设置为在24小时后过期，并且发生库存更新或价格更新时，索引器会填充`updated_at table`，从而重新设置过期时间。

<!-- MC-33313-->

* 当管理员将具有活动购物车的客户分配给客户组时，应用程序不再引发致命错误。

<!-- ENGCOM-7834 -->

* 在运行Chrome浏览器时，从产品页面上的&#x200B;**开发人员工具** > **网络**&#x200B;中选择工具栏选项不再初始化`toolbar.js`两次。 _Pawel Tylek在拉取请求[中提交的修复28838](https://github.com/magento/magento2/pull/28838)_。 [GitHub-25934](https://github.com/magento/magento2/issues/25934)

<!-- ENGCOM-7420-->

* 该应用程序现在将管理员用户的ACL角色ID添加到产品类别树缓存ID。 这将限制范围有限的管理员可按预期看到的类别树。 _由quangdo-aligent在拉取请求[中提交的修复27429](https://github.com/magento/magento2/pull/27429)_。 [GitHub-28306](https://github.com/magento/magento2/issues/28306)

### GraphQL

<!-- ENGCOM-7661 7662 7559 MC-35646 32345-->

* 购物者可以在结账时选择礼品消息选项。 GraphQL现在包含适用于各种购物车商品的礼品消息选项。 查看[`setGiftOptionsOnCart`突变](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/set-gift-options/)和[`updateCartItems`突变](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/update-items/)。 Oleh Usik在拉取请求[28519](https://github.com/magento/magento2/pull/28105)、[27956](https://github.com/magento/magento2/pull/27956)、[28072](https://github.com/magento/magento2/pull/28072)、[28072](https://github.com/magento/magento2/pull/28072)中提交的修复(_F)。 [GitHub-28519](https://github.com/magento/magento2/issues/28519)

<!-- ENGCOM-7508 -->

* 客户和来宾可以撰写产品评论。 客户还可以检索其产品审阅历史记录。 有关检索有关审阅基础结构的信息，请参阅[创建产品审阅](https://developer.adobe.com/commerce/webapi/graphql/schema/products/mutations/create-review/)和[productReviewRatingsMetadata查询](https://developer.adobe.com/commerce/webapi/graphql/schema/products/queries/product-review-ratings-metadata/)。 _Eduard Chitoraga在拉取请求[中提交的修复27882](https://github.com/magento/magento2/pull/27882)_。 [GitHub-28523](https://github.com/magento/magento2/issues/28523)

<!-- ENGCOM-7968 -->

* [`addProductsToCart`突变](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/add-products/)允许您向活动购物车添加任何类型的产品。 我们建议使用此突变而不是单用途突变，如`addSimpleProductsToCart`。 _由Yaroslav Rogoza在拉取请求[中提交的修复27914](https://github.com/magento/magento2/pull/27914)_。 [GitHub-28524](https://github.com/magento/magento2/issues/28524)

<!-- MC-34187-->

* 新的`availableStores`查询返回同一网站下多个可用存储（基于当前存储）的配置属性列表。 它不会公开网站列表。 查看[`availableStores`查询](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/available-stores/)。 _Dmitriy Gallyamov在拉取请求[中提交的修复28794](https://github.com/magento/magento2/pull/28794)_。 [GitHub-28569](https://github.com/magento/magento2/issues/28569)

<!-- ENGCOM-7512 -->

* GraphQL现在仅使用授权令牌来检索某种类型的用户及其ID。 以前，当授权令牌为空时，GraphQL使用活动客户的Cookie检索此信息。 _Alexander Taranovsky在拉取请求[中提交的修复27373](https://github.com/magento/magento2/pull/27373)_。 [GitHub-28040](https://github.com/magento/magento2/issues/28040)

<!-- ENGCOM-7839 32949-->

* 我们已添加[`createCustomerV2`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/create-v2/)和[`updateCustomerV2`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/update-v2/)突变来管理客户帐户。 这些新的突变需要与`createCustomer`和`updateCustomer`突变不同的输入对象。 若要更改客户的电子邮件地址，请使用新的[`updateCustomerEmail`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/update-email/)突变。 _由Michal Derlatka在拉取请求[中提交的修复28888](https://github.com/magento/magento2/pull/28888)_。 [GitHub-28570](https://github.com/magento/magento2/issues/28570)

<!-- ENGCOM-7750 -->

* `updateCustomer`突变不再允许您在`INT`参数中设置无效的`gender`值。 _Alexander Taranovsky在拉取请求[中提交的修复28487](https://github.com/magento/magento2/pull/28487)_。 [GitHub-28481](https://github.com/magento/magento2/issues/28481)

<!-- ENGCOM-7663 -->

* 您可以使用`subscribeEmailToNewsletter`突变使客户订阅新闻稿。 查看[`subscribeEmailToNewsletter`突变](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/subscribe-email-to-newsletter/)。 _Alexander Taranovsky在拉取请求[中提交的修复27586](https://github.com/magento/magento2/pull/27586)_。 [GitHub-27337](https://github.com/magento/magento2/issues/27337)

<!-- ENGCOM-7216 -->

* 删除了`setShippingMethodsOnCart`突变解析程序中的冗余逻辑。 _Alexander Taranovsky在拉取请求[中提交的修复27349](https://github.com/magento/magento2/pull/27349)_。 [GitHub-28262](https://github.com/magento/magento2/issues/28262)

<!-- ENGCOM-7638 -->

* 为与`Please provide Email of sender`突变相关的`sendEmailToFriend`错误添加了测试覆盖率。 _Alexander Taranovsky在拉取请求[中提交的修复28034](https://github.com/magento/magento2/pull/28034)_。 [GitHub-28138](https://github.com/magento/magento2/issues/28138)

<!-- ENGCOM-7743 34485-->

* `products`查询现在会按预期返回默认商店视图的产品属性选项标签。 以前，此查询返回为管理员设置的产品属性选项标签。 _Dmitriy Gallyamov在拉取请求[中提交的修复28647](https://github.com/magento/magento2/pull/28647)_。 [GitHub-28568](https://github.com/magento/magento2/issues/28568)

<!-- ENGCOM-7743 -->

* 自定义属性聚合现在返回特定于存储的选项值。 _Dmitriy Gallyamov在拉取请求[中提交的修复28647](https://github.com/magento/magento2/pull/28647)_。 [GitHub-28572](https://github.com/magento/magento2/issues/28572)

<!-- ENGCOM-7707 -->

* 在产品汇总中返回的价格间隔现在只能为数字（不允许使用通配符）。 _Dmitriy Gallyamov在拉取请求[中提交的修复28745](https://github.com/magento/magento2/pull/28745)_。 [GitHub-28628](https://github.com/magento/magento2/issues/28628)

<!-- ENGCOM-7729 -->

* 现在，使用片段时，`categoryList`查询返回正确的响应。 _Ulzii在拉取请求[中提交的修复28710](https://github.com/magento/magento2/pull/28710)_。 [GitHub-28584](https://github.com/magento/magento2/issues/28584)

<!-- ENGCOM-7732 7733-->

* GraphQL产品搜索现在会考虑已配置的类别权限。 以前，产品搜索忽略了&#x200B;**启用**&#x200B;设置（**商店** > **配置** > **目录** > **目录** > **类别权限**）。 _修复由Petkovski Marjan在拉取请求[28757](https://github.com/magento/magento2/pull/28757)中提交，在私有存储库`partners-magento2ee`_&#x200B;中提交拉取请求271。 [GitHub-28563](https://github.com/magento/magento2/issues/28563)

<!-- MC-31084-->

* 当购物车中的其他商品缺货时，您现在可以使用`addSimpleProductToCart`将产品添加到购物车中。 以前，应用程序返回此错误： `Some of the products are out of stock`。 [GitHub-26683](https://github.com/magento/magento2/issues/26683)

* 默认的GraphQL `Category`方法现在按预期的类别位置排序。 _由Derrik Nyomo在拉取请求[中提交的修复29301](https://github.com/magento/magento2/pull/29301)_。 [GitHub-104](https://github.com/magento/catalog-storefront/issues/104)

* 在Magento Open Source中添加了对愿望清单的支持。 您可以[将项目](https://developer.adobe.com/commerce/webapi/graphql/schema/wishlist/mutations/add-products/)添加至，[在其中更新项目](https://developer.adobe.com/commerce/webapi/graphql/schema/wishlist/mutations/update-products/)，以及[从愿望清单中删除项目](https://developer.adobe.com/commerce/webapi/graphql/schema/wishlist/mutations/remove-products/)。 _Eduard Chitoraga在拉取请求[中提交的修复28205](https://github.com/magento/magento2/pull/28205)_。 [GitHub-28551](https://github.com/magento/magento2/issues/28551)

* 我们已添加[`createCustomerV2`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/create-v2/)和[`updateCustomerV2`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/update-v2/)突变来管理客户帐户。 这些新的突变需要与`createCustomer`和`updateCustomer`突变不同的输入对象。 若要更改客户的电子邮件地址，请使用新的[`updateCustomerEmail`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/update-email/)突变。

* 为[Payflow Pro Vault](https://developer.adobe.com/commerce/webapi/graphql/payment-methods/payflow-pro-vault/)付款方法添加了GraphQL Vault支持。 _Oleh Usik在拉取请求[中提交的修复28821](https://github.com/magento/magento2/pull/28821)_。 [GitHub-28520](https://github.com/magento/magento2/issues/28520)

* 已更新GraphQL [`storeConfig`查询](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/)以包含新的客户配置设置。 _Oleh Usik在拉取请求[中提交的修复27876](https://github.com/magento/magento2/pull/27876)_。 [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* 添加了[`resetPassword`突变](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/reset-password/)。 _Oleh Usik在拉取请求[中提交的修复27876](https://github.com/magento/magento2/pull/27876)_。 [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* 添加了[`resetPassword`突变](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/reset-password/)。 _Oleh Usik在拉取请求[中提交的修复27876](https://github.com/magento/magento2/pull/27876)_。 [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* 添加了[`requestPasswordResetEmail`突变](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/request-password-reset-email/)，这会触发所提供电子邮件地址的密码重置电子邮件。 _Oleh Usik在拉取请求[中提交的修复27876](https://github.com/magento/magento2/pull/27876)_。 [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* 在[Klarna的付款方式](https://developer.adobe.com/commerce/webapi/graphql/payment-methods/klarna/)和[`createKlarnaPaymentsSession`](https://developer.adobe.com/commerce/webapi/graphql/schema/checkout/mutations/create-klarna-payments-session/)中添加或更新了关于Klarna GraphQL的主题

### 图像

<!-- ENGCOM-7691-->

* 缩略图图像的HTML标记已得到改进。 _Tu Nguyen在拉取请求[中提交的修复28642](https://github.com/magento/magento2/pull/28642)_。 [GitHub-29468](https://github.com/magento/magento2/issues/29468)

### 导入/导出

<!-- MC-35479-->

* `error_report.csv`文件现在下载时包含内容，可按预期在`var/import_history/`目录中找到。 以前，导入后不会生成此文件。

<!-- ENGCOM-7616-->

* 使用CSV文件导入产品时，现在会按预期生成`error_report.csv`文件。 以前，应用程序生成文件，但在导入完成后将其删除。 _Vadim Malesh在拉取请求[中提交的修复28460](https://github.com/magento/magento2/pull/28460)_。 [GitHub-28420](https://github.com/magento/magento2/issues/28420)

<!-- ENGCOM-7673-->

* 删除了整个代码库中的冗余类导入。 _Oleh Usik在拉取请求[中提交的修复28696](https://github.com/magento/magento2/pull/28696)_。 [GitHub-29012](https://github.com/magento/magento2/issues/29012)

<!-- MC-33730-->

* 现在，对于未定义地区的国家/地区，该应用程序可成功导入包含地区的客户地址。 以前，应用程序引发此错误： `Please enter a valid region`。

<!-- MC-33277-->

* 现在，当商家在计划新导出时选择实体类型时，应用程序会加载正确的实体属性集。

<!-- MC-32956-->

* 当管理员在管理员中创建产品并将其分配给类别时，`catalog_category_product`表中产品的位置现在会按预期更新。 以前，新产品的位置始终被指定为0值。

<!-- MC-34939-->

* 现在，已成功从管理员中导出客户数据，导出数据网格会按预期显示客户数据。 以前，在导出期间发生与内存分配相关的错误。

<!-- MC-34657-->

* 导入的CSV文件现在会按预期捕获相关的产品信息。 以前，在首次导入CSV文件时，相关的产品信息上传不一致。

<!-- MC-37424-->

* 删除了`AdvancedPricing.php`中未使用的构造参数。 [GitHub-29531](https://github.com/magento/magento2/issues/29531)

### 索引

<!-- ENGCOM-7073-->

* 在执行`Magento_CacheInvalidate`时，`PURGE`现在可以正确处理大型标记模式。 `sendPurgeRequest`已重构为处理标记数组，而不是要求调用方使用`implode()`。 由Matthew O&#39;Loughlin在拉取请求&#x200B;_中提交的[修复26256](https://github.com/magento/magento2/pull/26256)_。 [GitHub-26255](https://github.com/magento/magento2/issues/26255)

<!-- MC-30568-->

* 重新索引后运行&#x200B;**后，共享索引器现在显示**&#x200B;有效`bin/magento indexer:status`状态。 以前，共享索引器在完全重新索引后处于&#x200B;**无效**&#x200B;状态。

### 基础架构

<!-- MC-37243-->

* 在运行PHP 7.4.9的部署中加载目录和产品页时不再出现问题。 以前，当您尝试加载目录和产品页面时，应用程序会引发此错误： `There has been an error processing your request. Exception printing is disabled by default for security reasons`。 [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-7994-->

* 在生产模式下呈现布局时发生的所有异常现在都记录在异常日志文件(`var/report`)中。 以前，应用程序会在系统日志中将这些消息记录为严重问题。

<!-- ENGCOM-7154-->

* 由于将`ipcre.backtrack_limi`t和`pcre.recursion_limit`增加到大约1000000，因此正则表达式现在可以正确用于大型页面。 _Mateusz Krzeszowiak在拉取请求[中提交的修复27270](https://github.com/magento/magento2/pull/27270)_。 [GitHub-26026](https://github.com/magento/magento2/issues/26026)

<!-- ENGCOM-7483-->

* 改进了拦截器的生成。 已从侦听器删除`} else {`语句，`array_map`已替换`foreach`。 Lukasz Bajsarowicz在拉取请求&#x200B;_中提交的[修复27902](https://github.com/magento/magento2/pull/27902)_。 [GitHub-28383](https://github.com/magento/magento2/issues/28383)

<!-- ENGCOM-7651-->

* 现在，整个类(`app/code/Magento/Sales/Model/Order/Pdf/Items/Invoice/DefaultInvoice.php`)中的数组创建过程是一致的。 _Nathan de Graaf在拉取请求[中提交的修复28515](https://github.com/magento/magento2/pull/28515)_。 [GitHub-28795](https://github.com/magento/magento2/issues/28795)

<!-- ENGCOM-7484-->

* 插件已迁移出框架，以遵循在框架命名空间中禁止插件的最佳实践。 Lukasz Bajsarowicz在拉取请求&#x200B;_中提交的[修复27965](https://github.com/magento/magento2/pull/27965)_。 [GitHub-27962](https://github.com/magento/magento2/issues/27962)

<!-- ENGCOM-7778-->

* 您现在可以使用新的`UrlFilterApplier`组件通过GET URL参数在产品、`cms_page`和`cms_block`网格上应用筛选器。 _由Gabriel da Gama在拉取请求[中提交的修复28932](https://github.com/magento/magento2/pull/28932)_。 [GitHub-1501](https://github.com/magento/adobe-stock-integration/issues/1501)

<!-- ENGCOM-7713-->

* 生成侦听器时，应用程序不再引发`Undefined class constant`错误。 Vova Yatsyuk在拉取请求&#x200B;_28797[&#128279;](https://github.com/magento/magento2/pull/28797)中提交的_&#x200B;修复。 [GitHub-28981](https://github.com/magento/magento2/issues/28981)

<!-- ENGCOM-7523-->

* 现在，当您使用已使用的名称保存集成时，如果应用程序引发集成异常，则表单数据会持续存在。 由Aditya Yadav在拉取请求&#x200B;_中提交的[修复26660](https://github.com/magento/magento2/pull/26660)_。 [GitHub-28143](https://github.com/magento/magento2/issues/28143)

<!-- ENGCOM-7756-->

* 应用程序不再将`X-Forwarded-For`标头截断为32个字符。 _由Ihor Sviziev在拉取请求[中提交的修复27221](https://github.com/magento/magento2/pull/27221)_。 [GitHub-28693](https://github.com/magento/magento2/issues/28693)

<!-- ENGCOM-7820-->

* 现在，使用自定义管理域时，用于检查重定向是否为内部的逻辑可在管理中正常工作。 以前，此逻辑的问题会导致许多管理员重定向到默认存储的主页。 _Vadim Malesh在拉取请求[中提交的修复29066](https://github.com/magento/magento2/pull/29066)_。 [GitHub-28943](https://github.com/magento/magento2/issues/28943)

<!-- ENGCOM-7758-->

* 已消除`styles-old.less`文件的问题，并且Linting不再标识错误。 _Tu Nguyen在拉取请求[中提交的修复28895](https://github.com/magento/magento2/pull/28895)_。 [GitHub-24004](https://github.com/magento/magento2/issues/24004)

<!-- ENGCOM-7781-->

* `NonComposerComponentRegistration.php`已重构。 _Vitaliy Ryaboy在拉取请求[中提交的修复28975](https://github.com/magento/magento2/pull/28975)_。 [GitHub-29308](https://github.com/magento/magento2/issues/29308)

<!-- ENGCOM-7926-->

* `ResourceConnection.php`已重构以提高类可读性。 Lukasz Bajsarowicz在拉取请求&#x200B;_中提交的[修复29341](https://github.com/magento/magento2/pull/29341)_。 [GitHub-29389](https://github.com/magento/magento2/issues/29389)

<!-- ENGCOM-7910-->

* 内置Web服务器的自述文件已更新为包含所有Elasticsearch参数。 由Yevhenii Dumskyi在拉取请求&#x200B;_中提交的[修复29300](https://github.com/magento/magento2/pull/29300)_。 [GitHub-29299](https://github.com/magento/magento2/issues/29299)

<!-- ENGCOM-7814-->

* `Magento\CmsUrlRewrite\Plugin\Cms\Model\Store\View::aftersSave`插件现在会按预期返回一个值。 以前，此插件不会返回值，因此，保存存储视图会导致错误。 _Pieter Hoste在拉取请求[中提交的修复29035](https://github.com/magento/magento2/pull/29035)_。 [GitHub-29034](https://github.com/magento/magento2/issues/29034)

<!-- ENGCOM-7566-->

* 为`DataObject`添加了以下对魔术方法的支持：

   * 新扩展支持`get/set/has/uns`魔术方法（使用`__call`）
   * 支持SessionManager，它将所有调用转发到DataObject容器
   * 扩展的测试覆盖率
   * 更新了筛选错误检查测试
   * 将PHPStan检查级别从0增加到1。 Oleksandr Kravchuk在拉取请求&#x200B;_中提交的[修复27905](https://github.com/magento/magento2/pull/27905)_。 [GitHub-28303](https://github.com/magento/magento2/issues/28303)

<!-- ENGCOM-7906-->

* `ScopeConfigInterface`现在可以不只是一个字符串。 将`magentoConfigFixture`限制为仅字符串是上一拉取请求的不慎结果，该限制已被还原。 _由Fooman的Kristof在拉取请求[中提交的修复29305](https://github.com/magento/magento2/pull/29305)_。 [GitHub-29345](https://github.com/magento/magento2/issues/29345)

<!-- ENGCOM-8000-->

* 由于向`convertConfigTimeToUtc`构造函数发送了错误的参数，`Phrase`方法不再引发致命错误。 _Kos Rafal在拉取请求[中提交的修复29483](https://github.com/magento/magento2/pull/29483)_。 [GitHub-29525](https://github.com/magento/magento2/issues/29525)

<!-- ENGCOM-7962 -->

* 当`Magento\Backend\Block\Widget\Grid\Column\Filter\Price::getCondition`和`Magento\Backend\Block\Widget\Grid\Column\Filter\Price::getValue()`返回的数组具有包含`from`或`to`字符串数据的索引时，价格筛选器现在可以按预期对网格数据起作用。 以前，应用程序引发此错误： `Notice: A non well formed numeric value encountered in vendor/magento/module-backend/Block/Widget/Grid/Column/Filter/Price.php on line 197`。 _Nikita Sarychev在拉取请求[中提交的修复29214](https://github.com/magento/magento2/pull/29214)_。 [GitHub-29213](https://github.com/magento/magento2/issues/29213)

<!-- ENGCOM-7911 -->

* 添加了扩展点，以支持将HTML添加到类别页面。 这样可更正上一个拉取请求所导致的错误。 _由iGerchak在拉取请求[中提交的修复29291](https://github.com/magento/magento2/pull/29291)_。 [GitHub-29286](https://github.com/magento/magento2/issues/29286)

### 分层导航

<!-- MC-25043-->

* 分层导航侧边栏现在显示具有两个选项(**yes**/**no**)和匹配产品计数的布尔属性。 以前，使用Elasticsearch的部署中，分层导航不返回布尔属性的&#x200B;**no**&#x200B;选项。

<!-- ENGCOM-7493-->

* 样本分层导航过滤器现在与整个Magento Open Source中使用的标准过滤器一致。 _Bartlomiej Szubert在拉取请求[中提交的修复28015](https://github.com/magento/magento2/pull/28015)_。 [GitHub-28011](https://github.com/magento/magento2/issues/28011)

### 记录

<!-- ENGCOM-7692-->

* 现在，当部署仅处于开发人员模式时，会记录所有损坏的引用错误。 以前，在生产模式下也会为部署记录一个错误，这会使错误日志臃肿。 _Bartlomiej Szubert在拉取请求[中提交的修复28735](https://github.com/magento/magento2/pull/28735)_。 [GitHub-26504](https://github.com/magento/magento2/issues/26504)

### 媒体集

<!-- ENGCOM-8014-->

* 媒体集配置UI (管理员&#x200B;**存储** > **配置** >   **高级** > **系统** )已重新组织。 _由Shankar Konar在拉取请求[中提交的修复29433](https://github.com/magento/magento2/pull/29433)_。 [GitHub-28011](https://github.com/magento/adobe-stock-integration/issues/1738)

<!-- ENGCOM-7972 -->

* 添加了测试，以涵盖媒体集中图像的&#x200B;**用于**&#x200B;的链接。 _Nazar Klovanych在拉取请求[中提交的修复29392](https://github.com/magento/magento2/pull/29392)_。 [GitHub-1969](https://github.com/magento/adobe-stock-integration/issues/1693)

### MFTF

<!-- ENGCOM-7963 -->

* `AdminSubmitAdvancedInventoryFormActionGroup`、`AdminClickOnAdvancedInventoryLinkActionGroup`和  根据最佳实践，测试中使用了`AdminSetStockStatusConfigActionGroup`操作组。 _Oleh USIA在拉取请求[中提交的修复29386](https://github.com/magento/magento2/pull/29386)_。 [GitHub-29420](https://github.com/magento/magento2/issues/29420)

<!-- ENGCOM-7964 -->

* `SearchProductGridByKeywordActionGroup`现在用于产品网格中的搜索。 _Oleh Usik在拉取请求[中提交的修复29385](https://github.com/magento/magento2/pull/29385)_。 [GitHub-29434](https://github.com/magento/magento2/issues/29434)

<!-- ENGCOM-7915 -->

* `AdminCategoriesClickDoneButtonOnPopupActionGroup`现在用于在“搜索类别”弹出窗口中单击&#x200B;**完成**。 _Oleh Usik在拉取请求[中提交的修复28989](https://github.com/magento/magento2/pull/28989)_。 [GitHub-29380](https://github.com/magento/magento2/issues/29380)

<!-- ENGCOM-7529 -->

* `LoginToStorefrontActionGroup`现在用于替换用于存储前端客户登录的一系列操作。 _由Sathish Subramanian在拉取请求[中提交的修复28113](https://github.com/magento/magento2/pull/28113)_。 [GitHub-28165](https://github.com/magento/magento2/issues/28165)

<!-- ENGCOM-7590 -->

* `AdminUpdateCustomURLRewritesPermanentTest`已重构以符合MFTF最佳实践。 _Kate Kyzyma在拉取请求[中提交的修复28361](https://github.com/magento/magento2/pull/28361)_。 [GitHub-28393](https://github.com/magento/magento2/issues/28393)

<!-- ENGCOM-7343 -->

* 已更改测试名称以符合MFTF约定。 _Evgeny Levinsky在拉取请求[中提交的修复27839](https://github.com/magento/magento2/pull/27839)_。 [GitHub-28305](https://github.com/magento/magento2/issues/28305)

#### 新建操作组

<!-- ENGCOM-7991 -->

* `StorefrontCheckoutClickNextButtonActionGroup` _Oleh Usik在拉取请求[中提交的修复](https://github.com/magento/magento2/pull/29472)294724&rbrace;。_[GitHub-29539](https://github.com/magento/magento2/issues/29539)

<!-- ENGCOM-7857 -->

* `AdminProductFormSaveActionGroup`_Oleh Usik在拉取请求[中提交的修复29142](https://github.com/magento/magento2/pull/29142)_。 [GitHub-29292](https://github.com/magento/magento2/issues/29292)

<!-- ENGCOM-7928 -->

* `AdminSaveCategoryActionGroup` _Oleh Usik在拉取请求[中提交的修复](https://github.com/magento/magento2/pull/28993)289934&rbrace;。_[GitHub-29388](https://github.com/magento/magento2/issues/29388)

<!-- ENGCOM-7790 -->

* `AdminProductGridSectionClickFirstRowActionGroup` _Oleh Usik在拉取请求[中提交的修复](https://github.com/magento/magento2/pull/29000)290004&rbrace;。_[GitHub-29295](https://github.com/magento/magento2/issues/29295)

<!-- ENGCOM-7591 -->

* `AdminProductFormCategoryExistInCategoryListActionGroup`和`AdminProductFormCategoryNotExistInCategoryListActionGroup` _Alexander Steshuk在拉取请求[28287](https://github.com/magento/magento2/pull/28287)_&#x200B;中提交的修复。 [GitHub-28392](https://github.com/magento/magento2/issues/28392)

<!-- ENGCOM-7867 -->

* `AdminExpandCategoryTreeActionGroup` _Oleh Usik在拉取请求[中提交的修复](https://github.com/magento/magento2/pull/29133)291334&rbrace;。_[GitHub-29289](https://github.com/magento/magento2/issues/29289)

<!-- ENGCOM-7881 -->

* `AdminTaxRateGridOpenPageActionGroup` _Oleh Usik在拉取请求[中提交的修复](https://github.com/magento/magento2/pull/29007)290074&rbrace;。_[GitHub-29281](https://github.com/magento/magento2/issues/29281)

<!-- ENGCOM-7868 -->

* `AdminNavigateNewCustomerActionGroup` _Oleh Usik在拉取请求[中提交的修复](https://github.com/magento/magento2/pull/29134)291344&rbrace;。_[GitHub-29287](https://github.com/magento/magento2/issues/29287)

#### 新测试

<!-- ENGCOM-7600 -->

* 添加了对以管理员用户身份删除CMS页面的测试。 _Dmitry Tsymbal在拉取请求[中提交的修复28112](https://github.com/magento/magento2/pull/28112)_。 [GitHub-28202](https://github.com/magento/magento2/issues/28202)

* 添加了`StorefrontShareCustomerWishlistActionGroup`测试，用于客户希望列表与无效电子邮件地址共享。 已重构希望列表共享的现有测试(`StorefrontShareWishlistEntityTest`)。 `StorefrontCustomerShareWishlistActionGroup`已弃用。

<!-- ENGCOM-7682 -->

* 添加了测试，以检查&#x200B;**仅X剩余阈值**&#x200B;配置设置的实现。 _Oleh Usik在拉取请求[中提交的修复27549](https://github.com/magento/magento2/pull/27549)_。 [GitHub-28755](https://github.com/magento/magento2/issues/28755)

### 新闻稿

<!-- MC-34714-->

* 使用`EXCEL XML`选项导出新闻稿订阅者列表现在会按预期导出所有行。 以前，导出的数据仅包含页面分页值，而不包含所有行。

<!-- ENGCOM-7522-->

* 新闻稿订阅电子邮件现在使用与其他新闻稿相关电子邮件相同的HTML标记。 _Pawel Tylek在拉取请求[中提交的修复27357](https://github.com/magento/magento2/pull/27357)_。 [GitHub-28165](https://github.com/magento/magento2/issues/28165)

<!-- ENGCOM-7788-->

* 添加了将新闻稿订阅者作为管理员用户进行删除的测试。 _Dmitry Tsymbal在拉取请求[中提交的修复28972](https://github.com/magento/magento2/pull/28972)_。 [GitHub-29032](https://github.com/magento/magento2/issues/29032)

<!-- ENGCOM-7739-->

* 为配置语句中具有不允许选项的来宾添加了新闻稿订阅测试。 此测试将替换已弃用的`VerifyRegistredLinkDisplayedForGuestSubscriptionNoTest`和`StorefrontCreateNewSubscriberActionGroup`。 _Dmitry Tsymbal在拉取请求[中提交的修复28872](https://github.com/magento/magento2/pull/28872)_。 [GitHub-29039](https://github.com/magento/magento2/issues/29039)

### 订购

<!-- ENGCOM-7858-->

* `GetAssetIdByContentFieldInterface`及其在`MediaContent`模块上的实现现在允许Adobe Stock集成扩展`MediaGallery`筛选器功能。 _由Gabriel da Gama在拉取请求[中提交的修复29058](https://github.com/magento/magento2/pull/29058)_。 [GitHub-1464](https://github.com/magento/magento2/issues/1464)

<!-- ENGCOM-7885-->

* 新创建客户的`CustomerAddressId`值现在使用引号进行验证。 _由Andrii Kalinich在拉取请求[中提交的修复29139](https://github.com/magento/magento2/pull/29139)_。 [GitHub-28793](https://github.com/magento/magento2/issues/28793)

<!-- ENGCOM-7798-->

* 总金额为零的贷项通知单的订单状态为`Closed`。 以前，应用程序将其订单状态报告为`Complete`。 _由Andrii Kalinich在拉取请求[中提交的修复29023](https://github.com/magento/magento2/pull/29023)_。 [GitHub-22762](https://github.com/magento/magento2/issues/22762)

### 支付方式

<!-- MC-34363-->

* 应用程序现在显示一条消息，提示您输入强制性信用卡数据，在您单击管理员订单的&#x200B;**提交**&#x200B;时不会输入有效的付款信息。 以前，当付款输入字段无效且页面处于非活动状态时，Braintree卡验证器不会引发错误。

<!-- MC-33494-->

* 对于您从管理员中为帐户中存储了信用卡的客户(Braintree)创建的订单，您现在可以更改其配送方式。 以前，当您选择其他送货方法时，不会选择存储的卡，并且应用程序不会下订单。

#### PayPal

<!-- MC-33879-->

* 现在，结账工作流的“订单审核”页面通过Braintree订单显示PayPal的正确发运金额，在结账过程中发运方法已更改。 以前，当客户在结账工作流的“PayPal订单审核”页面上更改配送方式时，应用程序未使用正确的方法更新订单总额。

<!-- MC-34152-->

* 商家现在可以成功取消使用PayPal授权的订单。 以前，应用程序未取消订单并显示此错误： `Declined: 10601-Authorization has expired`。

<!-- MC-33330-->

* 当您通过先完成另一张订单后关闭PayPal付款弹出窗口来取消订单时，应用产品不再清空购物车。

### 性能

* 三个新的配置设置支持减少使用者队列CPU的使用量。 这些可选参数可增强对使用者的控制并节省服务器资源。 有关[、](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/)和`maxIdleTime`参数的说明，请参阅`sleep`配置消息队列`onlySpawnWhenMessageAvailable`。

<!-- MC-31617-->

* 现在在执行`di:compile`命令期间生成插件列表配置。 此配置信息会根据作用域写入生成的元数据文件夹。 以前，此信息存储在缓存中。 由此产生的性能改进包括：

   * 网络缓存大小已减小
   * 许多场景的执行时间已得到改进。

<!-- ENGCOM-7290-->

* 现在，应用程序可按需加载相应的滑块构件，从而改进了页面加载。 触控滑块构件自定义已移至单独的文件，因此只能在兼容设备上加载。 现在，仅当页面上实际使用了范围绑定时，才加载相应的滑块构件类型。 _Mateusz Krzeszowiak在拉取请求[中提交的修复27616](https://github.com/magento/magento2/pull/27616)_。 [GitHub-28807](https://github.com/magento/magento2/issues/28807)

<!-- MC-33107-->

* 提高了多订单同时结账的性能。

<!-- MC-25062-->

* 当导入进程执行批量插入且重新索引进程同时通过select执行大量插入时，不再发生死锁。 以前，应用程序显示此错误： `PDOException: SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock`。 [GitHub-8933](https://github.com/magento/magento2/issues/8933)

### 审核

<!-- MC-33405-->

* `entity_pk_value-entity_type-store_id`的唯一键已添加到`review_entity_summary`表中，这可防止为同一产品ID (`entity_pk_value`)创建重复行。 以前，由于缺少唯一键，导致同一产品ID出现重复行和SQL错误。

### 销售

<!-- MC-35675-->

* 在为需要零付款的订单开票后，应用产品不再分配`Complete`状态。

<!-- MC-35888-->

* 现在，由REST API生成的新发运电子邮件包含与从管理员手动创建的发运相同的发运和客户信息。 以前，此电子邮件不包含客户名称、跟踪信息、订购的产品和其他订单信息。

<!-- MC-35837-->

* 现在，当从管理员加载或自定义电子邮件时，来宾用户名会按预期显示在与发票和装运相关的电子邮件中。

<!-- MC-35707-->

* PDF发票现在已转换为下订单所在商店视图的语言。 以前，PDF发票是采用管理员的语言翻译的。

<!-- MC-35858-->

* 您现在可以从贷项通知单页面按预期发放退款。 [GitHub-29014](https://github.com/magento/magento2/issues/29014)

<!-- MC-35353-->

* 店面订单页面上显示的本地化区域名称现在可以正确翻译。 以前，区域名称不基于指定的区域设置，除非在管理员中对其进行编辑。

<!-- MC-35633-->

* 通过POST `/rest/V1/shipment`端点创建的装运现在可以正确更新订单。 以前，应用产品创建发运，但发运状态仍为处理状态。

<!-- ENGCOM-7639 -->

* 贷项通知单现在显示从发出订单的商店范围中推导出的付款方式。 以前，贷项通知单显示默认存储范围所定义的名称。 _由Ledian Hymetllari在拉取请求[中提交的修复27582](https://github.com/magento/magento2/pull/27582)_。 [GitHub-27570](https://github.com/magento/magento2/issues/27570)

### Search {#search-heading}

<!-- MC-31304-->

* 您现在可以使用QuickSearch从管理员客户视图中按属性搜索产品。 以前，目录搜索结果页面上发生异常。

<!-- MC-32518-->

* 现在，在添加产品属性后，应用程序会按预期在类别页面上显示可配置产品。

<!-- MC-33952-->

* Elasticsearch结果现在包含每个商店视图属性选项的正确值。 如果`Dropdown`或`Multiple Select`属性在非默认存储视图中的选项值与默认存储视图中的选项值不同，Elasticsearch现在会对该值进行索引或在结果中返回具有该值的产品。 以前，Elasticsearch不为该值编制索引，也不在结果中返回具有该值的产品。

<!-- MC-35013-->

* 现在，通过SKU搜索可按预期方式使用Elasticsearch进行高级搜索。 以前，当您尝试按SKU进行搜索时，应用程序会显示以下错误消息： `We can't find any items matching these search criteria. Modify your search`。

<!-- ENGCOM-7222-->

* 高级搜索不再允许购物者过滤负价格。 _Rohan Hapani在拉取请求[中提交的修复27359](https://github.com/magento/magento2/pull/27359)_。 [GitHub-27358](https://github.com/magento/magento2/issues/27358)

<!-- ENGCOM-7917-->

* 范围值现在在“新建同义词组”窗体中按预期重置。 _由Sathish Subramanian在拉取请求[中提交的修复29206](https://github.com/magento/magento2/pull/29206)_。 [GitHub-28947](https://github.com/magento/magento2/issues/28947)

### 配送

<!-- MC-34734-->

* 现在，升级后，该应用程序可正确计算装运表费率。 以前，发运表格费率是根据不含增值税的净价格计算的。

<!-- MC-33737-->

* 现在，对于将FedEx指定为发运方法的订单，应用产品会在结帐工作流中以正确的币种显示发运费率。

<!-- MC-33267-->

* 现在，UPS发运的订单的发运标签的多页PDF会显示正确的计数。

<!-- MC-35514-->

* “创建包”页面的JavaScript组件问题已得到解决。 以前，应用程序不在此页面上显示&#x200B;**创建送货标签**&#x200B;复选框，并且您无法为现有订单创建送货标签。

### Sitemap

<!-- ENGCOM-7924-->

* `robots.txt`中的站点地图现在特定于商店。 _Vadim Malesh在拉取请求[中提交的修复29331](https://github.com/magento/magento2/pull/29331)_。 [GitHub-28901](https://github.com/magento/magento2/issues/28901)

<!-- MC-34617-->

* 编码值现在在`sitemap.xml`文件中进行了正确转义。 以前，当您在产品名称或图像标题中包含编码字符时，生成的站点地图无效。

### 存储

<!-- MC-35853-->

* 删除以前创建的存储视图不会再导致使用拆分数据库配置的部署中出现错误。 以前，应用程序引发异常。

<!-- MC-32634-->

* 您现在可以从一个网站中导出`config.php`和默认网站代码，以便在多网站部署的第二个网站上安装和配置应用程序。 以前，默认存储和视图在导出后消失，店面发生错误。

### Swagger

<!-- ENGCOM-7720-->

* 您现在可以使用Swagger生成客户令牌。 以前，在输入有效的客户访问信息时，Swagger不会生成响应代码，应用程序会显示以下错误： `The account sign-in was incorrect or your account is disabled temporarily. Please wait and try again later`。 _Vadim Malesh在拉取请求[中提交的修复28822](https://github.com/magento/magento2/pull/28822)_。 [GitHub-27098](https://github.com/magento/magento2/issues/27098)

### 色板

<!-- ENGCOM-7845-->

* 现在，当购物者单击购物车中的&#x200B;**Edit**&#x200B;时，带色板的可配置产品会显示层定价。 以前，应用程序在结账前不会在购物车中显示分层价格。 _由Sathish Subramanian在拉取请求[中提交的修复29137](https://github.com/magento/magento2/pull/29137)_。 [GitHub-28270](https://github.com/magento/magento2/issues/28270)

<!-- MC-33147-->

* 应用程序现在可按预期显示可配置产品变体的层价格。

### 税金

<!-- MC-36049-->

* 商家从产品的属性集中取消分配产品后，应用产品不再在店面上显示产品的固定产品税属性。

### 测试

<!-- ENGCOM-7874-->

* 单元测试中已修复PHPUnit 9错误。 _Anton Evers在拉取请求[中提交的修复29244](https://github.com/magento/magento2/pull/29244)_。 [GitHub-29329](https://github.com/magento/magento2/issues/29329)

<!-- ENGCOM-7995-->

* 添加了用于批准使用已过期折扣发出的采购订单的单元测试，它将全额下单，而不会更新采购订单合计。 _Joan He在拉取请求[18](https://github.com/magento/partners-magento2-infrastructure/pull/18)_&#x200B;中提交的修复。 [GitHub-204](https://github.com/magento/partners-magento2b2b/issues/204)

<!-- ENGCOM-8003-->

* 集成测试现已涵盖`SynchronizeFilesInterface`。 _在拉取请求[29493](https://github.com/magento/magento2/pull/29493)_&#x200B;中由jmonteros422提交的修复。 [GitHub-1742](https://github.com/magento/magento2/issues/1742)

<!-- ENGCOM-8009-->

* 向`\Magento\TestFramework\TestCase\WebapiAbstract`添加了一个函数，该函数允许比较测试中预期结果和实际结果的大型嵌套数组，并允许测试者忽略实际结果中的无关键。 _Jekabs在拉取请求[中提交的修复29458](https://github.com/magento/magento2/pull/29458)_。 [GitHub-29498](https://github.com/magento/magento2/issues/29498)

<!-- ENGCOM-7887 -->

* 在`app/code/Magento/Newsletter/Test/Unit/Model/SubscriptionManagerTest.php`中修正了预期值与实际值的反转。 Lukasz Bajsarowicz在拉取请求&#x200B;_中提交的[修复29271](https://github.com/magento/magento2/pull/29271)_。 [GitHub-29283](https://github.com/magento/magento2/issues/29283)

<!-- ENGCOM-7142 -->

* 解决了在运行连续测试时静态属性的序列化和取消序列化问题。 _Pavel Bystritsky在拉取请求[中提交的修复26175](https://github.com/magento/magento2/pull/26175)_。 [GitHub-28319](https://github.com/magento/magento2/issues/28319)，[GitHub-29313](https://github.com/magento/magento2/issues/29313)

<!-- ENGCOM-7886 -->

* 在测试期间使用`ObjectManager`实例化类已被单元测试中的新关键字替换。 Lukasz Bajsarowicz在拉取请求&#x200B;_中提交的[修复29272](https://github.com/magento/magento2/pull/29272)_。 [GitHub-29346](https://github.com/magento/magento2/issues/29346)

<!-- ENGCOM-7593 -->

* 已为`updateCustomer`突变的以下情况添加测试覆盖率：出生日期无效、电子邮件地址无效和客户姓氏为空。 _Alexander Taranovsky在拉取请求[中提交的修复28304](https://github.com/magento/magento2/pull/28304)_。 [GitHub-28394](https://github.com/magento/magento2/issues/28394)

<!-- MC-30844-->

* `ApiFunctional TestFramework` GraphQL客户端现在可以正确解析标头。 [GitHub-26425](https://github.com/magento/magento2/issues/26425)

### 主题

<!-- MC-34397-->

* 现在，在运行`bin/magento catalog:images:resize`时，用户代理规则中添加的主题会按预期受到影响。 以前，运行`bin/magento catalog:images:resize`时，只会影响分配给商店的主题。

### 翻译和区域设置

<!-- MC-20372-->

* 当管理员在管理员产品创建期间更改&#x200B;**Date**&#x200B;字段或当管理员区域设置为中文或日文时保存该字段时，应用程序不再引发错误。 [GitHub-24696](https://github.com/magento/magento2/issues/24696)

<!-- ENGCOM-7829-->

* 应用程序现在在呈现内联翻译标记之前检查区域（前端或`adminhtml`）。 以前，在启用内联翻译时通过错误的凭据对`POST /V1/integration/admin/token`进行API调用会导致在API响应中包含有关错误消息的内联翻译标记。 _Zach Nanninga在拉取请求[中提交的修复28856](https://github.com/magento/magento2/pull/28856)_。 [GitHub-28656](https://github.com/magento/magento2/issues/28656)

<!-- ENGCOM-7536-->

* 保加利亚地区已添加到`directory_country_region`表。 _Nikola Lardev在拉取请求[中提交的修复27957](https://github.com/magento/magento2/pull/27957)_。 [GitHub-28215](https://github.com/magento/magento2/issues/28215)

<!-- ENGCOM-7535-->

* 现在可以翻译管理员&#x200B;**客户** > **添加新地址**&#x200B;和&#x200B;**编辑产品** > **高级库存**&#x200B;模型上的标题和按钮。 _由Sathish Subramanian在拉取请求[中提交的修复28174](https://github.com/magento/magento2/pull/28174)_。 [GitHub-28201](https://github.com/magento/magento2/issues/28201)

<!-- ENGCOM-7521-->

* 现在可以在管理员&#x200B;**商店** > **配置** > **销售** > **税** > **固定产品税**&#x200B;上翻译术语FPT。 _Vadim Malesh在拉取请求[中提交的修复28108](https://github.com/magento/magento2/pull/28108)_。 [GitHub-5477](https://github.com/magento/magento2/issues/5477)

<!-- ENGCOM-7631 -->

* 签出工作流送货地址模式上的&#x200B;**发货位置**&#x200B;按钮标签已更改，以匹配用于其他按钮的驼峰式大小写。 现在，此案例与翻译文件中使用的案例匹配。 以前，由于大小写不匹配，因此不翻译此标签。 _WK在拉取请求[中提交的修复28547](https://github.com/magento/magento2/pull/28547)_。 [GitHub-28685](https://github.com/magento/magento2/issues/28685)

### UI

<!-- ENGCOM-7514-->

* 现在，当显示“隐私和Cookie策略”页面时，页脚中的隐私和Cookie策略链接将显示为活动链接。 _由Sathish Subramanian在拉取请求[中提交的修复28004](https://github.com/magento/magento2/pull/28004)_。 [GitHub-27985](https://github.com/magento/magento2/issues/27985)

<!-- MC-36260-->

* 修复了与从管理员&#x200B;**销售** > **订单**&#x200B;中选择的订单关联的发票的“发票备注”文本区域中的光标未对齐问题。

<!-- MC-36044-->

* “创建新订单”页面现在会按预期显示&#x200B;**按SKU添加产品**&#x200B;和&#x200B;**添加产品**&#x200B;按钮。

<!-- MC-35974-->

* 当所选产品的产品评级可用时，应用程序现在会正确显示“编辑审阅”页面。

<!-- MC-35475-->

* 现在，该应用程序可在运行Safari的iPhone上正确显示“管理员客户编辑”页面。

<!-- MC-35370-->

* 更正了“创建新订单”页上不必要的滚动。

<!-- MC-35345-->

* 直接单击“添加新税则”页面的&#x200B;**导出税率**&#x200B;按钮（**商店** > **税则**），现在可按预期下载`tax_rates.csv`文件。 以前，商家必须单击&#x200B;**出口税率**&#x200B;按钮的边缘。 这是2.4.0中的一个已知问题。

<!-- MC-35313-->

* 购物车底部的&#x200B;**将选定内容添加到购物车**&#x200B;按钮现在可按预期工作。 这是2.4.0中的一个已知问题。

<!-- MC-35296-->

* 客户活动页面中&#x200B;**最近查看的产品**&#x200B;部分的&#x200B;**刷新**&#x200B;按钮现在可按预期工作。 以前，当您单击&#x200B;**刷新**&#x200B;时，产品列表不会刷新，页面会滚动。

<!-- MC-35412-->

* 应用程序现在可在&#x200B;**客户** > **区段** > **添加区段**&#x200B;的条件选项卡上正确显示用于选择客户出生日期的日历图标。

<!-- MC-35658-->

* 当购物者在Internet Explorer 11.x上滚动浏览此页面时，签出工作流的签出摘要部分不再闪烁。

<!-- MC-34602-->

* 现在，应用程序可在店面类别页面上正确显示“按SKU排序”构件。 以前，此构件的HTML代码未呈现，并且应用程序未显示&#x200B;**加载SKU列表**&#x200B;链接。

<!-- MC-37444-->

* 已使用`this.disabled(true)`禁用的UI组件不再出现在店面上。 [GitHub-29098](https://github.com/magento/magento2/issues/29098)

<!-- ENGCOM-7264-->

* 该应用程序现在可以在移动设备视图中正确显示最近查看过的产品小部件。 _Tu Nguyen在拉取请求[中提交的修复27572](https://github.com/magento/magento2/pull/27572)_。 [GitHub-27058](https://github.com/magento/magento2/issues/27058)

<!-- ENGCOM-7575-->

* 从管理员那里更改产品位置现在会反映在店面的产品位置中。 _Oleg Aleksin在拉取请求[中提交的修复28150](https://github.com/magento/magento2/pull/28150)_。 [GitHub-28149](https://github.com/magento/magento2/issues/28149)

<!-- ENGCOM-7507-->

* 登录表单样式现在与空白主题中其他表单上的样式一致。 删除了设置容器控件换行输入字段宽度的不必要样式。 _Tu Nguyen在拉取请求[中提交的修复28084](https://github.com/magento/magento2/pull/28084)_。 [GitHub-28059](https://github.com/magento/magento2/issues/28059)

<!-- ENGCOM-7578-->

* 微型购物车删除产品确认弹出窗口上的&#x200B;**确定**&#x200B;按钮现在按预期运行。 _Tu Nguyen在拉取请求[中提交的修复28083](https://github.com/magento/magento2/pull/28083)_。 [GitHub-27095](https://github.com/magento/magento2/issues/27095)

<!-- ENGCOM-7456-->

* 在页面加载过程中，产品库元素不再闪烁。 _Mateusz Krzeszowiak在拉取请求[中提交的修复27871](https://github.com/magento/magento2/pull/27871)_。 [GitHub-28339](https://github.com/magento/magento2/issues/28339)

<!-- ENGCOM-8007-->

* 控制字段宽度的CSS类现在按预期应用于整个Admin中的Start Time元素。 _由Shankar Konar在拉取请求[中提交的修复29511](https://github.com/magento/magento2/pull/29511)_。 [GitHub-29496](https://github.com/magento/magento2/issues/29496)

<!-- ENGCOM-7992-->

* 条款和条件文本标签现在可以正确显示较长的文本字符串。 _Bartlomiej Szubert在拉取请求[中提交的修复29413](https://github.com/magento/magento2/pull/29413)_。 [GitHub-24060](https://github.com/magento/magento2/issues/24060)

<!-- ENGCOM-7967-->

* 为准确起见，已重写订单失败页面的标题。 以前，当购物者取消订单时，应用程序会显示具有此标题的页面： `We received your order!`。 _Angelo Romano在拉取请求[中提交的修复29410](https://github.com/magento/magento2/pull/29410)_。 [GitHub-29416](https://github.com/magento/magento2/issues/29416)

<!-- ENGCOM-7770-->

* 现在，已取消订单查看页面上的已取消项目总数在已取消订单查看页面上可正确识别。 以前，此字段标记为&#x200B;**总到期时间**。 _Madhu Rajawat在拉取请求[中提交的修复27516](https://github.com/magento/magento2/pull/27516)_。 [GitHub-26191](https://github.com/magento/magento2/issues/26191)

<!-- ENGCOM-7579 -->

* 创建可配置产品页面上的切换按钮现在可按预期工作。 _Tu Nguyen在拉取请求[中提交的修复28032](https://github.com/magento/magento2/pull/28032)_。 [GitHub-22702](https://github.com/magento/magento2/issues/22702)

<!-- ENGCOM-7579 -->

* 现在，“高级属性属性”页面上的高级属性属性块图标会按预期运行。 _Tu Nguyen在拉取请求[中提交的修复28032](https://github.com/magento/magento2/pull/28032)_。 [GitHub-26022](https://github.com/magento/magento2/issues/26022)

<!-- ENGCOM-7619 -->

* 现在，当您尝试保存新模块的配置设置时，系统配置页面的“管理员”部分将展开以按预期显示必填字段。 _Bartlomiej Szubert在拉取请求[中提交的修复28285](https://github.com/magento/magento2/pull/28285)_。 [GitHub-26427](https://github.com/magento/magento2/issues/26427)

<!-- ENGCOM-7826 -->

* 更正了模式设置为`inside`时放大镜的行为。 _由Sean van Zuidam在拉取请求[中提交的修复29077](https://github.com/magento/magento2/pull/29077)_。 [GitHub-29076](https://github.com/magento/magento2/issues/29076)

<!-- ENGCOM-7010 -->

* 更正了购物者在页脚的subscribe字段中输入无效电子邮件地址时导致输入字段宽度过长且令人难以置信的问题。 _Dipesh Rangani在拉取请求[中提交的修复27106](https://github.com/magento/magento2/pull/27106)_。 [GitHub-27099](https://github.com/magento/magento2/issues/27099)

<!-- ENGCOM-7972 -->

* 添加新标记并将鼠标光标移动到其上时，`Uncaught ReferenceError`错误不再出现在开发控制台中。 _Nazar Klovanych在拉取请求[中提交的修复29392](https://github.com/magento/magento2/pull/29392)_。 [GitHub-1700](https://github.com/magento/magento2/issues/1700)

### URL重写

<!-- MC-34483-->

* 将商店视图移动到其他网站时，不再重置URL。 以前，应用程序错误地重新生成了CMS并重写了产品URL。

<!-- MC-33028-->

* 将存储视图分配给其他存储时，应用程序现在会按预期保留现有目录URL重写。 以前，应用程序删除了特定于存储的URL重写。

### 清漆

<!-- ENGCOM-7761-->

* 重新启动Varnish不再导致503错误。 _由Ihor Sviziev在拉取请求[中提交的修复28137](https://github.com/magento/magento2/pull/28137)_。 [GitHub-24353](https://github.com/magento/magento2/issues/24353)

### 保险库

<!-- MC-34674-->

* 如果未选中结帐工作流付款部分上的&#x200B;**保存以供以后使用**&#x200B;复选框，则应用程序不再保存信用卡号码。

### Web API框架

<!-- MC-35838-->

* 现在，具有多个网站的商家可以使用REST API创建和更新产品，同时保留图像和图像角色继承。 以前，当商家使用REST API创建和更新产品，并为商店视图更新产品时，将为该商店视图加载并保存默认图像角色。 因此，存储视图图像角色在更新后停止从默认范围继承。

<!-- MC-36419-->

* 当资源权限允许访问时，无作用域的集成用户帐户现在可以通过REST API访问资源。

<!-- MC-35975-->

* 现在，搜索标准筛选器可按预期适用于在创建可配置产品期间使用的产品属性。 [GitHub-29126](https://github.com/magento/magento2/issues/29126)

<!-- ENGCOM-7785 -->

* 现在已为POST `/rest/V1/customers`请求验证客户组ID。 以前，当您在这些请求中使用无效的`group_id`时，应用程序不显示错误消息。 _Vadim Malesh在拉取请求[中提交的修复28903](https://github.com/magento/magento2/pull/28903)_。 [GitHub-28064](https://github.com/magento/magento2/issues/28064)

<!-- ENGCOM-7611 -->

* 默认情况下，不会为匿名REST调用创建PHP会话。 以前，即使没有必要，也会启动会话。 _Maciej Pawlowski在拉取请求[中提交的修复26032](https://github.com/magento/magento2/pull/26032)_。 [GitHub-7213](https://github.com/magento/magento2/issues/7213)

<!-- ENGCOM-7612 -->

* 使用各种REST端点更新包含自定义选项的订单不再删除自定义选项信息。 以前，删除`info_buyRequest`中的值。 _Vadim Malesh在拉取请求[中提交的修复28483](https://github.com/magento/magento2/pull/28483)_。 [GitHub-22431](https://github.com/magento/magento2/issues/22431)

<!-- ENGCOM-7665 -->

* 在检索用户信息时，使用GET `V1/customers/me`现在遵循&#x200B;**共享客户帐户**&#x200B;设置（管理员&#x200B;**存储** > **配置** > **客户** > **客户配置** > **帐户共享选项**）。 _Pavel Bystritsky在拉取请求[中提交的修复28213](https://github.com/magento/magento2/pull/28213)_。 [GitHub-26089](https://github.com/magento/magento2/issues/26089)

<!-- ENGCOM-7563 -->

* 与地址相关的扩展属性可以设置为数据阵列。 以前，当包含的POST请求时，应用程序会引发错误  `extension_attributes`已发送至`estimate-shipping-methods`。 此错误由以前的提交引入，它影响了`Magento\Quote\Api\Data\AddressInterface`上任何不是对象的扩展属性集。 _Alexander Menk在拉取请求[中提交的修复27338](https://github.com/magento/magento2/pull/27338)_。 [GitHub-26682](https://github.com/magento/magento2/issues/26682)

<!-- ENGCOM-7618 -->

* 在使用PUT `V1/customers/:id`端点更新客户时，您现在可以指定单个字段。 以前，端点要求您指定客户电子邮件和创建客户所需的其他字段。 _Vadim Malesh在拉取请求[中提交的修复28332](https://github.com/magento/magento2/pull/28332)_。 [GitHub-21237](https://github.com/magento/magento2/issues/21237)

### 愿望清单

<!-- MC-35622-->

* 客户现在可以从愿望清单本身更改愿望清单中产品的数量。 以前，应用程序不更新产品数量，也不显示消息。

<!-- MC-35618-->

* 客户现在可以从愿望清单本身更改愿望清单中分组产品的数量。 以前，应用程序不更新产品数量或显示消息。

<!-- ENGCOM-7580-->

* 现在仅根据需要加载`Map`、`WeakMap`、`FormData`和`MutationObserver`的Polyfill。 _Dmitry Tsymbal在拉取请求[中提交的修复28330](https://github.com/magento/magento2/pull/28330)_。 [GitHub-28377](https://github.com/magento/magento2/issues/28377)

<!-- ENGCOM-7561-->

* 希望列表更新过程现在支持同时更新希望列表项及其描述。 _Eduard Chitoraga在拉取请求[中提交的修复28222](https://github.com/magento/magento2/pull/28222)_。 [GitHub-28261](https://github.com/magento/magento2/issues/28261)

<!-- ENGCOM-7660-->

* 添加了用于与超过允许数量的电子邮件共享客户愿望列表的测试。 _Dmitry Tsymbal在拉取请求[中提交的修复28641](https://github.com/magento/magento2/pull/28641)_。 [GitHub-28720](https://github.com/magento/magento2/issues/28720)

<!-- MC-36250-->

* 管理员现在可以配置已由客户从非默认存储添加到愿望清单的可配置产品。 以前，当客户还从非默认存储区添加了可配置产品时，应用程序会引发错误。

<!-- ENGCOM-7660-->

* 添加了用于与超过允许数量的电子邮件共享客户愿望列表的测试。 _Dmitry Tsymbal在拉取请求[中提交的修复28641](https://github.com/magento/magento2/pull/28641)_。 [GitHub-28720](https://github.com/magento/magento2/issues/28720)

<!-- ENGCOM-7674-->

* 添加了一项测试，用于以管理员用户身份从客户的愿望列表中删除项目。 _Dmitry Tsymbal在拉取请求[中提交的修复28632](https://github.com/magento/magento2/pull/28632)_。 [GitHub-28721](https://github.com/magento/magento2/issues/28721)

<!-- ENGCOM-7675-->

* 添加了禁用愿望清单功能的测试。 _Dmitry Tsymbal在拉取请求[中提交的修复28635](https://github.com/magento/magento2/pull/28635)_。 [GitHub-28744](https://github.com/magento/magento2/issues/28744)

<!-- ENGCOM-7580-->

* 添加了一项测试，说明在共享客户希望列表时使用无效的电子邮件地址。 `StorefrontShareWishlistEntityTest`已重构。 `StorefrontCustomerShareWishlistActionGroup`已弃用。 _Dmitry Tsymbal在拉取请求[中提交的修复28330](https://github.com/magento/magento2/pull/28330)_。 [GitHub-28377](https://github.com/magento/magento2/issues/28377)

<!-- ENGCOM-7717-->

* 添加了用于共享超出允许文本长度限制的客户愿望列表的测试。 _Dmitry Tsymbal在拉取请求[中提交的修复28812](https://github.com/magento/magento2/pull/28812)_。 [GitHub-28969](https://github.com/magento/magento2/issues/28969)

## 已知问题

**问题**：使用第三方支付提供商时，用于签出的新CAPTCHA功能在“下订单”页面上无法正常工作。 运行2.3.6或2.4.1并在“下单店面”页面上启用了CAPTCHA保护的商家在使用第三方支付提供商（如PayPal）结帐时将会看到此错误： `Please provide CAPTCHA code and try again`。 **解决方法**：此问题的修复程序现已可用。 请参阅签出中的[Magento Open Source v2.3.6/2.4.1 CAPTCHA不起作用](https://support.magento.com/hc/en-us/articles/360051235772)知识库文章。 我们的下一个季度修补程序(Q12021)中也将包含修补程序。

**问题**：没有管理员权限的用户当前无法设置其个人2FA访问权限。 2FA包括两个ACL角色。 一个角色会影响全局系统配置，仅在配置系统时才需要该角色。 第二个ACL角色影响单个用户2FA帐户。 管理员用户必须配置第二种类型的2FA ACL。 **解决方法**：用户登录并查看访问被拒绝屏幕后，可以访问`https://<magento store>/<admin_path>/tfa/tfa/requestconfig/`以强制配置。 注意：我们不建议禁用安全设置。 但是，只有在禁用管理员URL密钥时，此解决方法才有效。

**问题**：如果购物者输入的数据无效，则“新建帐户”页面上的&#x200B;**创建帐户**&#x200B;按钮将保持禁用状态。 这样可防止购物者在出错后重新尝试创建帐户。 **解决方法**：应用修补程序`MC-38509`。 我们的下一个季度版本（2.4.2、2.4.1-p1和2.3.6-p1）中也将包含修复，这些版本计划于2021年第1季度发布。 请参阅[2.4.1和2.3.6创建帐户按钮禁用了修补程序](https://support.magento.com/hc/en-us/articles/360051130212)知识库文章。  [GitHub-30513](https://github.com/magento/magento2/issues/30513)

**问题**：启用dotdigital后，商家无法从Safari中的管理员登录到dotdigital。 请参阅[启用dotdigital帐户后，无法通过admin面板登录dotdigital](https://support.magento.com/hc/en-us/articles/360050092291)知识库文章。

**问题**：当购物者选择与帐单地址不同的送货地址时，在付款期间顶点地址验证不起作用。 此问题将在2.4.2中修复。查看[2.4.1已知问题：更新地址](https://support.magento.com/hc/en-us/articles/360050139631)知识库文章后，顶点地址验证消息未消失。

**问题**：商家在Safari浏览器上保存dotdigital页面生成器表单时，应用程序显示空页面。 **解决方法**：重新加载页面以应用更改。 请参阅[2.4.1已知问题：保存dotdigital Page Builder表单](https://support.magento.com/hc/en-us/articles/360049819092)知识库文章后页面为空。

**问题**：在某些情况下，应用程序会自动将客户登录到以前使用的Amazon帐户，而不是提示他们在使用Amazon Pay结帐时登录。 请参阅[2.4.1已知问题：无法在Google Chrome](https://support.magento.com/hc/en-us/articles/360049814152)知识库文章中更改Amazon帐户。

**问题**：在选择PayPal Braintree付款和多地址装运时，应用程序会在结账工作流的帐单页面上短暂显示错误消息。 请参阅[2.4.1已知问题：使用PayPal Braintree结帐时出现错误](https://support.magento.com/hc/en-us/articles/360050253211)知识库文章。

**问题**：当访客客户尝试通过Braintree在PayPal下订单时，如果访客签出被禁用，则应用程序会显示一条非信息性错误消息。 请参阅[2.4.1已知问题：通过Braintree](https://support.magento.com/hc/en-us/articles/360050368111)知识库文章使用Paypal进行来宾结帐时出现非信息性错误消息。

## 社区贡献

我们感谢更广泛的Magento Open Source社区，并感谢他们为这一版本做出的贡献。 您可以通过以下方式了解社区对我们当前版本的贡献：

* 如果社区成员提供了此版本的修复，我们将在这些注释的“修复问题”部分中使用短语“*社区成员提供的修复*”来标识此修复。

* 社区工程团队[Magento参与者](https://magento.biterg.io/app/kibana)按月、季度、年维护了主要参与人员和合作伙伴的列表。 从该参与者页面，您可以单击链接以转到GitHub上其合并的PR。

### 合作伙伴投稿

下表列出了合作伙伴所做的贡献。 此表列出了提出拉取请求的合作伙伴、外部拉取请求以及与其关联的GitHub问题编号（如果可用）。

{{$include /help/_includes/release-notes/engcomm-2-4-1-partner.md}}

### 个人贡献者

下表列出了来自社区成员的贡献。 此表列出了外部拉取请求、与其关联的GitHub问题编号（如果可用）以及参与拉取请求的社区成员。

{{$include /help/_includes/release-notes/engcomm-2-4-1-issues.md}}

### 系统要求

我们的技术栈栈是基于PHP和MySQL构建的。 有关详细信息，请参阅[系统要求](../../../installation/system-requirements.md)。

### 安装和升级说明

您可以使用编辑器安装Magento Open Source 2.4.1。

## 迁移工具包

数据迁移工具有助于将现有Magento 1.x存储数据传输到Magento 2.x。此命令行界面包括验证、进度跟踪、日志记录和测试功能。 有关安装说明，请参阅[安装数据迁移工具](../../../tools/data-migration-tool/install.md)。 考虑浏览或参与[数据迁移存储库](https://github.com/magento/data-migration-tool)。

[代码迁移工具包](https://github.com/magento-commerce/code-migration)可帮助将现有Magento 1.x存储扩展和自定义项传输到Magento 2.x。命令行界面包括用于转换Magento 1.x模块和布局的脚本。
