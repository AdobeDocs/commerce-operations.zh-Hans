---
title: Adobe Commerce 2.4.4发行说明
description: 了解2.4.4 Adobe Commerce版本中的新增功能、增强功能、错误修复和已知问题。
exl-id: 03d68115-b847-4744-a989-8e16d8d80e45
source-git-commit: 95ffff39d82cc9027fa633dffedf15193040802d
workflow-type: tm+mt
source-wordcount: '12453'
ht-degree: 0%

---

# Adobe Commerce 2.4.4发行说明

Adobe Commerce 2.4.4引入了对PHP 8.1的支持。所有项目库和依赖项都已更新，以便与PHP 8.1兼容。核心编辑器依赖项和第三方库也已升级到与PHP 8.1兼容的最新版本。此版本还支持OpenSearch 1.2。

此版本包括近250项质量修复和增强功能。

>[!NOTE]
>
>感谢我们的合作伙伴 [Atwix](https://www.atwix.com/) 他们为使2.4.4框架与PHP 8.1兼容做出了重大贡献。

{{bics}}

## 应用 `AC-3022.patch` 继续提供DHL作为运输承运商

DHL已引入了架构版本6.2，并且将在不久的将来弃用架构版本6.0。 支持DHL集成的Adobe Commerce 2.4.4及更早版本仅支持版本6.0。部署这些版本的商家应适用 `AC-3022.patch` 尽早继续提供DHL作为运输承运商。 请参阅 [应用补丁以继续将DHL作为运输承运人](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) 知识库文章，了解有关下载和安装修补程序的信息。

## 其他发行信息

虽然这些功能的代码与Adobe Commerce核心代码的季度版本捆绑在一起，但其中几个项目(例如B2B、Page Builder和Progressive Web Application(PWA)Studio)也单独发布。 每个项目的文档中都提供了特定于项目的单独发行信息，其中记录了这些项目的错误修复。

>[!NOTE]
>
>除Braintree之外，所有供应商捆绑的扩展都已从Adobe Commerce 2.4.4中删除。

>[!NOTE]
>
>Composer 2.2引入了安全功能，该功能要求商家识别其网站中值得信赖的插件 `composer.json` 文件执行插件之前。 目前，包含在 `composer.json` 自动安装未标记为受信任的文件。 但是，从2022年7月起，Composer将不会加载插件，除非它们被明确允许。 请参阅 [升级到Adobe Commerce 2.4.4时，编辑器插件出现问题](https://support.magento.com/hc/en-us/articles/6215997614093-Composer-plugins-issues-when-upgrading-to-Adobe-Commerce-2-4-4) 有关如何修改 `composer.json` 文件，以明确允许加载插件。

### 此版本中包含的修补程序

Adobe Commerce 2.4.4包括针对Adobe Commerce和Magento Open Source2.4.3、2.4.3-p1和2.3.7-p2提供的以下修补程序解决的所有问题：

* 由解决的漏洞 `MDVA-43395_EE_2.4.3-p1_COMPOSER_v1.patch` 和 `MDVA-43443_EE_2.4.3-p1_COMPOSER_v1.patch` 已在此版本中解析。

* `AC-384_Fix_Incompatible_PHP_Method__2.4.3_ce.patch`. 该修补程序解决了在升级过程中发生的严重PHP错误。 请参阅 [Adobe Commerce升级2.4.3、2.3.7-p1 PHP致命错误修补程序](https://support.magento.com/hc/en-us/articles/4408021533069-Adobe-Commerce-upgrade-2-4-3-2-3-7-p1-PHP-Fatal-error-Hotfix) 知识库文章。

### 安装2.4.4后应用此修补程序

我们建议您在安装Adobe Commerce 2.4.4后应用以下修补程序：

* `braintree-disabled-partial-capture-for-applepay-googlepay.patch`.  商家无法提交通过Braintree使用Apple Pay支付的订单的部分退款。 当商家尝试从订单发票创建部分退款的贷项通知单时， **要退款的数量** 字段不可编辑。 此修补程序可解决该问题。 请参阅 [Adobe Commerce 2.4.4：无法创建部分发票](https://support.magento.com/hc/en-us/articles/4487952754957-Adobe-Commerce-2-4-4-Unable-to-create-partial-invoices) 知识库文章。  <!-- BUNDLE-3088-->

## Adobe Commerce 2.4.4亮点

在此版本中查找以下亮点。

### 安全性增强

此版本包括一项安全修复和平台安全改进。 此安全修补程序已回溯到Adobe Commerce 2.4.3-p2和Adobe Commerce 2.3.7-p3。

到目前为止，尚未发生任何与这些问题相关的已确认攻击。 但是，可能会攻击某些漏洞以访问客户信息或接管管理员会话。 这些问题中的大多数要求攻击者首先获得对管理员的访问权限。 因此，我们提醒您采取一切必要步骤保护您的管理员，包括但不限于以下工作：

* IP列入允许列表
* [双重身份验证](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)
* 使用VPN
* 使用唯一位置，而不是 `/admin`
* 良好的密码卫生

参见 [Adobe安全公告](https://helpx.adobe.com/security/products/magento/apsb22-13.html) ，以了解有关这些已修复问题的最新讨论。

#### 其他安全增强功能

此版本的安全改进改进了与最新安全最佳实践的符合性，包括：

* 在2.3.4中，作为安全风险缓解的一部分以支持更严格的变量语法，已弃用电子邮件变量用法。 此版本中作为安全风险缓解的继续，完全移除了此旧版行为。

   因此，在升级到Adobe Commerce 2.4.4或Magento Open Source2.4.4后，在早期版本的Adobe Commerce中正常使用的电子邮件或新闻稿模板可能无法正常工作。受影响的模板包括自定义模块或第三方扩展中的管理员覆盖、主题、子主题和模板。 即使在使用之后，您的部署仍可能会受到影响 [升级兼容性工具](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/upgrade-compatibility-tool/overview.html?lang=en) 以修复已弃用的用法。 参见 [迁移自定义电子邮件模板](https://developer.adobe.com/commerce/frontend-core/guide/templates/email-migration/) 有关迁移受影响的模板的潜在影响和准则的信息。

* 集成令牌无法再用于API持有者令牌身份验证。 以前，集成令牌可用作基于令牌的身份验证的独立密钥。 但是，由于永不过期的访问令牌的安全影响，默认情况下已禁用此行为。 上一个行为可以通过命令行或管理员启用。 参见 [基于令牌的身份验证](https://developer.adobe.com/commerce/webapi/get-started/authentication/gs-authentication-token/). <!-- AC-1619 -->

* 会话ID不再存储在数据库中。 <!-- AC-522-->

* 现在，将OAuth访问令牌和密码重置令牌存储在数据库中时会进行加密。 <!-- AC-520 1323-->

* 已加强验证，以防止上传非字母数字文件扩展名。 <!-- AC-479-->

* 为优惠券代码添加了reCAPTCHA支持。 <!-- AC-461-->

* 当Adobe Commerce处于生产模式时，Swagger现在默认处于禁用状态。 <!-- AC-1450-->

* Adobe Commerce店面现在默认启用HTTPS。 此 **在店面上使用安全URL** 和 **在管理员中使用安全URL** 默认情况下启用设置，并且所有内置Cookie现在都设置为安全。  <!-- AC-1173-->

* 现在，所有Adobe Commerce安装都需要依赖关系混淆插件。 以前，只有基于编辑器的安装才需要此插件。 它现在允许使用受信任的版本。 商家可以绕过此插件中设置的限制，这些限制禁止对Composer安装进行某些组合。 对于受信任的版本，可以绕过约束，Adobe Commerce现在会在继续安装之前显示警告。  <!-- AC-501 970-->

* 开发人员现在可以基于每个端点配置Adobe Commerce RESTful端点接受的阵列大小限制。 参见 [API安全](https://developer.adobe.com/commerce/webapi/get-started/api-security/). <!-- AC-465-->

* 添加了以下机制：限制用户可在系统范围内通过Web API请求的资源大小和数量，以及覆盖单个模块的默认值。 这解决了由以下人员解决的问题： `MC-43048__set_rate_limits__2.4.3.patch`. 参见 [API安全](https://developer.adobe.com/commerce/webapi/get-started/api-security/). <!-- AC-1120-->

### 平台增强功能

Adobe Commerce 2.4.4现在支持PHP 8.1。所有项目库和依赖项都已更新，以便与PHP 8.1兼容。其他平台增强功能包括：

* Adobe Commerce 2.4.4支持Elasticsearch7.16和OpenSearch 1.2。部署托管在本地的Adobe Commerce商家可以使用任一解决方案。 但是，OpenSearch现在是云中托管的Adobe Commerce 2.4.4部署的默认搜索引擎。 所有使用云部署的客户如果升级到版本2.4.4，则必须使用OpenSearch。 参见 [在Cloud 2.4.4上切换到OpenSearch for Adobe Commerce](https://support.magento.com/hc/en-us/articles/4419942355725-Switching-to-OpenSearch-for-Adobe-Commerce-on-Cloud-2-4-4)

* 此 `JQuery` 库已升级到版本3.6。此 `jquery-ui` 库已升级到版本1.13.0。其他几个JavaScript库已更新到最新版本。

* 现在支持TinyMCE 5.8.1。 TinyMCE4已从代码库中移除。 <!-- AC-41-->

* 此 `RequireJS` 库已升级到最新版本(v2.3.6)。 [GitHub-33672](https://github.com/magento/magento2/issues/33672) <!-- AC-40 422-->

* PHPUnit已升级到最新版本(9.5.x)。 已更新测试和测试框架，以便与新版本兼容。 <!-- AC-404-->

* 大多数Laminas依赖项都已升级到与PHP 8.1兼容的最新版本。从代码库中移除了3个Laminas依赖关系，减少了依赖关系的数量。

#### jQuery UI升级

jQuery UI已升级到最新版本(v1.13.0)。 已删除以下v1.10.0 jQuery组件：

* `ajaxOptions` 和 `cache` 选项卡选项。 参见 [选项卡](https://jqueryui.com/changelog/1.10.0/#tabs).

* `.zIndex()`. jQuery UI v1.12.1包含 `jquery/z-index.js`，支持使用 `.zIndex()`. 参见 [UI核心](https://jqueryui.com/changelog/1.12.0/#ui-core).

* 构件名称的数据回退。 您必须使用全名 `.data()` 键。

* 类的硬编码，例如 `ui-corner-all` 在小组件中。

### 性能和可扩展性增强

Adobe Commerce性能增强提升了高吞吐量订单处理和消息队列优化。 此版本中引入的异步订单功能支持每小时创建约60,000个订单。 早期版本的Adobe Commerce支持每小时处理约10,000个订单，这有可能成为闪电销售的瓶颈。 新的多使用者功能支持在单个Cloud实例上扩展消息队列使用者的数量，并增加每小时处理的订单数。

此版本中的性能增强：

* AsyncOrder功能支持的订单放置速度比同步执行快。 启用AsyncOrder后，当购物者在店面完成其他任务时，将在后台执行订单下达。

* 新 **在购物车加载时启用库存检查** 配置选项在购物车中加载产品时提供可切换的库存检查。 默认情况下处于启用状态。 禁用此选项后，Adobe Commerce会在报价加载时跳过库存检查，从而加快结帐速度，尤其是对于包含许多项目的购物车。

* 新 `multiple_processes` 配置选项支持在多个进程中运行并行使用者。 以前， `cron` 在需要时运行单个消费者。 启动多个使用者以并行运行进程可以提高任务执行速度。 要启用此功能，请添加 `multiple_processes` 到 `app/etc/env.php` 文件。

* 通过增加设置的内存限制，改进了包含750多种可配置产品的购物车的购物车操作 `max_input_vars` 在 `php.ini` 文件以支持输入变量卷。

* 通过推迟总计算来优化结账过程中的销售规则处理。 通常，每当购物者将产品添加到购物车、更新产品数量或单击  **下单** 按钮。 商家可以通过设置 `checkout/deferred_total_calculating` 中的变量 `env.php` 文件。 或者，您可以运行 `bin/magento setup:config:set --deferred-total-calculating 1|0`.  <!-- MCP-573-->

* 改进了在异步下订单期间受购物车价格规则影响的订单的验证流程。 <!-- MCP-304-->

参见 [高吞吐量订单处理](../../../performance/high-throughput-order-processing.md).

### GraphQL

此版本包括以下GraphQL增强功能：

* **适用于可转让报价的完整GraphQL覆盖范围**.  B2B公司用户现在可以使用GraphQL完成与询价相关的所有任务。 此API的早期版本支持协商流，但不支持签出。 <!-- PWA-2101-->

#### 新突变

* [`assignCustomerToGuestCart`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/assign-customer-to-guest-cart.html) 变异

* [`placeNegotiableQuoteOrder`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/place-negotiable-quote-order.html) 变异

* [`setNegotiableQuoteBillingAddress`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-negotiable-quote-billing-address.html) 变异

* [`setNegotiableQuotePaymentMethod`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-negotiable-quote-payment-method.html) 变异<!-- PWA-2114-->

* [`setNegotiableQuoteShippingMethods`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-negotiable-quote-shipping-methods.html) 变异

* [`setNegotiableQuoteShippingAddress`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-negotiable-quote-shipping-address.html) 变异

* **性能改进**：

   * GraphQL购物车操作的性能已得到改进。 此 `collectQuoteTotals()` 现在，在GraphQL请求期间只需调用一次方法，这可以缩短响应时间。 <!-- PWA-2110-->

   * 通过更改GraphQL请求的缓存方式，店面性能得到了改进。 Fastly和Varnish现在缓存随发送的GraphQL请求 `auth` 令牌。 <!-- PWA-1817-->

* **新的与店面相关的管理员配置设置**. 此 `storeConfig` query现在返回“零小计结帐”和“支票/汇票”付款方法的配置设置。 <!-- PWA-1576-->

* **更新了核心GraphQL库**. 此 `webonyx` 启用核心GraphQL的库已升级到版本^14.9。 <!-- PWA-2137 2184 -->

* **修复了使用多站点和多语言商店的GraphQL中的翻译问题**. GraphQL解析器现在会按预期根据存储范围返回已翻译的字符串。 <!-- PWA-1946-->

* GraphQL现在为New Relic提供描述性交易名称，这对于调试很有帮助。 [GitHub-30915](https://github.com/magento/magento2/issues/30915) <!-- PWA-1311-->

请参阅 [GraphQL开发人员指南](https://devdocs.magento.com/guides/v2.4/graphql/) 以了解有关这些增强功能的详细信息。

### B2B

此版本包括多个错误修复。 参见 [B2B发行说明](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).

### 供应商捆绑的扩展

但以下各项除外 [Braintree](https://docs.magento.com/user-guide/payment/braintree.html)，则所有供应商捆绑的扩展都已从Adobe Commerce 2.4.4代码库中移除。 商家应迁移到官方扩展，该扩展可在 [Commerce Marketplace](https://marketplace.magento.com/extensions.html). <!-- AC-1165-->

[Amazon Pay](https://docs.magento.com/user-guide/payment/payments.html)

[dotdigital](https://docs.magento.com/user-guide/marketing/communications.html)

[克拉尔纳](https://docs.magento.com/user-guide/payment/payments.html)

[顶点](https://docs.magento.com/user-guide/tax/taxes.html)

[YotPo](https://docs.magento.com/user-guide/marketing/product-reviews.html)

### PWA Studio

PWA Studiov.12.3.0与Adobe Commerce 2.4.4兼容。它包括对reCaptcha、Page Builder内容优化和个性化内容的支持。 有关增强功能和错误修复的信息，请参阅 [PWA Studio版本](https://github.com/magento/pwa-studio/releases). 参见 [版本兼容性](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) 有关PWA Studio版本及其兼容的Adobe Commerce核心版本的列表。

### PayPal支付增强功能

* 现在支持Venmo支付选项。  <!-- AC-1229-->

* Pay Later已添加为购物者的选项，具体取决于购物者的地点，而不是商人的地点。

* 商家现在可以在自己选择的国家测试购物者的购物体验，从而确定购物者的国家。 以前，检测仅限于针对商家所在国家/地区的检测。 此更改仅在沙盒模式下有效。

* 结帐页面上的消息现在可准确显示购物者在使用“稍后支付”时预计将支付的金额和增量数量。

### 实时搜索

Live Search现在支持PHP 8.1。

新 `Magento_ElasticsearchCatalogPermissionsGraphQl` 模块在更新的实时搜索期间被禁用 [安装](https://experienceleague.adobe.com/docs/commerce-merchant-services/live-search/onboard/install.html). 现有的Live Search安装必须升级到Live Search 2.0.0才能利用这些功能。 有关更多信息，请参阅实时搜索 [发行说明](https://experienceleague.adobe.com/docs/commerce-merchant-services/live-search/release-notes.html).

### 辅助功能更新

此版本提高了对标准无障碍准则的符合性。 这些增强功能可改善视力有限或语言、认知和学习能力有限的用户体验。  屏幕Reader工具的性能也得到了提高。

辅助功能增强包括：

* 工具提示链接，其中包含用于输入的文本和准确、以任务为中心的显示标签
* 编辑按钮现在具有唯一文本。
* 现在，管理员按钮在符合AA标准的情况下具有独特、可访问和描述性的目的
* 传达意义的图标图像现在提供了替换文本。
* 增强了管理按钮和表单字段的对比度，使用相邻颜色时，对比度至少为3:1。

### 页面生成器

* 商家现在可以添加替换文本(`alt_text`)到图像（图像、横幅、幻灯片），以增强内容可访问性。 [GitHub-746](https://github.com/magento/magento2-page-builder/issues/746) <!-- PB-1193-->

## 修复的问题

我们正在修复Adobe Commerce 2.4.4核心代码中的数百个问题。 下面介绍了这些已修复问题的子集。

### 安装、升级、部署

<!-- MC-42026-->

* Adobe Commerce现在会按预期在生成日志文件中记录静态内容部署错误。

<!-- MC-43094-->

* 数据修补程序不能再忽略表的唯一约束并将重复值插入到MySQL数据库表中。 以前，修补程序可能会插入重复的值，这会损坏数据库。

<!-- AC-1480-->

* 商家现在可以成功地从使用Klarna的Adobe Commerce 2.4.2部署升级到Adobe Commerce 2.4.3。 [GitHub-33760](https://github.com/magento/magento2/issues/33760)

<!-- ACP2E-77-->

* 现在可以从命令行成功更改Sitemap生成器配置。 以前，当您尝试在管理员之外更改Sitemap配置时，Adobe Commerce会显示此错误： `Import failed: Notice: Trying to access array offset on value of type null in app/code/Magento/Cron/Model/Config/Backend/Sitemap.php on line 78`.  [GitHub-31428](https://github.com/magento/magento2/issues/31428)

<!-- ACP2E-215-->

* 此 `bin/magento app:config:import` 更新时，命令现在可以正常执行 `time` 中的值 `config.php`. 以前，通过手动编辑（即不使用管理员）更改产品警报配置会导致错误。

### 辅助功能

<!-- AC-1589-->

* 解决了在购物车和结帐页面上导航时的辅助功能错误。 [GitHub-34483](https://github.com/magento/magento2/issues/34483)

<!-- AC-1289-->

* 屏幕阅读器现在可以阅读产品页面上的所有相关表单元素。

<!-- AC-1277-->

* 整个店面的图像删除和移动图标按钮的对比度已得到改进，以提高弱视用户的可读性。

<!-- AC-1272-->

* 为用于在整个产品界面中执行搜索的放大镜图标指定了可访问的名称和替换文本。

<!-- AC-1275-->

* 现在可以使用Tab键访问富文本编辑器工具栏。

<!-- AC-1283-->

* 此 **此项目具有权重** 选择输入 **目录** > **产品** 详细信息页面现在具有可见的标签和可访问的名称。

<!-- AC-1284-->

* 控件的可访问名称现在包含其可见标签的文本，用于显示每页项目数的下拉列表。

<!-- AC-1287-->

* 该表控制 **目录** > **产品** 折叠表时，“详细信息”页面现在具有可见的标签和可访问的名称。

<!-- AC-1288-->

* 现在，“产品”表格中的“编辑链接”包含了独特、有意义的链接文本。

<!-- AC-1276-->

* 扩展工具提示的触发器现在提供文本名称。

<!-- AC-1285-->

* 店面各处的按钮现在都有独特的描述性可访问名称。 以前，带有文本按钮和相邻向下箭头图标按钮的分割按钮具有相同的辅助功能名称。

<!-- AC-1277-->

* 整个店面的图像删除和移动图标按钮的对比度已得到改进，以提高弱视用户的可读性。

<!-- AC-1279-->

* 已向商户编辑搜索引擎优化折叠面板的输入时显示的铅笔图标添加了替换文本。

<!-- AC-1272-->

* 为用于在整个产品界面中执行搜索的放大镜图标指定了可访问的名称和替换文本。

<!-- AC-1286-->

* 产品页面 **新建视图** 文本输入字段现在具有可访问的名称。

<!-- AC-1283-->

* 此 **此项目具有权重** 选择输入 **目录** > **产品** 详细信息页面现在具有可见的标签和可访问的名称。

### AdminGWS

<!-- MC-42239-->

* 权限受限的管理员现在可以按预期创建返回。

### 后端

<!-- MC-43161-->

* 管理员现在可以在配置了自定义管理员路径且启用了密钥的部署中登录到管理员。 以前，Adobe Commerce显示此错误： `Invalid security or form key. Please refresh the page`.

<!-- MC-41949-->

* 当多存储层次结构发生更改时，Adobe Commerce不再重定向到所有存储视图范围。 以前，在保存层级后，购物者被重定向到不正确的商店URL，并在多商店部署中选择了所有商店查看范围。

### 捆绑产品

<!-- MC-42885-->

* 购物者现在可以为其购物车添加一个包含固定产品税和两个选项的捆绑产品。 以前，Adobe Commerce未添加产品并显示以下错误： `We can't add this item to your shopping cart right now`.

<!-- MC-42249-->

* 表单验证，格式为 `data-validate` 和 `min` 已将属性添加到“购物车数量”字段，以防止捆绑包产品出现负值。

<!-- MC-41794-->

* 此 `products` 在商店视图级别禁用子产品时，“查询”现在可以正确筛选捆绑产品。 以前，查询返回在存储视图级别禁用的子产品。

<!-- MC-42811-->

* `cron` 现在会按预期清除产品类别缓存，该过程持续于 `indexer_update_all_views` 执行。 以前，在类别中的许多产品批量更新后，Adobe Commerce在类别页上显示不正确的产品计数。

<!-- MC-42811-->

* 当捆绑包产品重新出现在库存中时，Adobe Commerce现在会按预期更新类别产品缓存。

<!-- MC-42811-->

* 已优化重新索引期间运行的缓存清理算法。 在重新索引过程中缓存类别时，捆绑产品现在按预期显示。 以前，在重新索引期间缓存产品类别后，捆绑产品会持续数小时不显示。

<!-- AC-715-->

* 现在，在使用不同货币的多存储部署中，捆绑产品购买的电子邮件的确认功能会按预期进行货币转换。 [GitHub-33426](https://github.com/magento/magento2/issues/33426)

<!-- ACP2E-64-->

* 现在，可以在产品网格中正确显示带有%前缀的捆绑产品的高级定价特价折扣。 以前，产品网格中错误地显示%折扣，前缀为$，而不是%。

<!-- ACP2E-262-->

* 现在，当相关产品更改其状态时，管理员中的捆绑包产品状态会自动更新。

<!-- ACP2E-326-->

* 捆绑包产品的GraphQL解析程序现在检查是否已禁用子捆绑包产品。 以前，不会进行此检查，并且不会进行此类查询 `categoryList` 退回了不可销售的子产品。

<!-- MC-43223-->

* `cart` 查询响应现在为具有动态价格的捆绑产品返回准确折扣。 以前，查询响应包括单独应用于每个捆绑产品的折扣。

### 缓存

<!-- AC-328-->

* 在一般使用情况下，页面缓存不再快速增长。 [GitHub-9458](https://github.com/magento/magento2/issues/9458)

<!-- magento/magento2/pull/33468-->

* 下订单不再导致从清漆缓存中删除与已订购产品相关的所有缓存标记。 [GitHub-30128](https://github.com/magento/magento2/issues/30128)

<!-- AC-1478-->

* 当您更新顶级类别中的产品或者运行索引以更新产品属性或库存状态时，不再擦除全站点页面缓存。 以前，清漆缓存将顶部菜单类别ID添加到所有页面缓存标记。 [GitHub-33465](https://github.com/magento/magento2/issues/33465)

### 购物车和结账

<!-- MC-41494-->

* 最低广告价格 **这是什么？** 购物车页面上的链接现在可点击，并会按预期打开信息弹出窗口。 以前，单击此链接不起作用。

<!-- MC-42639-->

* 在启用了永久购物车的部署中，如果会话超时，购物者现在可以在订购订单时没有出现错误。 以前，Adobe Commerce在会话超时后显示付款错误。

<!-- MC-42638-->

* 为客户地址属性分配较高的排序顺序值不再导致结帐页面性能下降。

<!-- MC-42813-->

* 如果更新数量无效，Adobe Commerce现在会将购物车产品数量还原为之前的值。

<!-- MC-42347-->

* 单击 **添加到购物车** “最近查看的项目”部分中的按钮现在会按预期重定向到产品详细信息页面。 以前，购物者会被重定向到产品列表页面。

<!-- MC-33705-->

* 来宾购物者现在可以使用包含多种自定义客户地址属性的客户地址成功结帐。 以前，自定义属性的值在签出期间显示时格式不正确。 [GitHub-30290](https://github.com/magento/magento2/issues/30290)

<!-- MC-24379-->

* 现在，如果启用了表费率，Adobe Commerce会将免费配送阈值正确应用于订单。 [GitHub-21832](https://github.com/magento/magento2/issues/21832)

<!-- AC-271-->

* 您现在可以使用 `POST /V1/guest-carts/:cartId/items` 将具有不同选项的简单产品添加到购物车。 以前，此调用会更改您添加的第一个简单产品的数量，而不是添加第二个具有指定选项的简单产品。 [GitHub-32302](https://github.com/magento/magento2/issues/32302)

<!-- AC-1089-->

* 现在，在为配置部署时，结账页面的Order Summary部分会显示正确的货币和金额 `Poland` 国家/地区 `PLN` 货币。 以前，购物车和结帐页面会显示金额 **计划0**.

<!-- MC-32805-->

* 当购物者单击时，Adobe Commerce不再引发错误 **更新购物车** 更改迷你购物车中的产品数量后。 以前，Adobe Commerce显示此错误：  `The quote item isn't found. Verify the item and try again`.

<!-- MC-43176-->

* GraphQL `products` 现在，对特定商店中可配置产品的查询仅返回指定商店中产品的价格范围。 以前，请求会返回非指定商店中简单产品的价格范围。

<!-- AC-691-->

* 当购物者添加的帐单地址缺少街道字段时，Adobe Commerce不再引发此错误： `Uncaught TypeError: Unable to process binding "text: function(){return currentBillingAddress().street.join(', ') }"`. [GitHub-33826](https://github.com/magento/magento2/issues/33826)

<!-- AC-1625-->

* 在从中删除迷你购物车的商店中结帐时，Adobe Commerce不再引发控制台错误。 [GitHub-34513](https://github.com/magento/magento2/issues/34513)

<!-- AC-691-->

* 当帐单地址缺少街道字段值或街道字段值不是数组时，在付款阶段结帐不再失败。 以前，签出失败并出现以下错误： `Uncaught TypeError: Unable to process binding "text: function(){return currentBillingAddress().street.join(', ') }"`. [GitHub-33826](https://github.com/magento/magento2/issues/33826)

<!-- ACP2E-22-->

* 现在，可在优惠券报表网格中正确计算销售总额。 以前，销售总额不包括运费。

<!-- ACP2E-44-->

* 现在，当购物者在配送方式之间切换时，可以正确计算整个购物车的折扣。

<!-- ACP2E-159-->

* 的下拉列表 **状态** “管理员创建订单”页面上的字段现在由所选国家/地区的预定义值填充。 以前，此字段是输入文本字段而不是下拉菜单。

<!-- ACP2E-172-->

* 使用后，Adobe Commerce不再引发错误 `addConfigurableProductsToCart` 进行更改，以便在更改商店视图后直接将可配置产品添加到购物车。

<!-- ACP2E-176-->

* 当您使用时，Adobe Commerce不再引发错误 `addConfigurableProductsToCart` 变体，用于将可配置产品的已禁用子项添加到购物车。 以前，Adobe Commerce引发完整性约束违规错误。

<!-- ACP2E-206-->

* 在以下情况下，交叉销售产品在购物车页面上不再可见： **在购物车中显示交叉销售项目** 配置设置已禁用。

<!-- ACP2E-157-->

* 如果优惠券应用到的顺序失败，则优惠券使用值不再更改。  以前，在购物车中应用优惠券后，一次性自动生成的优惠券会标记为无效，但订单未下达。

<!-- ACP2E-137-->

* 已将验证添加到签出工作流中，以将客户的街道地址与默认值进行比较。 如果验证过程标识了更改，则会设置 `customer_address_id` 到 `null` 将其视为新的客户地址。 以前，如果客户在结帐时保存地址而没有进行验证，并且在对结帐字段应用验证后，同一客户尝试使用同一地址下订单，则Adobe Commerce不接受编辑的地址并引发异常。

### 购物车价格规则

<!-- MC-42288-->

* 现在，在相关的购物车价格规则与一起保存之前，优惠券生成会被阻止 `auto` 选项已启用。 如果您尝试保存此规则但未启用 `auto` 选项，Adobe Commerce会显示以下消息： `Rule is not saved with auto generate option enabled. Please save the rule and try again`.

<!-- MC-42743-->

* 添加了用于确认正确应用购物车价格规则折扣的测试。

<!-- ACP2E-213-->

* 使用SKU条件的购物车价格规则 **如果在购物车中找到/找不到项目，并且满足以下所有条件： All/Any of these conditions true** 现在可按预期使用可配置产品。

<!-- ACP2E-225-->

* 现在，购物车价格规则正确应用于固定价格的捆绑销售产品。 以前，当至少一个子产品具有在规则条件中指定的相同属性集时，购物车价格规则不适用于这些产品。

<!-- ACP2E-285-->

* 现在，在为Adobe Commerce配置时，可以将价格为0的产品成功添加到购物车 **整个购物车的固定金额折扣** 购物车价格规则。 以前，Adobe Commerce显示此错误： `report.ERROR: Warning: Division by zero in /home/mer33515/public_html/ee24develop/app/code/Magento/SalesRule/Helper/CartFixedDiscount.php on line 85`.

<!-- ACP2E-306-->

* 更正了以下情况 `cart` 激活具有固定金额折扣的购物车规则时，查询返回不准确的折扣金额。

### 目录

<!-- MC-41796-->

* 当产品具有，则对产品网格执行批量属性更新操作时，Adobe Commerce不再引发异常 `datetime` 属性。

<!-- MC-42571-->

* GraphQL查询现在会根据子产品的可见性筛选器设置返回可配置产品的子产品的结果。

<!-- MC-41853-->

* 当可配置产品属性发生更改时，Adobe Commerce不再修改相关的产品价格。 以前，可配置产品的最低广告价格(MAP)会覆盖店面相关产品的价格。

<!-- MC-42659-->

* 管理员现在可以重新分配类别中剩余的最后一个产品并保存空类别。

<!-- MC-42132-->

* 管理员产品网格和筛选器的下拉/多选属性值现在按预期从管理员设置派生。 以前，属性值派生自默认存储设置。

<!-- MC-43010-->

* GraphQL类别查询会按预期返回有关暂存类别更改的信息。

<!-- AC-711-->

* 现在，当产品同时分配给父类别及其子类别，但位于每个类别的不同位置时，产品列表可在管理员的部署中准确呈现。 以前，产品列表渲染失败，并出现以下错误： `Item (Magento\Catalog\Model\Product\Interceptor) with the same ID "<ID>" already exists`. [GitHub-33145](https://github.com/magento/magento2/issues/33145)

<!-- AC-1148-->

* 现在可以将具有多个选项（超过150个）的多选属性分配给新产品。 以前，属性选项保存在 `catalog_product_entity_varchar` 表格中，当您在管理员中重新打开产品时，并非所有选项都存在。 [GitHub-33486](https://github.com/magento/magento2/issues/33486)

<!-- AC-904-->

* 添加了对路由器无法实例化从URL收集的操作类时的验证。 Adobe Commerce现在显示标准错误消息。 以前，Adobe Commerce显示此错误：  `PHP Error: Cannot instantiate abstract class Magento\Catalog\Controller\Product\Compare`.

<!-- ACP2E-10-->

* 现在，当两个购物车规则应用于满足以下条件的订单时，Adobe Commerce可正确计算折扣：一个购物车规则与优惠券代码一起应用，另一个购物车规则与 **整个购物车的固定价格**  条件和第二个购物车价格规则没有优惠券和 **产品价格折扣百分比** 条件。 以前，当之前的购物车规则已对某些产品应用折扣时，相关算法无法在购物车产品之间正确按比例分摊折扣。

<!-- ACP2E-115-->

* 将许多产品（约10,000个）分配给某个类别不再会导致浏览器崩溃。

<!-- ACP2E-122-->

* 无论是从管理员中保存还是导入，图像属性现在都始终保存在数据库中。 以前，图像ALT文本值的保存方式不一致。 如果映像存在且标签设置为null，则不会在数据库中重置标签值。

<!-- ACP2E-155-->

* 已优化目录小组件SQL查询。 以前，大型MySQL查询会减慢页面加载速度并导致MySQL中断。

<!-- ACP2E-165-->

* 价格筛选器现在可以正确用于缺货的可配置产品。 以前，缺货的可配置产品无法显示在它们的正确价格范围内。

<!-- ACP2E-330-->

* 在部分索引过程中，更新子产品不再删除从其父可配置产品继承的目录规则折扣。 以前，当我们将可配置产品分配给某个类别，但未分配给其关联的简单产品，然后使用该类别创建目录规则时，Adobe Commerce删除了在部分索引过程中分配给简单产品的目录规则。

<!-- ACP2E-216-->

* 添加产品选项时，分组和可配置产品的网格视图列表现在仅包含简单和虚拟产品。 以前，该应用程序包含带有选项的简单产品。

### 目录规则

<!-- MC-41807-->

* 每日更新目录规则不再导致性能下降。 以前，部分目录产品价格索引不会删除旧价格或日期。

<!-- MC-38263-->

* 在部分重新索引期间，Adobe Commerce不再删除可配置产品的目录价格规则。 以前，只有子产品在重新编制可配置产品的索引时才会重新编制索引。

<!-- ACP2E-331-->

* 目录价格规则 **类别不是category_id** 条件现在适用于不属于任何类别的产品。

### 可配置产品

<!-- MC-42188-->

* 可配置的产品选项标签名称现在基于管理员订单创建期间选定的商店视图。 以前，Adobe Commerce使用默认商店视图中的标签名称。

<!-- MC-42187-->

* 现在，当启用显示缺货产品的全局标志时，产品列表正确包含缺货产品的子产品。 以前，如果启用此标记时多个子产品选项中的一个已缺货，则产品列表不包括子产品。

<!-- MC-42340-->

* 您现在可以使用 `addConfigurableProductsToCart` 进行变体，在非默认商店视图上将可配置产品添加到购物车。 以前，当网站ID和商店ID不同时，您无法将可配置产品添加到购物车。 [GitHub-30948](https://github.com/magento/magento2/issues/30948)

<!-- MC-43051-->

* GraphQL `products` 查询不再返回有关可配置产品的已禁用子产品的数据。

<!-- ACP2E-101-->

* 为可配置产品创建新配置不再覆盖现有配置中的更改。 以前，现有变体的状态会被默认状态覆盖 `enabled` 在生成新变体之后。

<!-- ACP2E-175-->

* 当您尝试将可配置产品的已禁用子项添加到购物车时，Adobe Commerce不再引发内部错误。

### 客户

<!-- MC-24204-->

* Adobe Commerce现在会在订单创建期间考虑管理员区域设置的网站范围。 以前，订单详细信息（如客户地址属性）只能在多站点部署中在一个网站上正常使用。 [GitHub-23254](https://github.com/magento/magento2/issues/23254)

### 客户区段

<!-- MC-42241-->

* 现在，当您创建公司帐户时，新客户区段的“匹配客户”计数会自动更新。 以前，必须刷新区段数据才能获得准确计数。

### 电子邮件

<!-- MC-42592-->

* 当客户尝试使用无效的电子邮件帐户登录时，签出登录弹出窗口中的电子邮件字段验证错误现在与客户登录页面上的电子邮件验证错误匹配。

<!-- MC-42764-->

* 当从管理员和添加发货评论时，Adobe Commerce的发货详细信息电子邮件中不再包含错误消息 **通知客户** 复选框处于激活状态。 以前，送货确认电子邮件包含此消息： `We're sorry, an error has occurred while generating this content`.

<!-- MC-42486-->

* 现在，可以在电子邮件模板中正确转换地区和国家/地区ID值。 以前，当您单击 **预览链接** 在管理员电子邮件模板中，国家/地区和地区名称显示不正确。

<!-- MC-36262-->

* 管理员发送的非默认商店查看的销售更新电子邮件现在包含正确的订单状态标签。 以前，这些电子邮件始终显示默认存储中的状态。 [GitHub-29263](https://github.com/magento/magento2/issues/29263)

<!-- AC-721-->

* Adobe Commerce现在包含 `Content-Disposition: inline` 电子邮件中的标头（预期）。 [GitHub-29258](https://github.com/magento/magento2/issues/29258)

<!-- magento/magento2/pull/32720-->

* 在使用Microsoft Outlook和MS Exchange Server的部署中，订单和发货通知电子邮件现在可按预期工作。 以前，电子邮件正文为空，但包含一个ATT*标记的附件。 [GitHub-25076](https://github.com/magento/magento2/issues/25076)

<!-- ACP2E-47-->

* 现在，订单电子邮件包含使用购物者的区域设置进行本地化的数据（如预期）。 以前，排序电子邮件使用管理员区域设置。

<!-- ACP2E-107-->

* 单击任何电子邮件模板的预览现在会按预期在单独的窗口中打开模板预览。  以前，Adobe Commerce会同时从“电子邮件模板”网格和弹出窗口中打开模板预览。

<!-- ACP2E-127-->

* 从非默认网站发送的异步订单电子邮件现在包含相应网站的徽标URL。 以前，这些电子邮件始终包含默认网站或主网站的徽标。 (一个默认键，带有 `storeCode` 值已分配给传递给的第二个数组参数 `UrlInterface` `getUrl` 函数。 此值用于区分不同商店/网站的URL，并生成正确的 `baseUrl` （对于发送给客户的电子邮件内容。）

### 框架

<!-- AC-515-->

* 现在，通过将数字转换为字符串并比较字符串，可以实现数字与非数字字符串之间的非严格比较。 数字字符串和数字字符串之间的比较仍像以前一样有效。 这意味着 `0 == "not-a-number"` 现在被视为false。 [GitHub-33780](https://github.com/magento/magento2/issues/33780)

<!-- AC-1338-->

* 助手 `Magento\Payment\Helper\Data` 不再在构造函数中创建新布局。 以前，当在自定义命令中使用此帮助程序但未指定区号时，Adobe Commerce会引发错误。 [GitHub-33908](https://github.com/magento/magento2/issues/33908)

<!-- AC-1068-->

* 已更新 `allure-framework/allure-php-api` 编辑器依赖项。

<!-- MC-42091-->

* 现在，当bootstrap文件中发生异常时，Adobe Commerce会返回500响应代码。 以前，Adobe Commerce返回“200 OK”状态代码。 [GitHub-22196](https://github.com/magento/magento2/issues/22196)

<!-- AC-1318-->

* 货币符号现在按预期在店面产品详细信息页面上加载。 以前，重新加载JavaScript页面后，此元件有时消失。

<!-- AC-719-->

* 正在更新 `symfony/console` 运行时不再导致故障 `bin/magento setup:di:compile`. [GitHub-33595](https://github.com/magento/magento2/issues/33595)

<!-- AC-1504-->

* 新的必需选项已添加到 `.htaccess` 和 `nginx.conf` 使用Adobe Commerce分发以支持PHP 8.x的文件。 过时的选项也已删除。 [GitHub-34358](https://github.com/magento/magento2/issues/34358)

<!-- MC-42448-->

* 商家现在可以上传多个产品的视频。 现在，仅当上传的文件名包含扩展名时，文件生成过程才会在文件名后附加扩展名。 以前，当商家尝试上传并为两个不同的产品保存相同的视频时，Adobe Commerce引发此错误： `Notice: Undefined index: extension in /app/7ha7zds7wvqys_stg/vendor/magento/framework/File/Uploader.php on line 699`. 出现此情况是因为Adobe Commerce尝试将文件扩展名附加到名称，而不管上传的文件名是否具有扩展名。

<!-- magento/magento2/pull/34106-->

* 已更正的问题 `sprintf(__())` 和 `sprintf(Magento\Framework\Phrase())` 在整个代码库中构建与PHP 8.x的兼容性。 以前，Adobe Commerce抛出以下类型的错误： `Expected parameter of type 'string', 'Magento\Framework\Phrase' provided`. [GitHub-34085](https://github.com/magento/magento2/issues/34085)

<!-- AC-1605-->

<!-- MC-42934-->

* 改进了高级搜索查询参数的验证。 [GitHub-33589](https://github.com/magento/magento2/issues/33589)

<!-- ACP2E-69-->

* 正在执行 `bin/magento support:backup:code` 现在可按预期创建备份。 以前，Adobe Commerce会创建一个备份，但会引发错误。

<!-- ACP2E-82-->

* 已成功执行 `cron` 进程现在被分配了状态 `success`. 以前，相同的 `cron` 由于成功，进程可能会运行两次 `cron` 进程已分配 `pending` 状态。

<!-- ACP2E-170-->

* 此 `staging_synchronize_entities_period` `cron` 工作现在按预期进行。 以前，已成功应用第一个暂存更新，但Adobe Commerce在后续更新中抛出此错误： `report.ERROR: Cron Job staging_synchronize_entities_period has an error: The active update can't be deleted`.

<!-- ACP2E-102-->

* 此 `Magento_Logging` 模块现在支持IPv6。

### 常规修复

<!-- MC-42506-->

* 在复制产品时，Adobe Commerce现在会根据其定义的范围复制所有产品字段。 以前， **name** 和 **描述** 字段已重置为 `global` 范围。

<!-- MC-42612-->

* 当产品价格为0时，Adobe Commerce不再将增量舍入应用于折扣。 以前，Adobe Commerce计算负折扣金额。

<!-- MC-42215-->

* 具有的产品 **设置为新** 现在可以成功保存分配了空开始日期和过期结束日期的属性。 以前，当您使用以下设置保存产品时，Adobe Commerce会引发此错误： `Make sure the To Date is later than or the same as the From Date`.

<!-- MC-41803-->

* 当您更改其SEO URL标识符时，Adobe Commerce不再复制CMS层次结构中的现有CMS页面。 以前，Adobe Commerce在CMS层次结构中创建一个新节点，以复制现有节点。

<!-- MC-42775-->

* 管理员现在可以重试已超过最大处理时间的操作。 默认最长为12小时。

<!-- MC-42514-->

* 由于未确认使用者的消息，批量操作处理期间不再发生管道断裂错误。 预取计数属性现在可为使用者限制这些消息并避免错误。 以前，运行 `bin/magento queue:consumers:start async.operations.all` 生成此错误：  `Broken pipe or closed connection`.

<!-- MC-42075-->

* 现在，在第二次登录尝试失败后，购物者会按预期重新定向回登录页面。 以前，在第二次尝试登录失败后，购物者会被重定向到404页。 [GitHub-32885](https://github.com/magento/magento2/issues/32885)

<!-- magento/magento2/pull/25279-->

* 已延长密码重置令牌的有效期，以避免在提交密码更改页面期间出现争用情况。 [GitHub-29647](https://github.com/magento/magento2/issues/29647)

<!-- AC-1316-->

* 现在会遵循分配给新集成的权限。 [GitHub-33347](https://github.com/magento/magento2/issues/33347)

<!-- AC-1328-->

* 更正了影响“联系我们”表单的例外日志中剩余消息的回归问题。 [GitHub-34483](https://github.com/magento/magento2/issues/34483)

<!-- magento/magento2/pull/31654-->

* 解决了多个JavaScript加载客户数据的问题。 [GitHub-30498](https://github.com/magento/magento2/issues/30498)

<!-- magento/magento2/pull/33324-->

* 使用 `QuoteIdToMaskedQuoteId` 在扩展中，不再显着增加响应时间。 [GitHub-33676](https://github.com/magento/magento2/issues/33676)

<!-- AC-720-->

* 类 `BundleDiscountPrice` 在 `magento2/app/code/Magento/Bundle/Pricing/Price/ConfiguredPrice.php` 现已按预期声明。 以前，Adobe Commerce引发此错误： `Class Magento\Bundle\Pricing\Price\BundleDiscountPrice not found`. [GitHub-33334](https://github.com/magento/magento2/issues/33334)

<!-- AC-1239-->

* AWS S3适配器写入的转义CSV字段值现在与其他文件系统适配器写入的数据匹配。

<!-- MC-43046-->

* 现在支持与S3兼容的存储。 [GitHub-32114](https://github.com/magento/magento2/issues/32114)

<!-- ACP2E-123-->

* 从一台设备注销不再自动从其他设备注销购物者。

<!-- ACP2E-168-->

* 现在，当您从店面视图级别的内联网格中编辑CMS页面时，Adobe Commerce会成功保存该页面。 **使用父节点层次结构** 配置设置已禁用。 以前，Adobe Commerce显示此错误，并且没有保存CMS页面编辑： `A technical problem with the server created an error. Try again to continue what you were doing. If the problem persists, try again later`.

<!-- ACP2E-171-->

* 现在，可以正确显示包含同一页面的节点的痕迹导航。 以前，Adobe Commerce为属于多个节点的页面显示相同的节点名称。 即使每个页面存在多个节点，Adobe Commerce也仅检索页面的第一个节点。

<!-- ACP2E-202-->

* URL重写内联编辑事件现在记录在报表中。

<!-- ACP2E-290-->

* 此 `mage-messages` 如果没有新消息，则不会重置Cookie。

### 礼品卡

<!-- MC-42327-->

* 在购物者输入无效的礼品卡时添加了信息更丰富的错误消息。

### GraphQL

<!-- PWA-1938-->

* 此 `generateCustomerToken` 和 `revokeCustomerToken` 突变现在为用户状态提供了正确的缓存ID。 以前，这些突变使用的是 `x-magento-cache-id`，会降低性能。

<!-- PWA-1506-->

* 此 `setBillingAddressToCart` 变异现在正确使用 `same_as_shipping` 参数，用于设置帐单地址以按预期匹配运送地址。 以前，Adobe Commerce显示此错误： `The shipping method is missing. Select the shipping method and try again`. [GitHub-30924](https://github.com/magento/magento2/issues/30924)

<!-- PWA-1980-->

* GraphQL购物车操作现在仅在查询请求时计算购物车总计。 以前，购物车操作始终计算总计，这是一项资源密集型操作。

<!-- MC-42781-->

* 此 `addProductsToCart` 现在，突变仅向购物车中添加分配给标题中定义的商店的产品。

<!-- MC-42783-->

* `products` 使用分层导航过滤器的查询现在返回正确的子类别列表。 [GitHub-33387](https://github.com/magento/magento2/issues/33387)

<!-- MC-42831-->

* 返回以下内容的查询和突变 `ConfigurableCartItem` 对象包含有关已配置变体的预期信息。

<!-- MC-42082-->

* 此 `products` query现在返回配置产品选项值和变体属性值。 以前，查询响应中的这些值为空。

<!-- MC-41794-->

* 此 `products` 在商店视图级别禁用子产品时，“查询”现在可以正确筛选捆绑产品。 以前，查询返回在存储视图级别禁用的子产品。

<!-- PWA-1311-->

* GraphQL现在为New Relic提供描述性交易名称，这对于调试很有帮助。 [GitHub-30915](https://github.com/magento/magento2/issues/30915)

<!-- MC-42903-->

* 此 `setShippingAddressesOnCart` 突变现在支持在以下情况下为电话号码值为空的购物车设置送货地址： **显示电话** 管理员配置设置已设置为可选。 以前，Adobe Commerce引发此错误： `Field CartAddressInput.telephone of required type String! was not provided`.

<!-- MC-42970-->

* 更正了以下问题： `addSimpleProductsToCart` 变异允许您向购物车中添加未分配到目标网站的简单产品。

<!-- MC-42600-->

* 已针对GraphQL优化MySQL查询 `products` 使用搜索参数优化搜索结果的查询。

<!-- MC-43189-->

* 此 `addConfigurableProductToCart` 如果产品未包含在请求的范围中，则变异不再支持将产品添加到购物车。

<!-- MC-42666-->

* 此 `products` 现在，查询仅返回分配给所请求存储审阅的可配置变体。 以前，返回所请求的可配置产品的所有变体。

<!-- MC-42652-->

* `addSimpleProductsToCart` 现在，请求可以成功并行运行。 以前，对同一SKU的多个请求会为同一购物车ID创建重复的行项目，而不是按预期增加产品数量。

<!-- AC-856-->

* 此 `addProductsToCompareList` 突变现在可用于比较可配置产品的变体。

<!-- MC-42443-->

* 当从后端更新层产品的价格时，新价格会在客户的购物车中正确更新。 以前，尽管购物车摘要部分中的小计已正确更新，但行小计未更新。

<!-- AC-697-->

* 此 `addProductsToCart` 使用添加具有多个选择选项的捆绑产品时，突变现在会将所有选定的选项添加到购物车。 以前，该突变仅添加最后的选择。 [GitHub-33123](https://github.com/magento/magento2/issues/33123)

<!-- MC-38815-->

* 当可选的电话字段值设置为空字符串时，GraphQL查询现在会按预期返回帐单地址。 以前，查询返回null地址值。 [GitHub-30218](https://github.com/magento/magento2/issues/30218)

<!-- ACP2E-51-->

* 此 `products` 现在，当多个产品具有相同的相关性或价格值时，查询响应会根据指定的排序顺序列出产品。

<!-- ACP2E-75-->

* 并发 `addSimpleProductsToCart` 和 `addProductsToCart` 请求不再导致重复报价项目。

<!-- ACP2E-76-->

* `products` 查询分层导航筛选器现在返回正确的子类别列表。 现在，只有直接子类别包含在 `includeDirectChildrenOnly` 请求中提供了标记。 以前，将产品分配给多个类别时，所有类别都会包含在聚合部分的响应中。

<!-- ACP2E-132-->

* 为GraphQL搜索查询添加了搜索建议功能。

<!-- ACP2E-288-->

* 此 `OrderAddress.telephone` 字段现在是可选的 `customer` 查询或其他返回或修改客户订单地址的查询和变体。

<!-- ACP2E-278-->

* 现在，当通过API更改组ID时，店面和管理员中指定组中的客户可以正确更新价格。 以前，当通过API更改组ID时，这些价格无法正确更新。

### 图像

<!-- MC-42080-->

* 具有透明背景的水印图像在其叠加的透明产品图像上不再具有白色背景。 以前，当水印图像和产品图像都具有透明背景时，水印图像以白色背景显示。

<!-- AC-1240-->

* 启用AWS S3后，现在可以按预期上传和显示发票和装运收据的徽标。

<!-- MC-42160-->

* 在管理员设置为不同于商店URL的域的部署中，与添加到CMS页面的图像关联的媒体标记现在按预期包含商店URL。 以前，媒体标记包含静态管理员URL，而不是预期的商店URL。 [GitHub-32930](https://github.com/magento/magento2/issues/32930)

<!-- ACP2E-315-->

* 在店面同时加载图像时，刷新图像缓存时，Adobe Commerce不再引发错误。

### 导入/导出

<!-- AC-1486-->

* `bin/magento remote-storage:sync` 文件名相似但只有一两个字符不同时，不再失败。 以前，第一个图像存储正确，但第二个名称相似的图像触发了同步失败并出现以下错误： `Notice: Undefined index: media/catalog/product/5/_ in /src/vendor/magento/module-remote-storage/Driver/Adapter/Cache/Generic.php on line 197`. [GitHub-34337](https://github.com/magento/magento2/issues/34337)

<!-- MC-41672-->

* 在按计划导出后，Adobe Commerce现在会将导出文件名中的时间戳转换为用户的时区。 以前，不会转换这些值，Adobe Commerce会显示UTC时间戳。

<!-- MC-42330-->

* 多次导入同一CSV文件时，Adobe Commerce不再在远程存储中创建重复的图像。

<!-- AC-1045-->

* 导入不再失败，并显示以下消息： `Import failed: Area code not set: Area code must be set before starting a session`. [GitHub-16171](https://github.com/magento/magento2/issues/16171)

<!-- AC-988-->

* 现在，运行后即可成功导入 `bin/magento app:config:dump` 和手动编辑 `config.php`. [GitHub-31428](https://github.com/magento/magento2/issues/31428)

<!-- MC-41672 23734-->

* 现在，可在自定义多选属性中使用非默认的多值分隔符。 以前，在导入期间验证失败。 [GitHub-23156](https://github.com/magento/magento2/issues/23156)

<!-- ACP2E-86-->

* 现在，在从CSV导入期间，可以正确分配类别中的产品位置。

### 索引

<!-- MC-42791-->

* Adobe Commerce现在在重新索引后按预期在店面上显示产品。 以前，当被重新索引的前500个产品有库存，而后500个产品无库存，店面没有显示任何其他产品。

<!-- magento/magento2/pull/27212-->

* 解决了合并后的一致性问题 `indexer.xml` 文件。 中允许的值 `classType` 现在在未合并和合并时是相同的 `indexer.xml` 文件。 [GitHub-29609](https://github.com/magento/magento2/issues/29609)

<!-- AC-190-->

* 在类别索引器中实施了一种同步机制，以防止完全索引器和部分索引器并行运行。 以前，当这些索引器并行运行时，店面类别页面中可能会暂时忽略产品，或者类别页面中可能会暂时空有产品。

### 基础架构

<!-- AC-1172-->

* 不支持的 `str_contains` 方法已被替换为支持的函数。 这是Adobe Commerce 2.4.3的一个已知问题。 [GitHub-33680](https://github.com/magento/magento2/issues/33680)

<!-- magento/partners-magento2ee/pull/573-->

* 已重构代码库以更正关键字的使用 `match`，它是PHP 8.x中的保留关键词。 [GitHub-33626](https://github.com/magento/magento2/issues/33626)

* HTML标记现在可以正确嵌套和关闭，以符合JQuery 3.5.x中对包括自定义元素在内的非空白元素的标准。 <!-- AC-1942-->

<!-- magento/magento2/pull/34234)-->

* 固定 `abs()` 和 `round()` 与PHP7.x和PHP8.x兼容的函数。  [GitHub-34322](https://github.com/magento/magento2/issues/34322)

<!-- AC-719-->

* 正在更新 `symfony/console` 运行时不再导致失败 `bin/magento setup:di:compile`. [GitHub-33595 ](https://github.com/magento/magento2/issues/33595)

<!-- magento/magento2/pull/34175-->

* 已更正以下项的限制： `colinmollenhour/cache-backend-redis` 编辑器依赖项。 [GitHub-34177](https://github.com/magento/magento2/issues/34177)

<!-- magento/magento2/pull/33932 magento/magento2/pull/33992-->

* 代码库已重构，以删除对已弃用方法的调用 `phpunit/phpunit`. [GitHub-33916](https://github.com/magento/magento2/issues/33916)

<!-- MC-42960-->

* 当管理员具有只读权限时，Adobe Commerce现在显示信息性错误 `pubs/media` 尝试访问包含图像的产品的产品详细信息页面。 以前，Adobe Commerce抛出PHP错误。 [GitHub-32819](https://github.com/magento/magento2/issues/32819)

<!-- AC-853-->

* 所有成员级别 `@api` 批注在整个代码库中已被移到其类中。

<!-- AC-1977-->

* `gift-card Cms` 构件数据已从 `Magento/WidgetSampleData` (Magento Open Source)至 `Magento/GiftCardSampleData` (Adobe Commerce)。 这解决了在PHP8.1上使用示例数据安装(Magento Open Source)时出现的问题。

<!-- AC-1001-->

* 整个Adobe Stock集成代码库中的标记界面，具有 `@api` 根据需要。 [GitHub-32875](https://github.com/magento/magento2/issues/32875)

<!-- AC-1770-->

* 在使用模拟的预准备语句时，结果集中的整数和浮点现在使用本机PHP类型而不是字符串返回。 [GitHub-34625](https://github.com/magento/magento2/issues/34625)

<!-- AC-1697-->

* 已禁用从false值自动创建数组，以确保与PHP 8.1兼容。

<!-- AC-1338-->

* 助手 `Magento\Payment\Helper\Data` 不再在构造函数中创建新布局。 以前，当在自定义命令中使用此帮助程序但未指定区号时，Adobe Commerce会引发错误。 [GitHub-33908](https://github.com/magento/magento2/issues/33908)

<!-- AC-1077-->

* 您现在可以传递 `data` 块实例构造函数的参数 `di.xml`.

<!-- MC-43096-->

* 已优化 `Generator.php` 提高可读性。 [GitHub-33809](https://github.com/magento/magento2/issues/33809)

<!-- AC-1313-->

* 改进了中的JWK检查 `JwsManager` 类来处理直接在标头中设置算法的情况。 以前，此检查会忽略此有效方案。 [GitHub-32636](https://github.com/magento/magento2/issues/32636)

#### 针对PHP 8.1兼容性的升级

<!-- AC-1605-->

* PHP 8.1中已弃用的函数已从代码库中移除。 [GitHub-34497](https://github.com/magento/magento2/issues/34497)

* 为了与PHP 8.1兼容，向具有不完整返回类型的内部方法添加了返回类型声明。 [GitHub-34498](https://github.com/magento/magento2/issues/34498) <!-- AC-1606-->

<!-- AC-1147-->

* 已更新根 `composer.json` 暗喻和  `composer.json` 每个模块的文件转换为PHP 8.1。 [GitHub-34009](https://github.com/magento/magento2/issues/34009)

* 第三方 `jquery.tabs` 库（最新版本）

* NPM包（最新版本） [GitHub-33512](https://github.com/magento/magento2/issues/33512)， [GitHub-33972](https://github.com/magento/magento2/issues/33972) <!-- magento/magento2/pull/33515 33998-->

* `jquery.cookie` 第三方库（最新版本） [GitHub-34427](https://github.com/magento/magento2/issues/34427) <!-- AC-101-->

#### 编辑器依赖项更新

* 所有编辑器依赖项都已更新为与PHP 8.1兼容的版本。

* PHPUnit已升级到最新版本(9.5.x)。 已更新测试和测试框架，以便与新版本兼容。 <!-- AC-404-->

#### JavaScript依赖项更新

<!-- magento/magento2/pull/33871-->

* `jquery-validate` 第三方库  [GitHub-33853](https://github.com/magento/magento2/issues/33853)

<!-- ENGCOM-8667-->

* `Less.js` (v3.13.1) [GitHub-32845](https://github.com/magento/magento2/issues/32845)

#### 库移除和弃用

* 以下库已被删除，因为Adobe Commerce 2.4.x支持的所有浏览器都具有对此功能的内置支持：

   * `es6-collections.js`   <!-- AC-18-->
   * `MutationObserver.js` <!-- AC-15-->
   * `Modernizr` <!-- AC-12-->
   * `FormData.js`

* 已移除未使用的 `jquery.hoverIntent` JavaScript库 [GitHub-33732](https://github.com/magento/magento2/issues/33732) <!-- AC-97-->

* `lib/internal/Magento/Framework/Filter/Money.php` 已弃用。 它包含 `money_format()` 函数中，该函数已在PHP 8.x中移除。 [GitHub-33870](https://github.com/magento/magento2/issues/33870)<!-- magento/magento2/pull/34366)-->

* 删除已弃用、不受支持的 `grunt-autoprefixer` 包。 [GitHub-34037](https://github.com/magento/magento2/issues/34037) <!-- magento/magento2/pull/34032-->

#### 库升级

* 以下库已升级到更新版本：

   * `script.aculo.us` <!-- AC-363-->
   * `Chart.js`  <!-- AC-361-->
   * `moment.js` <!-- AC-11-->
   * `moment-timezone-with-data.js`   <!-- AC-10-->
   * `matchMedia.js` <!-- AC-8-->
   * `underscore.js`  <!-- AC-13-->
   * `PrototypeJS`  <!-- AC-17-->
   * `RequireJS`
   * `LessCSS`

### 发票

<!-- AC-1564-->

* 转换为 `int` 已删除自动递增发票ID（使用字符串作为前缀）。 因此，对于带有字符串前缀的数字，发票现在会显示0。 [GitHub-34451](https://github.com/magento/magento2/issues/34451)

### 日志记录

<!-- MC-42360-->

* Adobe Commerce不再为在中执行批量操作的失败API调用创建日志条目 **系统** > **批量操作**. 以前，失败的API调用的永久条目会添加到批量操作日志中。

<!-- AC-1607-->

* 不再允许从false值自动创建数组。 [GitHub-34499](https://github.com/magento/magento2/issues/34499)， [GitHub-34589](https://github.com/magento/magento2/issues/34589)

### Adobe Commerce编码标准

<!-- magento/magento-coding-standard/pull/219-->

* 已更新 `phpunit/ phpunit` 到的最新版本 `magento-coding-standard` 存储库。 [GitHub-33622](https://github.com/magento/magento2/issues/33622)

<!-- magento/magento2/pull/33858-->

* 已更新 `webonyx/graphql-php` 与Adobe Commerce编码标准存储库中的版本^14.9的依赖关系。 [GitHub-32863](https://github.com/magento/magento2/issues/32863)

<!-- magento/magento-coding-standard/pull/322-->

* 添加了新探查 `Magento2.PHP.ArrayAutovivification` 到Adobe Commerce编码标准，以标识从false值自动创建数组。 [GitHub-34509](https://github.com/magento/magento2/issues/34509)

<!-- magento/magento-coding-standard/pull/325-->

* 添加了新探查 `Magento2.Functions.DeprecatedFunction` 到Adobe Commerce编码标准。 [GitHub-34547](https://github.com/magento/magento2/issues/34547)

<!-- magento/magento-coding-standard/pull/326-->

* 添加了已弃用的函数以探查 `Magento2.Functions.DiscouragedFunction` 在Adobe Commerce编码标准中。 [GitHub-34548](https://github.com/magento/magento2/issues/34548)

<!-- magento/magento-coding-standard/pull/335-->

* 此 `Magento2.Annotation.MethodAnnotationStructure` 嗅探不再因误报而失败。 [GitHub-34679](https://github.com/magento/magento2/issues/34679)

### 媒体集

<!-- AC-1054-->

* 此 `bin/magento media-gallery:sync` 在启用了AWS S3的部署中，命令不再失败。

<!-- AC-1000-->

* 现在，当菜单项超过11并且 **启用旧媒体集** 已启用配置设置。 [GitHub-33889](https://github.com/magento/magento2/issues/33889)

<!-- MC-42837-->

* 编辑具有多个图像的产品时，媒体库选项卡的加载时间已缩短。 [GitHub-33434](https://github.com/magento/magento2/issues/33434)

### MFTF

<!-- AC-516-->

* `CURLOPT_POSTFIELDS` 不再接受对象作为数组。 要将对象解释为数组，请执行显式(`array`)演员阵容。 此做法也适用于接受阵列的其他选项。 [GitHub-33781](https://github.com/magento/magento2/issues/33781)

* `curl_init()` 现在返回 `CurlHandle` 对象而不是资源。 此 `curl_close()` 函数不再有效。 相反， `CurlHandle` 如果实例不再被引用，则实例会自动销毁。 [GitHub-33781](https://github.com/magento/magento2/issues/33781)

<!-- AC-1397-->

* 修复了可下载产品的MFTF测试中的错误。 [GitHub-34270](https://github.com/magento/magento2/issues/34270)

<!-- magento/magento2/pull/33530-->

* 已删除 `CliCacheFlushActionGroup` 起始日期 `CatalogSearch`， `GroupedProduct`， `Newsletter`， `Paypal`， `Quote`、和 `Review` 模块。 [GitHub-33531](https://github.com/magento/magento2/issues/33531)

<!-- AC-515-->

* 现在，通过将数字转换为字符串并比较字符串，可以实现数字与非数字字符串之间的非严格比较。 数字字符串和数字字符串之间的比较仍像以前一样有效。 这意味着0==“非数字”现在被视为false。 [GitHub-33780](https://github.com/magento/magento2/issues/33780)

<!-- AC-517-->

* `parse_url()` 现在区分不存在和空的查询和片段。 [GitHub-33782](https://github.com/magento/magento2/issues/33782)

<!-- magento/magento2-functional-testing-framework/pull/873-->

* 更新了代码库，以避免在使用时出现致命错误。 `ReflectionType::isBuiltin()` 方法。 [GitHub-34194](https://github.com/magento/magento2/issues/34194)

#### 新建操作组

`AdminCheckOrderStatusInGridActionGroup` [GitHub-33747](https://github.com/magento/magento2/issues/33747)

`StorefrontSelectFirstShippingMethodActionGroup` [GitHub-33773](https://github.com/magento/magento2/issues/33773)

`AdminClickUpdateChangesOnCreateOrderPageActionGroup` [GitHub-33689](https://github.com/magento/magento2/issues/33689)

#### 操作组

在以下测试中，重复性活动已由活动组替换：

`AdminAddInStockProductToTheCartTest` [GitHub-34512](https://github.com/magento/magento2/issues/34512)

`AdminAddBundleItemsTest` [GitHub-34312](https://github.com/magento/magento2/issues/34312)

`AdminConfigurableProductAddConfigurationTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminConfigurableProductBulkUpdateTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminConfigurableProductDisableAnOptionTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminConfigurableProductOutOfStockAndDeleteCombinationTest` [GitHub-34316](https://github.com/magento/magento2/issues/34316)

`AdminConfigurableProductOutOfStockTestDeleteChildrenTest` [GitHub-34316](https://github.com/magento/magento2/issues/34316)

`AdminConfigurableProductRemoveAnOptionTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminConfigurableProductRemoveConfigurationTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminCreateAndEditSimpleProductSettingsTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminCreateAndEditVirtualProductSettingsTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminCreateInactiveFlatCategoryTest` [GitHub-34490](https://github.com/magento/magento2/issues/34490)

`AdminCreateInactiveInMenuFlatCategoryTest` [GitHub-34510](https://github.com/magento/magento2/issues/34510)

`AdminCreateDuplicateCategoryTest` [GitHub-34414](https://github.com/magento/magento2/issues/34414)

`AdminCreateDuplicateProductTest` [GitHub-34414](https://github.com/magento/magento2/issues/34414)

`AdminDeleteSimpleProductTest` [GitHub-33783](https://github.com/magento/magento2/issues/33783)

`AdminEditRelatedBundleProductTest` [GitHub-34313](https://github.com/magento/magento2/issues/34313)

`AdminMassDeleteBundleProductsTest` [GitHub-34313](https://github.com/magento/magento2/issues/34313)

`AdminNavigateMultipleUpSellProductsTest` [GitHub-34314](https://github.com/magento/magento2/issues/34314)

`AdminSimpleProductSetEditContentTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminSimpleProductTypeSwitchingToConfigurableProductTest` [GitHub-33788](https://github.com/magento/magento2/issues/33788)

`AdminConfigurableProductTypeSwitchingToVirtualProductTest` [GitHub-33788](https://github.com/magento/magento2/issues/33788)

`AdminCreateConfigurableProductWithDisabledChildrenProductsTest` [GitHub-33775](https://github.com/magento/magento2/issues/33775)

`AdminUpdateFlatCategoryAndAddProductsTest` [GitHub-34490](https://github.com/magento/magento2/issues/34490)

`AdminUpdateTopCategoryUrlWithNoRedirectTest` [GitHub-33774](https://github.com/magento/magento2/issues/33774)

`AdminUpdateTopCategoryUrlWithRedirectTest` [GitHub-33774](https://github.com/magento/magento2/issues/33774)

`CatalogProductListWidgetOperatorsTest`  [GitHub-34579](https://github.com/magento/magento2/issues/34579)

`CreateProductAttributeEntityWithReservedKeysTest`[GitHub-34422](https://github.com/magento/magento2/issues/34422)

`EnableDisableBundleProductStatusTest` [GitHub-34313](https://github.com/magento/magento2/issues/34313)

`StorefrontCheckRefundGrandTotalActionGroup` [GitHub-34315](https://github.com/magento/magento2/issues/34315)

`StorefrontInactiveCatalogRuleTest` [GitHub-33556](https://github.com/magento/magento2/issues/33556)

`StorefrontConfigurableProductCantAddToCartTest` [GitHub-33786](https://github.com/magento/magento2/issues/33786)

`StorefrontConfigurableProductOptionsTest` [GitHub-33785](https://github.com/magento/magento2/issues/33785)

`StorefrontConfigurableProductCanAddToCartTest` [GitHub-33784](https://github.com/magento/magento2/issues/33784)

`StorefrontConfigurableProductGridViewTest` [GitHub-34311](https://github.com/magento/magento2/issues/34311)

`StorefrontConfigurableProductListViewTest` [GitHub-34311](https://github.com/magento/magento2/issues/34311)

`StorefrontProductNameWithHTMLEntitiesTest` [GitHub-33806](https://github.com/magento/magento2/issues/33806)

`StorefrontProductNameWithDoubleQuoteTest` [GitHub-32991](https://github.com/magento/magento2/issues/32991)

#### 新测试

`AdminCreateOrderWithCheckedAppendCommentCheckboxTest` [GitHub-32381](https://github.com/magento/magento2/issues/32381)

`CheckoutWithEnabledCaptchaTest` [GitHub-32991](https://github.com/magento/magento2/issues/32991)

`StorefrontAddProductWithBackordersAllowedOnProductLevelToCartTest` [GitHub-33635](https://github.com/magento/magento2/issues/33635)

`StorefrontGiftMessageForOrderOnCheckoutCartPageTest` [GitHub-32821](https://github.com/magento/magento2/issues/32821)

`StorefrontCaptchaCheckoutWithEnabledCaptchaTest` [GitHub-32821](https://github.com/magento/magento2/issues/32821)

`StorefrontCheckoutWithEnabledMinimumOrderAmountOptionTest` [GitHub-33460](https://github.com/magento/magento2/issues/33460)

#### 重构的测试

`CaptchaWithDisabledGuestCheckoutTest` [GitHub-30828](https://github.com/magento/magento2/issues/30828)

### 快讯

<!-- ACP2E-147-->

* 具有适当权限的用户现在可以按预期管理客户新闻稿订阅。 以前，只有具有完全权限的管理员才能在管理员客户帐户页面上管理客户新闻稿订阅。

### 订购

<!-- MC-41981-->

* 购物者现在可以成功重新订购包含产品的现有订单，该订单具有店面和管理员中类型文件和类型下拉列表的自定义选项组合。 以前，Adobe Commerce会引发错误，并且不会处理重新排序。

<!-- MC-42746-->

* 按商店贷项支付的订单的发票以及应用了固定产品税(FPT)的订单的发票现在包括正确的总计。

<!-- MC-42332-->

* 现在，管理员订单详细信息页面会按预期加载。 以前，当加载含特定税的订单的订单详细信息页面时，Adobe Commerce会引发以下错误： `Call to a member function getId() on array`.

<!-- MC-38521-->

* 具有包括订单和送货权限的受限制权限的管理员现在可以按预期查看订单页面。 以前，当具有这些权限的管理员尝试查看订单时，Adobe Commerce会引发错误。 [GitHub-14633](https://github.com/magento/magento2/issues/14633)

<!-- ACP2E-74-->

* 现在，当设置了允许的最大数量限制时，购物者可以下单包含子可配置产品的订单。

### 支付方式

<!-- AC-1830-->

* 购物者现在可以使用Braintree通过帐单地址下订单，而无需在启用了3DS的部署中设置区域。 以前，购物者单击时，结帐会冻结 **下单**，无法完成购买。 [GitHub-34204](https://github.com/magento/magento2/issues/34204)

<!-- AC-1229-->

* 现在支持Venmo支付选项。

<!-- AC-1228-->

* PayPal现在可以通过BN代码跟踪。

<!-- AC-493-->

* `bin/magento setup:upgrade` 现在在从Adobe Commerce 2.4.2-p1升级时按预期运行。 以前，Adobe Commerce引发此错误： `Unable to apply data patch Magento\Paypal\Setup\Patch\Data\UpdateBmltoPayLater for module Magento_Paypal`. [GitHub-33678](https://github.com/magento/magento2/issues/33678)

<!-- MC-42830-->

* 现在，在管理员下订单期间，可使用正确的商店ID检索保存的信用卡。 现在，在订购期间，将根据网站范围配置设置显示存储的信用卡。 以前，当管理员尝试从管理员为客户创建订单并选择“存储的信用卡”方法时，没有选项可用于存储的信用卡。

<!-- AC-344-->

* 已解决PayPal信用卡显示礼品卡金额的异常。 以前，在启用PayPal信用卡并配置多个礼品卡金额时，如果购物者更改了礼品卡价值的金额，店面不会更新分期付款的金额。 这是Adobe Commerce 2.4.3中的一个已知问题。

#### PayPal

<!-- MC-42154-->

* 使用PayPal Express付款方式结账时，Adobe Commerce不再显示错误。 以前，尽管结帐过程已完成，但Adobe Commerce会显示以下错误： `Something went wrong`.

<!-- AC-722-->

* PayPal Express现在可从购物车中按预期工作。 以前，当您单击 **PayPal** 按钮开始从购物车快速结帐，Adobe Commerce引发此错误：  `To check out, please sign in with your email address`. [GitHub-33445](https://github.com/magento/magento2/issues/33445)

<!-- MC-42279-->

* PayPal Payflow Pro现在使用正确的父交易ID执行延迟捕获，其中PayPal Payflow Pro网关具有 **付款操作** 设置为 **授权**. A **Sale** 使用在签出时创建的保险库令牌的父交易ID将交易发送到Payflow。 以前， **延迟捕获**  事务已创建并发送到PayPal Payflow。 [GitHub-33445](https://github.com/magento/magento2/issues/33445)

<!-- MC-42442-->

* 使用PayPal Payments Advanced付款完成付款后，购物者现在会按预期重定向到成功页面。 以前，即使成功处理付款且未记录任何错误，购物者也不会被重定向到此页面。

### 性能

<!-- AC-705-->

* 已添加索引到 `magento_giftcardaccount.code` 以改进性能。

<!-- MC-42158-->

* 模块列表加载执行时间已缩短。

<!-- AC-932-->

* 热门搜索词缓存的性能已得到改进。 以前， `search_query` 表，完成搜索查询所用的时间。 [GitHub-27559](https://github.com/magento/magento2/issues/27559)

<!-- MC-42892-->

* 默认情况下，Adobe Commerce会在产品保存期间同步调整图像大小。 商家现在可以通过对进行细微的编辑，将图像大小调整为后台异步流程 `di.xml` 文件。

<!-- ENGCOM-9168-->

* 在多存储部署中，类别产品索引器的性能得到了改进。 [GitHub-33984](https://github.com/magento/magento2/issues/33984)

<!-- AC-1179-->

* 新的内存缓存 `glob()` 系统调用通过减少 `glob()` 呼叫。  [GitHub-34025](https://github.com/magento/magento2/issues/34025)

<!-- ACP2E-63-->

* 提高了异步订单网格重新索引过程的性能。

<!-- ACP2E-117-->

* 产品导出期间的内存消耗已得到优化。

<!-- ACP2E-325-->

* 已优化加载包含相关产品的产品详细信息页面。 相关产品条件查询也已优化。

### 定价

<!-- MC-42243-->

* 现在，当产品价格接近或等于零，并且启用了共享目录时，价格排序可按预期工作。 以前，零级价格在价格重新索引时被忽略。

<!-- ACP2E-87-->

* 如果“类别”页面上的价格过滤器不包含第二个值，则Adobe Commerce不再引发错误。 以前，Adobe Commerce在日志文件中引发异常。

### 产品警报

<!-- MC-41917-->

* 新 `product_alert` consumer通过创建队列消息、运行使用者并缩短执行时间，改进了客户警报的发送。 以前，在发送超过100,000个产品警报时，Adobe Commerce会引发内存不足异常。 Adobe Commerce还需要20多个小时才能发送所有警报。

### 产品视频

<!-- MC-42105-->

* Adobe Commerce现在支持 **保存** 添加视频时输入不完整的URL时的button和autocompletes字段（管理员） **目录**  > **产品** > **添加视频**)。 以前， **保存** 按钮已禁用，并且字段未填充。

### 退货授权(RMA)

<!-- MC-42987-->

* “管理员创建退货产品”网格现在显示税，包括仅配置为按价格显示税的产品价格。 以前，Adobe Commerce不检查上的配置显示设置 `tax/calculation/price_includes_tax` 标志。

### 审核

* 产品列表视图现在显示产品的正确星级评分。 [GitHub-30196](https://github.com/magento/magento2/issues/30196)

<!-- ACP2E-89-->

* 现在，当购物者单击时，评论会按预期显示 **审核** 在店面产品页面上。

<!-- ACP2E-111-->

* 现在，店面产品列表页面上的Grid和List视图中的产品星级是一致的。 以前，同一产品在“网格”和“列表”视图模式下可能有不同的评级。

### 奖励

<!-- ACP2E-129-->

* 奖励积分余额和奖励积分历史记录现在显示相同的余额。 已过期积分现已正确扣除。 以前，奖励积分余额不能准确反映过期的积分。

<!-- ACP2E-158-->

* 已过期的奖励积分现在标记为 **已过期** 店面奖励积分历史网格的“原因”部分。

### 销售

<!-- MC-42025-->

* 在升级到MariaDB 10.2.34后，提高了异步模式下对具有大型数据集的表进行销售网格更新的性能。

<!-- MC-42531-->

* Adobe Commerce现在会按预期从店面删除HTML标签 **帐户** > **我的订单** > **查看订单** 页面。 以前，Adobe Commerce在店面客户订单注释部分显示HTML标签。

<!-- MC-42377-->

* 自动测试覆盖率以验证索引是否存在 `sales_shipment_grid.order_id` 已添加。

<!-- MC-43163-->

* `POST V1/orders` 调用现在会更新扩展属性，而不会出错。 以前，出现SQL语法错误。

### 搜索 {#search-heading}

<!-- MC-42799-->

* 价格范围的分层导航选项现在与自定义价格属性一起按预期工作。 在筛选自定义价格属性时，Adobe Commerce会使用价格导航步骤的配置。 以前，Adobe Commerce使用手动步骤配置。

<!-- MC-42545-->

* 店面现在会在分层导航中显示当前类别的所有子类别，而不管目录中可用的类别数量如何。

<!-- MC-41706-->

* Elasticsearch目录搜索现在不区分变音符号。 以前，搜索不带重音的词与搜索带有重音的同一词会产生不同的结果。

<!-- ACP2E-8-->

* 现在，对包含特殊字符的SKU属性正确设置了搜索权重。

<!-- ACP2E-36-->

* `category_name` 已添加到系统保留的产品属性代码。 现在，如果用户尝试使用属性代码创建产品属性，Adobe Commerce会显示错误 `category_name`. 以前，产品未列在预期类别中，并记录了Elasticsearch错误。

<!-- ACP2E-68-->

* 现在，每次GraphQL搜索查询后，都会更新热门搜索词。

<!-- ACP2E-249-->

* Adobe Commerce现在将正确的价格字段添加到Elasticsearch价格指数映射中。 以前，使用商店ID而非网站ID向索引中添加了不正确的价格字段。

### 配送

<!-- MC-42758-->

* 装运电子邮件现在仅包含当前装运的跟踪编号。 以前，当订单包含多个发运时，每个发运的电子邮件均包含与该订单相关的所有发运的跟踪编号。

<!-- MC-42396-->

* 现在，当购物者在多送货模式下从购物车中删除产品，然后切换到单个送货地址时，Adobe Commerce会成功更新迷你购物车。 以前，产品价格未按预期更新。

<!-- AC-267-->

* 使用S3存储适配器时，现在可按预期导入表速率。 以前，Adobe Commerce显示此错误： `File "https://[bucket].s3.eu-central-1.amazonaws.com/[prefix]/tmp/phpLjGmHf" not found`. [GitHub-33072](https://github.com/magento/magento2/issues/33072)

<!-- MC-42577-->

* 您现在可以按预期从禁用装运更新电子邮件 **商店**  > **配置**  >  **销售**  >  **销售电子邮件**. [GitHub-33165](https://github.com/magento/magento2/issues/33165)

<!-- ACP2E-31-->

* Adobe Commerce现在在管理员和店面发票页总数上显示免运费(0)。 以前，当订单的装运量为零时，Adobe Commerce不会在发票页装运总数中显示装运总额。

<!-- ACP2E-120-->

* 对在线货运公司的费率请求已从多个请求减少为一个。 现在，可以正确计算每个项目/包的包保险和处理价格。 以前，Adobe Commerce显示联邦快递配送方式运费不正确。

<!-- ACP2E-174-->

* Adobe Commerce现在在创建从波多黎各发运的发运标签时显示UPS费率。 以前，Adobe Commerce不显示这些UPS速率。

<!-- ACP2E-227-->

* 现在，从输入框中删除后，货运街道地址会按预期完全清除。 以前，删除地址后，文本框会保留一个或多个字符。

### 暂存

<!-- MC-42194  -->

* 现在可正确保存产品计划更新图像和视频。 以前，在创建新的计划更新后，会删除视频、URL、标题和描述。

<!-- MC-42501-->

* 对于启用了属性的商店视图，Adobe Commerce现在在“计划新更新”表单中显示“最低广告价格”属性。

<!-- MC-42590-->

* Adobe Commerce现在在产品计划更新表单中按预期仅显示一个“图像”选项卡。 以前，Adobe Commerce会复制此选项卡。

<!-- MC-23994-->

* 产品库存状态现在在计划更新预览中正确显示。 以前，在创建计划更新期间启用之前禁用的产品时，产品状态显示为缺货。

### 存储

<!-- MC-42884-->

* 现在，在部署中包含位于不同URL上的多个商店时，“以客户身份登录”功能可按预期工作。 以前，即使访问正确的商店域，Adobe Commerce也不会加载正确的商店。

### 站点范围分析工具

<!-- ACP2E-240-->

* 商家现在可以按预期访问网站范围分析工具。 以前，损坏的键对会阻止某些商家访问该工具。

### 税金

<!-- MC-41924-->

* 现在，当客户选择配送到多个地址后删除商品时，Adobe Commerce可正确计算迷你购物车小计。

<!-- MC-41945-->

* 现在，当购物车仅包含虚拟产品时，Adobe Commerce会在所有结账页面上显示相同的税率。

<!-- AC-714-->

* 可配置产品的层级价格现在可在店面中显示准确的已包括和未包括的税值。 以前，包含的税和排除的税会显示相同的值。 [GitHub-33673](https://github.com/magento/magento2/issues/33673)

### 测试

<!-- magento/magento2/pull/34798-->

* WebAPI测试现在与PHP 8.1兼容。 [GitHub-34653](https://github.com/magento/magento2/issues/34653)

<!-- magento/magento2/pull/34820-->

* 集成测试现在与PHP 8.1兼容。 [GitHub-34567](https://github.com/magento/magento2/issues/34567)， [GitHub-34569](https://github.com/magento/magento2/issues/34569)

<!-- AC-1225-->

* 商户现在可以测试购物者所在国家的购物体验，而不是商户的地点。

<!-- AC-266-->

* 集成测试内存消耗减少，提高了测试性能，减少了完成测试所需的时间。

<!-- MC-41955-->

* 添加了测试，以验证店面和管理员的自定义日期属性格式。

<!-- AC-1517-->

* 更正了以下错误： `StorefrontPOWorkflowVerifyApprovalFlowTabTest`. [GitHub-34378](https://github.com/magento/magento2/issues/34378)

<!-- AC-1571-->

* 功能测试已经稳定下来以确保PHP 8.x兼容性。 [GitHub-34327](https://github.com/magento/magento2/issues/34327)， [GitHub-34188](https://github.com/magento/magento2/issues/34188)

<!-- magento/magento2/pull/34198-->

* 修复了WebAPI测试中的功能问题。 [GitHub-34196](https://github.com/magento/magento2/issues/34196)

<!-- AC-1207-->

* 修复了导致静态测试误报的错误。 [GitHub-34056](https://github.com/magento/magento2/issues/34056)

<!-- magento/magento2/pull/34300-->

* 测试覆盖率已更新 `call_user_func_array`. [GitHub-34301](https://github.com/magento/magento2/issues/34301)

<!-- AC-1978-->

* 此 `Magento\GraphQl\CatalogGraphQl\ProductSearchTest` 使用AWSElasticsearch运行时，test不再引发此错误： `Magento\GraphQl\CatalogGraphQl\ProductSearchTest::testSearchSuggestions Failed asserting that an array is not empty. /var/www/html/dev/tests/api-functional/testsuite/Magento/GraphQl/CatalogGraphQl/ProductSearchTest.php:94 /var/www/html/dev/tests/api-functional/framework/Magento/TestFramework/TestCase/GraphQlAbstract.php:257`.

<!-- magento/magento2/pull/33699-->

* 通过重命名所有模拟变量以包含，修复了大量非关键单元测试警告 `Mock` 后缀和移除对已弃用的Object Manager类的引用。 [GitHub-33695](https://github.com/magento/magento2/issues/33695)

* 此 `Magento\Framework\MessageQueue\TopologyTest` 测试现在与的AWS MQ兼容 [!DNL RabbitMQ] 服务。 以前，此测试失败并显示以下消息： `Invalid exchange configuration: magento-topic-based-exchange1 Failed asserting that two arrays are equal`. <!-- AC-1248-->

<!-- magento/magento2/pull/34454-->

* 单元测试现在与PHP 8.1兼容。 [GitHub-34441](https://github.com/magento/magento2/issues/34441)

#### 单元测试

以下单元测试已重构为使用 `PHPUnit` 而不是 `AspectMock`：

`AllureHelperTest` [GitHub-33294](https://github.com/magento/magento2/issues/33294)

`ObjectHandlerUtil` [GitHub-33584](https://github.com/magento/magento2/issues/33584)

`MockModuleResolverBuilder` [GitHub-33583](https://github.com/magento/magento2/issues/33583)

`MagentoTestCase`  [GitHub-33582](https://github.com/magento/magento2/issues/33582)

`ModuleResolverTest` [GitHub-33308](https://github.com/magento/magento2/issues/33308)

`ParallelGroupSorterTest` [GitHub-33306](https://github.com/magento/magento2/issues/33306)

`SuiteGeneratorTest` [GitHub-33299](https://github.com/magento/magento2/issues/33299)

`OperationDataArrayResolverTest`  [GitHub-33296](https://github.com/magento/magento2/issues/33296)

### 主题

<!-- MC-41887-->

* 当Adobe Commerce的基本URL中配置了子路径时，通知消息现在可以正确显示。

<!-- MC-42469-->

* 添加了 `aria-label` 元素到storefront页面模板，以指示购物者在单击链接时将导航到的页面。 以前，同一链接文本用于指向不同页面的链接。 [GitHub-33075](https://github.com/magento/magento2/issues/33075)

<!-- ACP2E-73-->

* 加载具有预先存在的自定义主题的存储的主页时，Adobe Commerce不再显示错误消息。 以前，Adobe Commerce会显示以下消息：  `The store will not work correctly in the case when cookies are disabled`.

### 翻译和区域设置

<!-- AC-285 MC-41400-->

* 此 `UserExpiration` 验证器不再失败 `de_DE` 和 `uk_UA` 区域设置。 以前，当管理员尝试在区域设置设置为的情况下从管理员创建新用户时设置到期日期时，Adobe Commerce会引发错误 `de_DE` 或 `uk_UA`. [GitHub-32497](https://github.com/magento/magento2/issues/32497)

<!-- MC-41583 AC-989-->

* 在创建或编辑地址表单中，瑞士地区名称现在始终以英语显示。 [GitHub-32602](https://github.com/magento/magento2/issues/32602)

<!-- magento/magento2/pull/33128-->

* 已更新 `zip_codes.xml` 格恩西岛的模式，用于支持萨克岛的GY10邮编。 [GitHub-33144](https://github.com/magento/magento2/issues/33144)

<!-- AC-1080-->

* 将白俄罗斯地区添加到 `directory_country_region` 表格。 [GitHub-33924](https://github.com/magento/magento2/issues/33924)

<!-- AC-1178-->

* 已解决运行菲律宾（菲律宾）区域设置的店面显示异常。 [GitHub-33996](https://github.com/magento/magento2/issues/33996)

<!-- AC-1308-->

* 现在，在设置为葡萄牙语（葡萄牙）区域设置的商店中创建新帐户时，您可以成功输入客户出生日期。 以前，当您尝试创建帐户时，Adobe Commerce会引发错误。 [GitHub-34130](https://github.com/magento/magento2/issues/34130)

<!-- ACP2E-457-->

* 产品详细信息页面现在使用阿拉伯语（沙特阿拉伯）区域设置成功显示。 以前，此区域设置会破坏产品详细信息页面。

### UI

<!-- AC-258-->

* 更正了使用的MFTF测试的错误 `maps.googleapis.com`.

<!-- MC-41850-->

* Adobe Commerce现在会修剪来自联系我们表单电子邮件输入字段的不间断空格字符。 以前，提交表单时没有从电子邮件输入中删除不间断空格字符（如果给定），这会导致日志文件出错。 此 **回复** 生成的发送给商店管理员的联系人电子邮件中也缺少字段。

<!-- MC-42793-->

* Adobe Commerce现在会根据相关产品、追加销售产品和交叉销售产品在管理员中的位置显示这些产品。

<!-- MC-42502-->

* `.action-close` 现在，按钮在以下情况下可按预期工作： `Multiselect` 在模式中使用。 以前， `action-close` 按钮不起作用，因为它继承了  `.action-close` 按钮时，单击此按钮。 [GitHub-27240](https://github.com/magento/magento2/issues/27240)

<!-- AC-1217-->

* 现在，产品视图中的主价格字段上提供了优惠代码片段。 以前，在产品视图中的相关产品块中，此字段缺少此代码片段，这会导致Google搜索结果显示不正确的价格。 [GitHub-34063](https://github.com/magento/magento2/issues/34063)

<!-- AC-1584-->

* 解决了运行iOS的设备上的模态高度问题。 [GitHub-34467](https://github.com/magento/magento2/issues/34467)

<!-- MC-40106-->

* 现在，“操作”下拉菜单在整个店面中正确定位。 [GitHub-31379](https://github.com/magento/magento2/issues/31379)

<!-- AC-1589-->

* 解决了在购物车和结帐页面上导航时的辅助功能错误。 [GitHub-34483](https://github.com/magento/magento2/issues/34483)

<!-- AC-1289-->

* 屏幕阅读器现在可以阅读产品页面上的所有相关表单元素。

<!-- AC-872-->

* 店面目录产品构件排序顺序(**目录** > **类别** > **产品**)现在与管理员中配置的顺序匹配。 [GitHub-27126](https://github.com/magento/magento2/issues/27126)

<!-- AC-725-->

* 现在，区域选择器可在创建帐户页面上按预期工作。 [GitHub-30099](https://github.com/magento/magento2/issues/30099)

<!-- MC-42750-->

* 管理员客户网格现在显示所有客户数据，包括新添加的数据 `date` 自定义属性（预期）。 以前，Adobe Commerce引发错误，而且在以下情况下无法正确显示管理员客户网格： `date` 属性集被设置为列。

<!-- AC-1280-->

* 输入标签 **目录**  >  **产品** 详细信息页面已更改，以准确反映输入的目的。 不需要用户输入的字段不再显示带有星号的标签。

<!-- AC-1275-->

* 现在可以使用Tab键访问富文本编辑器工具栏。

<!-- AC-1284-->

* 控件的可访问名称现在包含其可见标签的文本，用于显示每页项目数的下拉列表。

<!-- AC-1287-->

* 该表控制 **目录** > **产品** 折叠表时，“详细信息”页面现在具有可见的标签和可访问的名称。

<!-- AC-1285-->

* 店面各处的按钮现在都有独特的描述性可访问名称。 以前，带有文本按钮和相邻向下箭头图标按钮的分割按钮具有相同的辅助功能名称。

<!-- AC-1168-->

* 添加了 **今天** “管理订单”和“金额”控制面板图表的查看选项，以提供一天中的销售和订单汇总。 [GitHub-34008](https://github.com/magento/magento2/issues/34008)

<!-- AC-1481-->

* 多选按钮的活动（点击）状态 **关闭** 按钮现在可以始终如一地使用。 [GitHub-34338](https://github.com/magento/magento2/issues/34338)

<!-- magento/magento2/pull/31879-->

* 禁用Cookie限制模式后，Adobe Commerce升级后不再显示此消息： `The store will not work correctly in the case when cookies are disabled`. [GitHub-33811](https://github.com/magento/magento2/issues/33811)

<!-- ACP2E-7-->

* 现在，在移动设备上具有垂直缩略图导航方向的主题上，全屏产品图像可正确显示。 以前，在全屏模式下，产品图像在移动设备上具有垂直缩略图导航方向的主题上缩放不正确或不可见。

<!-- ACP2E-23-->

* 产品详细信息页面中的错误消息在以下情况下不再快速消失： **将构件产品与后端存储同步** 已启用配置设置。

<!-- ACP2E-70-->

* 负值验证已添加到 **要退货的数量** 字段。

<!-- ACP2E-105-->

* 购物者点击时，Adobe Commerce不再显示重复的地址 **更改地址** 在部署中的Review and Payments页面上 **地址搜索** 已启用配置设置。

<!-- ACP2E-136-->

* 此 **添加产品** 现在，对于权限受限的管理员，当在“管理员类别”页面上的存储视图范围内工作时，按钮可按预期启用。

<!-- ACP2E-169-->

* 现在，视图断点在Adobe Commerce中是一致的。

<!-- ACP2E-199-->

* Adobe Commerce现在可以在“管理客户”页面上正确显示具有自定义区域设置的自定义客户日期属性。

<!-- MC-41760-->

* 使用页面生成器添加的图像在浏览器窗口宽度为768像素时不再在店面上重复。 以前，使用此浏览器窗口宽度，Adobe Commerce通过同时显示移动版本和桌面版本的图像，复制店面上的图像。

### URL重写

<!-- AC-1510-->

* 在执行创建新存储视图期间，不再为所有存储视图重新生成URL重写 `bin/magento setup:upgrade`. [GitHub-32954](https://github.com/magento/magento2/issues/32954)

### Visual Merchander

<!-- ACP2E-19-->

* 可视商品推销商 **从缺货到缺货** 现在，当所有简单产品都缺货时，可配置产品的自动排序选项可按预期工作。

<!-- ACP2E-61-->

* 未添加条件时，不再保存可视化促销规则。

### Web API框架

<!-- MC-42008-->

* 启用永久购物车后，对自行授权的客户资源的Web API请求不再引发授权错误。

<!-- MC-42313-->

* 您现在可以使用的子类创建对象 `\Magento\Framework\Api\AbstractSimpleObjectBuilder` 位于PHP 7.3。以前， `preg_match` 当Adobe Commerce在Redhat上使用PHP 7.3托管时，引发了此警告消息： `Warning: preg_match(): Compilation failed: unrecognized character follows...`.

<!-- MC-24548-->

* 检索的总数 `PUT /V1/guest-carts/:cartId/collect-totals` 请求现在由正确的更新 `shippingMethod`. [GitHub-18508](https://github.com/magento/magento2/issues/18508)

<!-- MC-30627 AC-796-->

* 向REST API添加新的反序列化程序时，不再删除其他反序列化程序。 以前，REST API接受新的内容类型，但API的核心定义内容类型不再有效，并返回400错误。 [GitHub-26433](https://github.com/magento/magento2/issues/26433)

<!-- AC-698-->

* 您现在可以删除中定义的参数的覆盖 `webapi.xml`文件。 [GitHub-33843](https://github.com/magento/magento2/issues/33843)

<!-- AC-1212-->

* Adobe Commerce现在生成 `customertoken` 多次连续失败的登录尝试后，按GraphQL或REST API请求执行。 以前，Adobe Commerce不检查 `lock_expires_at` 在 `oauth_token_request_log` 大于当前日期和时间，并且始终返回失败尝试次数，这会阻止客户登录。 [GitHub-34067](https://github.com/magento/magento2/issues/34067)

<!-- AC-1190-->

* 将遮罩的报价ID添加到 `QuoteRepository::getList` 不再导致无限循环。 以前，使用依赖REST API更新订单的支付处理器触发此行为。 [GitHub-33675](https://github.com/magento/magento2/issues/33675)

<!-- MC-41612-->

* 此 `/rest/all/V1/categories/<above_created_category_id>`  PUT调用现在遵循以下指定的值： `available_sort_by`.  以前，已选中可用的产品列表排序方式下拉列表，其中包含“类别”页面上的所有可能选项，以及 **全部使用** 复选框已被选中。 [GitHub-32596](https://github.com/magento/magento2/issues/32596)

<!-- ACP2E-11-->

* 用于创建客户令牌的REST API请求的性能已得到改进。

<!-- ACP2E-91-->

* 更正了以下情况下发生的错误： **将存储代码添加到Url** 设置为 **是** 和REST调用不包含存储代码。 尽管负载有效，但调用返回了以下错误： `Fatal error: Allowed memory size of ********** bytes exhausted (tried to allocate **** bytes) in vendor/magento/module-store/Model/StoreRepository.php on line 75`.

<!-- ACP2E-153-->

* 现在可以使用REST API同时创建同一订单的部分发票。

### 愿望清单

<!-- MC-41880-->

* 当满足以下条件时，Adobe Commerce不再在类别侧栏中呈现愿望清单 **在侧栏中显示** 已禁用愿望清单选项。 以前，Adobe Commerce会忽略此选项。

### 所见即所得

<!-- ACP2E-17-->

* PageBuilder现在可以使用WYSIWYG编辑器正确呈现自定义构件。

## 已知问题

**问题**：在从Adobe Commerce 2.4.4升级到Adobe Commerce 2.4.4-p1期间，商家可能会注意到包版本降级通知。 可以忽略这些消息。 包版本中的差异是由于生成包期间出现异常造成的。 没有产品功能受到影响。 请参阅 [从2.4.4升级到2.4.4后，软件包降级 — p1](https://support.magento.com/hc/en-us/articles/8214752983949)  知识库文章，用于讨论受影响的情景和解决方法。

**问题**：商家无法提交通过Braintree使用Apple Pay支付的订单的部分退款。 当商家尝试从订单发票创建部分退款的贷项通知单时， **要退款的数量** 字段不可编辑。  **解决方法**：应用修补程序 `braintree-disabled-partial-capture-for-applepay-googlepay.patch`. 请参阅 [Adobe Commerce 2.4.4：无法创建部分发票](https://support.magento.com/hc/en-us/articles/4487952754957-Adobe-Commerce-2-4-4-Unable-to-create-partial-invoices) 知识库文章。  <!-- BUNDLE-3088-->

**问题**：在“管理员”中没有选择选项时，购物者无法将产品添加到购物车 **存储** >  **配置** > **常规** > **国家/地区选项** > **允许国家/地区**. Adobe Commerce改为显示以下控制台错误： `Failed to load resource: the server responded with a status of 400 (Bad Request)`. <!-- AC-2564-->

**问题**： Dotdigital on的说明 **查找合作伙伴和扩展** > **Magento Marketplace** 已过时。 以下是更新的描述：

Dotdigital是一个客户参与平台，可帮助数字营销人员和开发人员在整个客户历程中提供通信。 我们利用客户数据的强大功能，推动品牌在增长和扩展过程中的参与、转化和忠诚度。 客户喜欢我们易用的平台，该平台可将系统内的第一方数据连接起来、提供强大的见解并自动化预测性跨渠道消息。

Dotdigital的350多名员工为全球各行业的中端市场和企业公司提供服务。 我们渴望激发负责任的营销，并致力于可持续性、隐私和安全。 Dotdigital自豪地成为全球首个碳中和营销自动化平台，并获得ISO 14001、ISO 27701和ISO 27001的认证。

参见 [Dotdigital — 营销自动化](https://marketplace.magento.com/dotdigital-dotdigital-magento2-os-package.html) 有关购买和下载的信息。

## 社区投稿

我们感谢更广泛的Magento Open Source界，并感谢他们对这一版本的贡献。

社区工程团队 [Magento参与者](https://magento.com/magento-contributors) 按月、季度和年维护最佳贡献个人和合作伙伴的列表。 在该参与者页面中，您可以单击链接，以访问他们在GitHub上合并的PR。

### 合作伙伴投稿

下表列出了合作伙伴的贡献。 此表列出了提出拉取请求的合作伙伴、外部拉取请求编号以及与其关联的GitHub问题编号（如果可用）。

{{$include /help/_includes/release-notes/engcomm-2-4-4-partner.md}}

### 个人投稿人

下表列出了来自社区成员的贡献。 此表列出了提出拉取请求的社区成员、外部拉取请求编号以及与其关联的GitHub问题编号（如果可用）。

{{$include /help/_includes/release-notes/engcomm-2-4-4-issues.md}}

### 系统要求

我们的技术栈栈是基于PHP和MySQL构建的。 有关更多信息，请参阅 [系统要求](../../../installation/system-requirements.md).

### 安装和升级说明

您可以使用安装Adobe Commerce 2.4.4 [Composer](../../../installation/composer.md).

## 迁移工具包

数据迁移工具可帮助将现有Magento1.x存储数据转移到Magento2.x。此命令行界面包括验证、进度跟踪、日志记录和测试功能。 有关安装说明，请参阅 [安装数据迁移工具](../../../tools/data-migration-tool/install.md). 考虑探索或参与 [数据迁移存储库](https://github.com/magento/data-migration-tool).

此 [代码迁移工具包](https://github.com/magento-commerce/code-migration) 帮助将现有Magento1.x存储扩展和自定义项传输到Magento2.x。命令行界面包括用于转换Magento1.x模块和布局的脚本。
