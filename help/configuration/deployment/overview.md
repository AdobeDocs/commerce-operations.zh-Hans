---
title: 部署概述
description: 请阅读有关商务应用程序的部署策略。
source-git-commit: 6a3995dd24f8e3e8686a8893be9693581d31712b
workflow-type: tm+mt
source-wordcount: '816'
ht-degree: 0%

---


# 部署概述

这些主题讨论了将商务应用程序部署到Adobe Commerce版本2.2及更高版本的生产站点的过程。 Adobe建议，对于具有大型站点且不希望在部署过程中出现停机的任何人员，应使用此部署方法。

如果您在单台计算机上部署商务，并且能够在部署期间忍受一些停机，请参阅 [单机部署](../deployment/single-machine.md).

## 管道部署

在Commerce版本2.2中引入了Adobe _管道部署_ 作为部署到生产的一种新方式，停机时间最短。 此部署过程发生在不同的系统上，为所有管道部署系统提供了维护一致配置的方法。 它是一个简单但功能强大的模型，它允许您将普通配置设置与特定于系统的设置（如主机和端口）或敏感设置（如名称和密码）分开。

要使用管道部署，Adobe会假定您：

- 经验丰富的系统集成商，对Adobe Commerce配置选项有出色的了解。
- 管理大型商务网站(数千个库存单位(SKU))，并希望将生产网站的停机时间减至最低。
- 了解PHP编程。
- 在源代码管理方法方面经验丰富。
- 您的代码位于源代码管理存储库中。 在本指南中，我们假定您使用的是基于Git的存储库。

### 减少停机时间

在与生产系统分开的计算机上部署静态资产并编译代码时，可以最大程度地减少停机时间。 生产系统上的停机时间限制为将静态文件和编译的代码传输到服务器所需的时间。

## 部署系统

我们使用以下术语描述与部署相关的系统。

- **开发系统** — 开发人员在其中工作自定义代码的计算机；并从Commerce Marketplace安装扩展、主题和语言包。 此外，您还可以在开发系统上进行所有配置更改。 您可以拥有许多开发系统。

- **构建系统** — 一个系统，用于为生产系统部署静态资产和编译代码。 由于您是在非生产环境中的系统上构建这些资产，因此可以将生产系统的停机时间减至最低。

   您的构建系统不必安装Commerce。 它只需要商务代码，但不需要数据库连接。 此外，您的构建系统不需要是物理上独立的服务器。

- **暂存系统**—_可选_. 您可以选择设置一个暂存系统，以用于所有集成代码(包括用户接受测试(UAT))的最终测试。 与设置生产系统相同的方式设置暂存系统。 除了暂存不是您的实时商店且不处理客户订单这一事实，暂存与生产完全相同。

- **生产系统** — 您的实时商店。 您应在此处对直接配置进行的更改微乎其微，而且当然没有在暂存实例上测试过。 如有可能，请通过 [数据修补程序](https://developer.adobe.com/commerce/php/development/components/declarative-schema/patches/) 已在暂存/开发实例上进行测试的ID。

## 其他部署方法

或者，您也可以选择使用其他部署方法，包括：

- 使用SCP或rsync进行安全复制
- [卡皮斯特拉诺](https://capistranorb.com/documentation/overview/what-is-capistrano)
- 的 [部署器工具](https://deployer.org/)

## 管理配置

之后建模 [12因素应用程序设计中的因素3](https://12factor.net/config), Commerce现在将每个系统的配置存储在系统本身中。 （开发配置设置存储在开发系统中，生产设置存储在生产系统中。）

我们提供了一种同步系统配置的方法：

- **共享配置** — 不特定于系统也不敏感的设置。

   共享设置是您希望在开发和生产系统上保持一致的设置。 在开发的管理员(或在云基础架构上的Adobe Commerce上)中设置共享配置 _集成_)系统。

   共享配置文件， `app/etc/config.php`，应包含在源代码管理中，以便在开发、构建和生产系统之间共享。

- **特定于系统的配置** — 根据系统而有所不同的设置，如搜索引擎主机名和端口。

- **敏感配置** — 应设置的 _not_ 受到源代码管理，因为它们会公开个人身份信息(PII)或API密钥或密码等设置。

   特定于系统的配置文件， `app/etc/env.php`，应该 _not_ 包含在源代码管理中或在系统之间共享。 请改为使用 [`magento config:set` 和 `magento:sensitive:set` 命令](../cli/set-configuration-values.md) 为生产系统中的这些设置提供值。

>[!INFO]
>
>这些用于管理配置的新方法是可选的。 您不必这样做，但强烈建议您使用它们。

大多数情况下，您在共享、系统特定或敏感配置中设置的配置选项在管理员中无法编辑。 这有助于在所有系统中保持设置一致。 (您可以选择使用 [`magento config:set` 命令](../cli/set-configuration-values.md) 没有 `--lock` 选项，以配置可在“管理员”中编辑的设置。)

每个商务配置选项都有一个唯一 _配置路径_. 要为配置选项设置值，可以使用CLI命令或环境变量来设置特定系统上该配置路径的值。
