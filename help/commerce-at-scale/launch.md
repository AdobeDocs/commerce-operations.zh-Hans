---
title: 性能测试提示
description: 了解如何设置KPI以启动Adobe商务和Adobe Experience Manager解决方案。
source-git-commit: 6ad72d5110ae3e3a7cf341282f2af9b700874f09
workflow-type: tm+mt
source-wordcount: '1147'
ht-degree: 0%

---


# 性能测试提示

要评估上述所有更改的有效性，应在上线之前和将来对生产环境进行任何主要部署之前，运行彻底的性能测试。 在规划负载测试时，请务必尽可能模拟真实的消费者流量。

AEM/CIF/Adobe商务网站中资源密集度最高的区域是无法缓存的区域，如结帐流程和网站搜索。 静态页面浏览(如用于生成详细信息页面(PDP)和产品列表页面(PLP))是电子商务网站的大部分流量，因此测试中的脚本和情景应该反映这一点来衡量平台的限制。

如果为负载测试运行一个脚本，该脚本在不需要跨步骤等待的情况下浏览站点，并且每次完成结帐流程时都不会给出平台限制的可靠指示，因为这并不是真实情况。

定义KPI应是性能测试计划中的第一步：定义可在初始测试期间进行测试的量度，然后在网站上线后再次进行测量，并定期进行测量。 这允许您跟踪网站在启动前后的性能随时间变化。 要定义的示例KPI可以是：

- 平均响应时间 — 到第一字节或最后一字节的时间
- 延迟
- 字节/秒（吞吐量）
- 错误率
- 每小时订单数
- 每小时页面查看次数
- 每小时独特用户数（并行购物者）

## Jmeter准则

在开发AEM/CIF/Adobe商务负载测试时，应考虑以下Jmeter高级准则：

- 将您的脚本拆分为可配置的方案，这些方案应包括，例如：
   - 打开主页
   - 打开类别页面(PLP)
   - 查看简单产品(PDP) — 每个迭代内有2个循环
   - 查看可配置产品 — 每个迭代内有2个循环
      - 例如，将上述步骤设置为流量的60%
   - 产品搜索
      - 例如，将搜索目录设置为37%的流量
   - 购物车和结帐
      - 例如，完成脚本的购物车和结帐部分的用户应默认使用约3%的行业标准电子商务网站转化率
      - 由于结帐流量不足，且通常是资源密集型操作，因此如果为完成订单的人数与网站浏览器的数量之间的关系设置一个不切实际的高值，则您的网站可处理的流量结果将不可靠。
- 在每次测试运行之前清除所有缓存：
   - 应完全清理AEM调度程序缓存
   - Adobe商务的快速和内部缓存应完全刷新和清理 — 这可以通过Adobe商务管理员中的缓存控制来完成。
- 在Jmeter测试中包括匝道周期：未设置启动周期，意味着流量不会逐渐增加，站点也不可能缓存任何常访问的页面和页面组件。 在现实中，所有峰值流量在完全未缓存的网站上完全同时到达的情况是不寻常的，因此Jmeter测试脚本中应包含一个斜坡段，以便允许缓存像在真实电子商务网站上一样累积。
- 应使用迭代中每个步骤之间的“等待时间”，实际上，用户不会
在用户的历程中，会立即跳转到网站上的下一个页面 — 用户阅读页面并决定其下一个操作时，将会有一段等待时间。
- 将线程组设置为无限循环，但在x的设定时间（例如60分钟）内，将提供可重复的测试，其响应时间中值与以前的测试运行相当。 这意味着在设置启动周期后，将同时运行虚拟用户的目标数量，并且这将在设置的循环时间内持续。
- 中值时间应用于平均响应时间的改善/减少，而不是平均响应时间。 如果
有一些边缘结果比其他结果花费的时间要长得多，这样会使此平均结果产生偏差，但我们对大多数用户的最终用户响应时间感兴趣，这更适合于中值测量。
- 默认情况下，不会在jmeter中收集嵌入的资源（例如，当实际用户访问页面时下载的JS、CSS和其他资源）。 可以启用此功能，但只应对于您正在测试的域，仍应排除外部资源调用(例如，我们不希望包含来自外部托管服务的响应时间，例如 google analytics代码，因为我们无法控制这些代码)。
- 应启用HTTP缓存管理器，这样Jmeter就可以在历程中缓存页面元素，如
实际用户在自己的浏览器上浏览网站时的历程。 在用户访问网站的历程中，用户的浏览器将只下载一次相关的嵌入式资源，然后这些资源将被用户的浏览器缓存。 此外，如果同一用户在完成原始访问后某段时间又返回到网站，则仍可能是缓存这些资产的缓存。
- 监听器应保留在实际负载测试运行中（例如“查看结果树”和“聚合报告”）。 在非GUI实际负载测试运行中包含此内容，可能会影响Jmeter报告的性能结果，因为在实际测试运行期间会使用资源来生成报告。 已从测试脚本中删除这些侦听器，以替换为JTL结果文件，然后可以使用Jmeter的“报告功能板”功能处理该文件。
- 评估的目标响应时间，以便功能板报表的“Apdex得分”可用作衡量测试运行之间更改对性能的影响的快速方法。 Apdex的得分基于在可容忍的时间内能够访问网站的人员数量。 如果响应时间超过某个“令人沮丧”的量，则分数会降低。 使用“apdex_issuetd_ threshold”和“apdex_periabled_threshold”参数可以设置时间。
- 设置目标“每小时订单数”量度，以向业务用户显示，而不是虚拟用户计数。 “虚拟用户”可能是一个复杂的主题，用于了解测试在真实生活中测量的内容。 通过计算网站转化率、每小时订单数、用户在网站上花费的平均时间以及每次页面加载之间的思考时间，可以使用行业标准计算来根据要实现的每小时订单数显示不同的负载测试方案。
- 最后，Jmeter测试服务器应该在地理上接近您的大多数用户流量的来源和云基础架构托管位置的服务器上运行 — 希望这些都是相同的。
